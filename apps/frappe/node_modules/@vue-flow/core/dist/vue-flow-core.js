"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("vue");function xt(e){return a.getCurrentScope()?(a.onScopeDispose(e),!0):!1}function oe(e){return typeof e=="function"?e():a.unref(e)}const Qo=typeof window<"u",rr=e=>typeof e<"u",ei=()=>{};function lr(e,t){function n(...o){return new Promise((i,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(r)})}return n}const ti=e=>e();function ar(e=ti){const t=a.ref(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...r)=>{t.value&&e(...r)};return{isActive:a.readonly(t),pause:n,resume:o,eventFilter:i}}function co(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function Dt(...e){if(e.length!==1)return a.toRef(...e);const t=e[0];return typeof t=="function"?a.readonly(a.customRef(()=>({get:t,set:ei}))):a.ref(t)}var ur=Object.defineProperty,sr=Object.defineProperties,cr=Object.getOwnPropertyDescriptors,fo=Object.getOwnPropertySymbols,dr=Object.prototype.hasOwnProperty,fr=Object.prototype.propertyIsEnumerable,ho=(e,t,n)=>t in e?ur(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hr=(e,t)=>{for(var n in t||(t={}))dr.call(t,n)&&ho(e,n,t[n]);if(fo)for(var n of fo(t))fr.call(t,n)&&ho(e,n,t[n]);return e},gr=(e,t)=>sr(e,cr(t));function pr(e){if(!a.isRef(e))return a.toRefs(e);const t=Array.isArray(e.value)?new Array(e.value.length):{};for(const n in e.value)t[n]=a.customRef(()=>({get(){return e.value[n]},set(o){if(Array.isArray(e.value)){const i=[...e.value];i[n]=o,e.value=i}else{const i=gr(hr({},e.value),{[n]:o});Object.setPrototypeOf(i,e.value),e.value=i}}}));return t}function kn(e,t=!1){function n(h,{flush:p="sync",deep:y=!1,timeout:g,throwOnTimeout:f}={}){let _=null;const b=[new Promise(C=>{_=a.watch(e,m=>{h(m)!==t&&(_==null||_(),C(m))},{flush:p,deep:y,immediate:!0})})];return g!=null&&b.push(co(g,f).then(()=>oe(e)).finally(()=>_==null?void 0:_())),Promise.race(b)}function o(h,p){if(!a.isRef(h))return n(m=>m===h,p);const{flush:y="sync",deep:g=!1,timeout:f,throwOnTimeout:_}=p??{};let v=null;const C=[new Promise(m=>{v=a.watch([e,h],([k,x])=>{t!==(k===x)&&(v==null||v(),m(k))},{flush:y,deep:g,immediate:!0})})];return f!=null&&C.push(co(f,_).then(()=>oe(e)).finally(()=>(v==null||v(),oe(e)))),Promise.race(C)}function i(h){return n(p=>!!p,h)}function r(h){return o(null,h)}function l(h){return o(void 0,h)}function u(h){return n(Number.isNaN,h)}function s(h,p){return n(y=>{const g=Array.from(y);return g.includes(h)||g.includes(oe(h))},p)}function c(h){return d(1,h)}function d(h=1,p){let y=-1;return n(()=>(y+=1,y>=h),p)}return Array.isArray(oe(e))?{toMatch:n,toContains:s,changed:c,changedTimes:d,get not(){return kn(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:r,toBeNaN:u,toBeUndefined:l,changed:c,changedTimes:d,get not(){return kn(e,!t)}}}function me(e){return kn(e)}var go=Object.getOwnPropertySymbols,mr=Object.prototype.hasOwnProperty,vr=Object.prototype.propertyIsEnumerable,yr=(e,t)=>{var n={};for(var o in e)mr.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&go)for(var o of go(e))t.indexOf(o)<0&&vr.call(e,o)&&(n[o]=e[o]);return n};function xr(e,t,n={}){const o=n,{eventFilter:i=ti}=o,r=yr(o,["eventFilter"]);return a.watch(e,lr(i,t),r)}var wr=Object.defineProperty,_r=Object.defineProperties,Er=Object.getOwnPropertyDescriptors,At=Object.getOwnPropertySymbols,ni=Object.prototype.hasOwnProperty,oi=Object.prototype.propertyIsEnumerable,po=(e,t,n)=>t in e?wr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,br=(e,t)=>{for(var n in t||(t={}))ni.call(t,n)&&po(e,n,t[n]);if(At)for(var n of At(t))oi.call(t,n)&&po(e,n,t[n]);return e},Sr=(e,t)=>_r(e,Er(t)),Nr=(e,t)=>{var n={};for(var o in e)ni.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&At)for(var o of At(e))t.indexOf(o)<0&&oi.call(e,o)&&(n[o]=e[o]);return n};function Ke(e,t,n={}){const o=n,{eventFilter:i}=o,r=Nr(o,["eventFilter"]),{eventFilter:l,pause:u,resume:s,isActive:c}=ar(i);return{stop:xr(e,t,Sr(br({},r),{eventFilter:l})),pause:u,resume:s,isActive:c}}function Cn(e){var t;const n=oe(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Hn=Qo?window:void 0;function Ln(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=Hn):[t,n,o,i]=e,!t)return ei;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],l=()=>{r.forEach(d=>d()),r.length=0},u=(d,h,p,y)=>(d.addEventListener(h,p,y),()=>d.removeEventListener(h,p,y)),s=a.watch(()=>[Cn(t),oe(i)],([d,h])=>{l(),d&&r.push(...n.flatMap(p=>o.map(y=>u(d,p,y,h))))},{immediate:!0,flush:"post"}),c=()=>{s(),l()};return xt(c),c}function kr(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function mo(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=Hn,eventName:r="keydown",passive:l=!1,dedupe:u=!1}=o,s=kr(t);return Ln(i,r,d=>{d.repeat&&oe(u)||s(d)&&n(d)},l)}function Cr(){const e=a.ref(!1);return a.getCurrentInstance()&&a.onMounted(()=>{e.value=!0}),e}function Mr(e){const t=Cr();return a.computed(()=>(t.value,!!e()))}function $r(e){return JSON.parse(JSON.stringify(e))}var vo=Object.getOwnPropertySymbols,Tr=Object.prototype.hasOwnProperty,Br=Object.prototype.propertyIsEnumerable,Pr=(e,t)=>{var n={};for(var o in e)Tr.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&vo)for(var o of vo(e))t.indexOf(o)<0&&Br.call(e,o)&&(n[o]=e[o]);return n};function Or(e,t,n={}){const o=n,{window:i=Hn}=o,r=Pr(o,["window"]);let l;const u=Mr(()=>i&&"ResizeObserver"in i),s=()=>{l&&(l.disconnect(),l=void 0)},c=a.computed(()=>Array.isArray(e)?e.map(p=>Cn(p)):[Cn(e)]),d=a.watch(c,p=>{if(s(),u.value&&i){l=new ResizeObserver(t);for(const y of p)y&&l.observe(y,r)}},{immediate:!0,flush:"post",deep:!0}),h=()=>{s(),d()};return xt(h),{isSupported:u,stop:h}}function at(e,t,n,o={}){var i,r,l;const{clone:u=!1,passive:s=!1,eventName:c,deep:d=!1,defaultValue:h,shouldEmit:p}=o,y=a.getCurrentInstance(),g=n||(y==null?void 0:y.emit)||((i=y==null?void 0:y.$emit)==null?void 0:i.bind(y))||((l=(r=y==null?void 0:y.proxy)==null?void 0:r.$emit)==null?void 0:l.bind(y==null?void 0:y.proxy));let f=c;t||(t="modelValue"),f=c||f||`update:${t.toString()}`;const _=C=>u?typeof u=="function"?u(C):$r(C):C,v=()=>rr(e[t])?_(e[t]):h,b=C=>{p?p(C)&&g(f,C):g(f,C)};if(s){const C=v(),m=a.ref(C);return a.watch(()=>e[t],k=>m.value=_(k)),a.watch(m,k=>{(k!==e[t]||d)&&b(k)},{deep:d}),m}else return a.computed({get(){return v()},set(C){b(C)}})}var Ir={value:()=>{}};function Ut(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Bt(n)}function Bt(e){this._=e}function Dr(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Bt.prototype=Ut.prototype={constructor:Bt,on:function(e,t){var n=this._,o=Dr(e+"",n),i,r=-1,l=o.length;if(arguments.length<2){for(;++r<l;)if((i=(e=o[r]).type)&&(i=Ar(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<l;)if(i=(e=o[r]).type)n[i]=yo(n[i],e.name,t);else if(t==null)for(i in n)n[i]=yo(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Bt(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};function Ar(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function yo(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Ir,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Mn="http://www.w3.org/1999/xhtml";const xo={svg:"http://www.w3.org/2000/svg",xhtml:Mn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zt(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),xo.hasOwnProperty(t)?{space:xo[t],local:e}:e}function zr(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Mn&&t.documentElement.namespaceURI===Mn?t.createElement(e):t.createElementNS(n,e)}}function Rr(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ii(e){var t=Zt(e);return(t.local?Rr:zr)(t)}function Vr(){}function Fn(e){return e==null?Vr:function(){return this.querySelector(e)}}function Hr(e){typeof e!="function"&&(e=Fn(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,u=o[i]=new Array(l),s,c,d=0;d<l;++d)(s=r[d])&&(c=e.call(s,s.__data__,d,r))&&("__data__"in s&&(c.__data__=s.__data__),u[d]=c);return new ve(o,this._parents)}function Lr(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Fr(){return[]}function ri(e){return e==null?Fr:function(){return this.querySelectorAll(e)}}function Gr(e){return function(){return Lr(e.apply(this,arguments))}}function Yr(e){typeof e=="function"?e=Gr(e):e=ri(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var l=t[r],u=l.length,s,c=0;c<u;++c)(s=l[c])&&(o.push(e.call(s,s.__data__,c,l)),i.push(s));return new ve(o,i)}function li(e){return function(){return this.matches(e)}}function ai(e){return function(t){return t.matches(e)}}var Xr=Array.prototype.find;function Ur(e){return function(){return Xr.call(this.children,e)}}function Zr(){return this.firstElementChild}function Wr(e){return this.select(e==null?Zr:Ur(typeof e=="function"?e:ai(e)))}var Kr=Array.prototype.filter;function qr(){return Array.from(this.children)}function jr(e){return function(){return Kr.call(this.children,e)}}function Jr(e){return this.selectAll(e==null?qr:jr(typeof e=="function"?e:ai(e)))}function Qr(e){typeof e!="function"&&(e=li(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,u=o[i]=[],s,c=0;c<l;++c)(s=r[c])&&e.call(s,s.__data__,c,r)&&u.push(s);return new ve(o,this._parents)}function ui(e){return new Array(e.length)}function el(){return new ve(this._enter||this._groups.map(ui),this._parents)}function zt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}zt.prototype={constructor:zt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function tl(e){return function(){return e}}function nl(e,t,n,o,i,r){for(var l=0,u,s=t.length,c=r.length;l<c;++l)(u=t[l])?(u.__data__=r[l],o[l]=u):n[l]=new zt(e,r[l]);for(;l<s;++l)(u=t[l])&&(i[l]=u)}function ol(e,t,n,o,i,r,l){var u,s,c=new Map,d=t.length,h=r.length,p=new Array(d),y;for(u=0;u<d;++u)(s=t[u])&&(p[u]=y=l.call(s,s.__data__,u,t)+"",c.has(y)?i[u]=s:c.set(y,s));for(u=0;u<h;++u)y=l.call(e,r[u],u,r)+"",(s=c.get(y))?(o[u]=s,s.__data__=r[u],c.delete(y)):n[u]=new zt(e,r[u]);for(u=0;u<d;++u)(s=t[u])&&c.get(p[u])===s&&(i[u]=s)}function il(e){return e.__data__}function rl(e,t){if(!arguments.length)return Array.from(this,il);var n=t?ol:nl,o=this._parents,i=this._groups;typeof e!="function"&&(e=tl(e));for(var r=i.length,l=new Array(r),u=new Array(r),s=new Array(r),c=0;c<r;++c){var d=o[c],h=i[c],p=h.length,y=ll(e.call(d,d&&d.__data__,c,o)),g=y.length,f=u[c]=new Array(g),_=l[c]=new Array(g),v=s[c]=new Array(p);n(d,h,f,_,v,y,t);for(var b=0,C=0,m,k;b<g;++b)if(m=f[b]){for(b>=C&&(C=b+1);!(k=_[C])&&++C<g;);m._next=k||null}}return l=new ve(l,o),l._enter=u,l._exit=s,l}function ll(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function al(){return new ve(this._exit||this._groups.map(ui),this._parents)}function ul(e,t,n){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?r.remove():n(r),o&&i?o.merge(i).order():i}function sl(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,l=Math.min(i,r),u=new Array(i),s=0;s<l;++s)for(var c=n[s],d=o[s],h=c.length,p=u[s]=new Array(h),y,g=0;g<h;++g)(y=c[g]||d[g])&&(p[g]=y);for(;s<i;++s)u[s]=n[s];return new ve(u,this._parents)}function cl(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,r=o[i],l;--i>=0;)(l=o[i])&&(r&&l.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(l,r),r=l);return this}function dl(e){e||(e=fl);function t(h,p){return h&&p?e(h.__data__,p.__data__):!h-!p}for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var l=n[r],u=l.length,s=i[r]=new Array(u),c,d=0;d<u;++d)(c=l[d])&&(s[d]=c);s.sort(t)}return new ve(i,this._parents).order()}function fl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function hl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function gl(){return Array.from(this)}function pl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var l=o[i];if(l)return l}return null}function ml(){let e=0;for(const t of this)++e;return e}function vl(){return!this.node()}function yl(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],r=0,l=i.length,u;r<l;++r)(u=i[r])&&e.call(u,u.__data__,r,i);return this}function xl(e){return function(){this.removeAttribute(e)}}function wl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _l(e,t){return function(){this.setAttribute(e,t)}}function El(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function bl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Sl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Nl(e,t){var n=Zt(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?wl:xl:typeof t=="function"?n.local?Sl:bl:n.local?El:_l)(n,t))}function si(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function kl(e){return function(){this.style.removeProperty(e)}}function Cl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ml(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function $l(e,t,n){return arguments.length>1?this.each((t==null?kl:typeof t=="function"?Ml:Cl)(e,t,n??"")):et(this.node(),e)}function et(e,t){return e.style.getPropertyValue(t)||si(e).getComputedStyle(e,null).getPropertyValue(t)}function Tl(e){return function(){delete this[e]}}function Bl(e,t){return function(){this[e]=t}}function Pl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ol(e,t){return arguments.length>1?this.each((t==null?Tl:typeof t=="function"?Pl:Bl)(e,t)):this.node()[e]}function ci(e){return e.trim().split(/^|\s+/)}function Gn(e){return e.classList||new di(e)}function di(e){this._node=e,this._names=ci(e.getAttribute("class")||"")}di.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function fi(e,t){for(var n=Gn(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function hi(e,t){for(var n=Gn(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Il(e){return function(){fi(this,e)}}function Dl(e){return function(){hi(this,e)}}function Al(e,t){return function(){(t.apply(this,arguments)?fi:hi)(this,e)}}function zl(e,t){var n=ci(e+"");if(arguments.length<2){for(var o=Gn(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Al:t?Il:Dl)(n,t))}function Rl(){this.textContent=""}function Vl(e){return function(){this.textContent=e}}function Hl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ll(e){return arguments.length?this.each(e==null?Rl:(typeof e=="function"?Hl:Vl)(e)):this.node().textContent}function Fl(){this.innerHTML=""}function Gl(e){return function(){this.innerHTML=e}}function Yl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Xl(e){return arguments.length?this.each(e==null?Fl:(typeof e=="function"?Yl:Gl)(e)):this.node().innerHTML}function Ul(){this.nextSibling&&this.parentNode.appendChild(this)}function Zl(){return this.each(Ul)}function Wl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Kl(){return this.each(Wl)}function ql(e){var t=typeof e=="function"?e:ii(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function jl(){return null}function Jl(e,t){var n=typeof e=="function"?e:ii(e),o=t==null?jl:typeof t=="function"?t:Fn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Ql(){var e=this.parentNode;e&&e.removeChild(this)}function ea(){return this.each(Ql)}function ta(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function na(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function oa(e){return this.select(e?na:ta)}function ia(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ra(e){return function(t){e.call(this,t,this.__data__)}}function la(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function aa(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,r;n<i;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function ua(e,t,n){return function(){var o=this.__on,i,r=ra(t);if(o){for(var l=0,u=o.length;l<u;++l)if((i=o[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),i.value=t;return}}this.addEventListener(e.type,r,n),i={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(i):this.__on=[i]}}function sa(e,t,n){var o=la(e+""),i,r=o.length,l;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,c=u.length,d;s<c;++s)for(i=0,d=u[s];i<r;++i)if((l=o[i]).type===d.type&&l.name===d.name)return d.value}return}for(u=t?ua:aa,i=0;i<r;++i)this.each(u(o[i],t,n));return this}function gi(e,t,n){var o=si(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ca(e,t){return function(){return gi(this,e,t)}}function da(e,t){return function(){return gi(this,e,t.apply(this,arguments))}}function fa(e,t){return this.each((typeof t=="function"?da:ca)(e,t))}function*ha(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length,l;i<r;++i)(l=o[i])&&(yield l)}var pi=[null];function ve(e,t){this._groups=e,this._parents=t}function wt(){return new ve([[document.documentElement]],pi)}function ga(){return this}ve.prototype=wt.prototype={constructor:ve,select:Hr,selectAll:Yr,selectChild:Wr,selectChildren:Jr,filter:Qr,data:rl,enter:el,exit:al,join:ul,merge:sl,selection:ga,order:cl,sort:dl,call:hl,nodes:gl,node:pl,size:ml,empty:vl,each:yl,attr:Nl,style:$l,property:Ol,classed:zl,text:Ll,html:Xl,raise:Zl,lower:Kl,append:ql,insert:Jl,remove:ea,clone:oa,datum:ia,on:sa,dispatch:fa,[Symbol.iterator]:ha};function xe(e){return typeof e=="string"?new ve([[document.querySelector(e)]],[document.documentElement]):new ve([[e]],pi)}function pa(e){let t;for(;t=e.sourceEvent;)e=t;return e}function be(e,t){if(e=pa(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const ma={passive:!1},st={capture:!0,passive:!1};function fn(e){e.stopImmediatePropagation()}function qe(e){e.preventDefault(),e.stopImmediatePropagation()}function mi(e){var t=e.document.documentElement,n=xe(e).on("dragstart.drag",qe,st);"onselectstart"in t?n.on("selectstart.drag",qe,st):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function vi(e,t){var n=e.document.documentElement,o=xe(e).on("dragstart.drag",null);t&&(o.on("click.drag",qe,st),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const St=e=>()=>e;function $n(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:r,x:l,y:u,dx:s,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}$n.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function va(e){return!e.ctrlKey&&!e.button}function ya(){return this.parentNode}function xa(e,t){return t??{x:e.x,y:e.y}}function wa(){return navigator.maxTouchPoints||"ontouchstart"in this}function _a(){var e=va,t=ya,n=xa,o=wa,i={},r=Ut("start","drag","end"),l=0,u,s,c,d,h=0;function p(m){m.on("mousedown.drag",y).filter(o).on("touchstart.drag",_).on("touchmove.drag",v,ma).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(m,k){if(!(d||!e.call(this,m,k))){var x=C(this,t.call(this,m,k),m,k,"mouse");x&&(xe(m.view).on("mousemove.drag",g,st).on("mouseup.drag",f,st),mi(m.view),fn(m),c=!1,u=m.clientX,s=m.clientY,x("start",m))}}function g(m){if(qe(m),!c){var k=m.clientX-u,x=m.clientY-s;c=k*k+x*x>h}i.mouse("drag",m)}function f(m){xe(m.view).on("mousemove.drag mouseup.drag",null),vi(m.view,c),qe(m),i.mouse("end",m)}function _(m,k){if(e.call(this,m,k)){var x=m.changedTouches,D=t.call(this,m,k),z=x.length,G,A;for(G=0;G<z;++G)(A=C(this,D,m,k,x[G].identifier,x[G]))&&(fn(m),A("start",m,x[G]))}}function v(m){var k=m.changedTouches,x=k.length,D,z;for(D=0;D<x;++D)(z=i[k[D].identifier])&&(qe(m),z("drag",m,k[D]))}function b(m){var k=m.changedTouches,x=k.length,D,z;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),D=0;D<x;++D)(z=i[k[D].identifier])&&(fn(m),z("end",m,k[D]))}function C(m,k,x,D,z,G){var A=r.copy(),J=be(G||x,k),Z,ee,w;if((w=n.call(m,new $n("beforestart",{sourceEvent:x,target:p,identifier:z,active:l,x:J[0],y:J[1],dx:0,dy:0,dispatch:A}),D))!=null)return Z=w.x-J[0]||0,ee=w.y-J[1]||0,function M(S,P,H){var U=J,T;switch(S){case"start":i[z]=M,T=l++;break;case"end":delete i[z],--l;case"drag":J=be(H||P,k),T=l;break}A.call(S,m,new $n(S,{sourceEvent:P,subject:w,target:p,identifier:z,active:T,x:J[0]+Z,y:J[1]+ee,dx:J[0]-U[0],dy:J[1]-U[1],dispatch:A}),D)}}return p.filter=function(m){return arguments.length?(e=typeof m=="function"?m:St(!!m),p):e},p.container=function(m){return arguments.length?(t=typeof m=="function"?m:St(m),p):t},p.subject=function(m){return arguments.length?(n=typeof m=="function"?m:St(m),p):n},p.touchable=function(m){return arguments.length?(o=typeof m=="function"?m:St(!!m),p):o},p.on=function(){var m=r.on.apply(r,arguments);return m===r?p:m},p.clickDistance=function(m){return arguments.length?(h=(m=+m)*m,p):Math.sqrt(h)},p}function Yn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function yi(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function _t(){}var ct=.7,Rt=1/ct,je="\\s*([+-]?\\d+)\\s*",dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Se="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ea=/^#([0-9a-f]{3,8})$/,ba=new RegExp(`^rgb\\(${je},${je},${je}\\)$`),Sa=new RegExp(`^rgb\\(${Se},${Se},${Se}\\)$`),Na=new RegExp(`^rgba\\(${je},${je},${je},${dt}\\)$`),ka=new RegExp(`^rgba\\(${Se},${Se},${Se},${dt}\\)$`),Ca=new RegExp(`^hsl\\(${dt},${Se},${Se}\\)$`),Ma=new RegExp(`^hsla\\(${dt},${Se},${Se},${dt}\\)$`),wo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yn(_t,ft,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_o,formatHex:_o,formatHex8:$a,formatHsl:Ta,formatRgb:Eo,toString:Eo});function _o(){return this.rgb().formatHex()}function $a(){return this.rgb().formatHex8()}function Ta(){return xi(this).formatHsl()}function Eo(){return this.rgb().formatRgb()}function ft(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ea.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?bo(t):n===3?new ge(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Nt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Nt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ba.exec(e))?new ge(t[1],t[2],t[3],1):(t=Sa.exec(e))?new ge(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Na.exec(e))?Nt(t[1],t[2],t[3],t[4]):(t=ka.exec(e))?Nt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ca.exec(e))?ko(t[1],t[2]/100,t[3]/100,1):(t=Ma.exec(e))?ko(t[1],t[2]/100,t[3]/100,t[4]):wo.hasOwnProperty(e)?bo(wo[e]):e==="transparent"?new ge(NaN,NaN,NaN,0):null}function bo(e){return new ge(e>>16&255,e>>8&255,e&255,1)}function Nt(e,t,n,o){return o<=0&&(e=t=n=NaN),new ge(e,t,n,o)}function Ba(e){return e instanceof _t||(e=ft(e)),e?(e=e.rgb(),new ge(e.r,e.g,e.b,e.opacity)):new ge}function Tn(e,t,n,o){return arguments.length===1?Ba(e):new ge(e,t,n,o??1)}function ge(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Yn(ge,Tn,yi(_t,{brighter(e){return e=e==null?Rt:Math.pow(Rt,e),new ge(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ct:Math.pow(ct,e),new ge(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ge(Ye(this.r),Ye(this.g),Ye(this.b),Vt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:So,formatHex:So,formatHex8:Pa,formatRgb:No,toString:No}));function So(){return`#${He(this.r)}${He(this.g)}${He(this.b)}`}function Pa(){return`#${He(this.r)}${He(this.g)}${He(this.b)}${He((isNaN(this.opacity)?1:this.opacity)*255)}`}function No(){const e=Vt(this.opacity);return`${e===1?"rgb(":"rgba("}${Ye(this.r)}, ${Ye(this.g)}, ${Ye(this.b)}${e===1?")":`, ${e})`}`}function Vt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ye(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function He(e){return e=Ye(e),(e<16?"0":"")+e.toString(16)}function ko(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new we(e,t,n,o)}function xi(e){if(e instanceof we)return new we(e.h,e.s,e.l,e.opacity);if(e instanceof _t||(e=ft(e)),!e)return new we;if(e instanceof we)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),l=NaN,u=r-i,s=(r+i)/2;return u?(t===r?l=(n-o)/u+(n<o)*6:n===r?l=(o-t)/u+2:l=(t-n)/u+4,u/=s<.5?r+i:2-r-i,l*=60):u=s>0&&s<1?0:l,new we(l,u,s,e.opacity)}function Oa(e,t,n,o){return arguments.length===1?xi(e):new we(e,t,n,o??1)}function we(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Yn(we,Oa,yi(_t,{brighter(e){return e=e==null?Rt:Math.pow(Rt,e),new we(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ct:Math.pow(ct,e),new we(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new ge(hn(e>=240?e-240:e+120,i,o),hn(e,i,o),hn(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new we(Co(this.h),kt(this.s),kt(this.l),Vt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Vt(this.opacity);return`${e===1?"hsl(":"hsla("}${Co(this.h)}, ${kt(this.s)*100}%, ${kt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Co(e){return e=(e||0)%360,e<0?e+360:e}function kt(e){return Math.max(0,Math.min(1,e||0))}function hn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const wi=e=>()=>e;function Ia(e,t){return function(n){return e+n*t}}function Da(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Aa(e){return(e=+e)==1?_i:function(t,n){return n-t?Da(t,n,e):wi(isNaN(t)?n:t)}}function _i(e,t){var n=t-e;return n?Ia(e,n):wi(isNaN(e)?t:e)}const Mo=function e(t){var n=Aa(t);function o(i,r){var l=n((i=Tn(i)).r,(r=Tn(r)).r),u=n(i.g,r.g),s=n(i.b,r.b),c=_i(i.opacity,r.opacity);return function(d){return i.r=l(d),i.g=u(d),i.b=s(d),i.opacity=c(d),i+""}}return o.gamma=e,o}(1);function Oe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Bn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gn=new RegExp(Bn.source,"g");function za(e){return function(){return e}}function Ra(e){return function(t){return e(t)+""}}function Va(e,t){var n=Bn.lastIndex=gn.lastIndex=0,o,i,r,l=-1,u=[],s=[];for(e=e+"",t=t+"";(o=Bn.exec(e))&&(i=gn.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),u[l]?u[l]+=r:u[++l]=r),(o=o[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,s.push({i:l,x:Oe(o,i)})),n=gn.lastIndex;return n<t.length&&(r=t.slice(n),u[l]?u[l]+=r:u[++l]=r),u.length<2?s[0]?Ra(s[0].x):za(t):(t=s.length,function(c){for(var d=0,h;d<t;++d)u[(h=s[d]).i]=h.x(c);return u.join("")})}var $o=180/Math.PI,Pn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ei(e,t,n,o,i,r){var l,u,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(u=Math.sqrt(n*n+o*o))&&(n/=u,o/=u,s/=u),e*o<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*$o,skewX:Math.atan(s)*$o,scaleX:l,scaleY:u}}var Ct;function Ha(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Pn:Ei(t.a,t.b,t.c,t.d,t.e,t.f)}function La(e){return e==null||(Ct||(Ct=document.createElementNS("http://www.w3.org/2000/svg","g")),Ct.setAttribute("transform",e),!(e=Ct.transform.baseVal.consolidate()))?Pn:(e=e.matrix,Ei(e.a,e.b,e.c,e.d,e.e,e.f))}function bi(e,t,n,o){function i(c){return c.length?c.pop()+" ":""}function r(c,d,h,p,y,g){if(c!==h||d!==p){var f=y.push("translate(",null,t,null,n);g.push({i:f-4,x:Oe(c,h)},{i:f-2,x:Oe(d,p)})}else(h||p)&&y.push("translate("+h+t+p+n)}function l(c,d,h,p){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),p.push({i:h.push(i(h)+"rotate(",null,o)-2,x:Oe(c,d)})):d&&h.push(i(h)+"rotate("+d+o)}function u(c,d,h,p){c!==d?p.push({i:h.push(i(h)+"skewX(",null,o)-2,x:Oe(c,d)}):d&&h.push(i(h)+"skewX("+d+o)}function s(c,d,h,p,y,g){if(c!==h||d!==p){var f=y.push(i(y)+"scale(",null,",",null,")");g.push({i:f-4,x:Oe(c,h)},{i:f-2,x:Oe(d,p)})}else(h!==1||p!==1)&&y.push(i(y)+"scale("+h+","+p+")")}return function(c,d){var h=[],p=[];return c=e(c),d=e(d),r(c.translateX,c.translateY,d.translateX,d.translateY,h,p),l(c.rotate,d.rotate,h,p),u(c.skewX,d.skewX,h,p),s(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,p),c=d=null,function(y){for(var g=-1,f=p.length,_;++g<f;)h[(_=p[g]).i]=_.x(y);return h.join("")}}}var Fa=bi(Ha,"px, ","px)","deg)"),Ga=bi(La,", ",")",")"),Ya=1e-12;function To(e){return((e=Math.exp(e))+1/e)/2}function Xa(e){return((e=Math.exp(e))-1/e)/2}function Ua(e){return((e=Math.exp(2*e))-1)/(e+1)}const Za=function e(t,n,o){function i(r,l){var u=r[0],s=r[1],c=r[2],d=l[0],h=l[1],p=l[2],y=d-u,g=h-s,f=y*y+g*g,_,v;if(f<Ya)v=Math.log(p/c)/t,_=function(D){return[u+D*y,s+D*g,c*Math.exp(t*D*v)]};else{var b=Math.sqrt(f),C=(p*p-c*c+o*f)/(2*c*n*b),m=(p*p-c*c-o*f)/(2*p*n*b),k=Math.log(Math.sqrt(C*C+1)-C),x=Math.log(Math.sqrt(m*m+1)-m);v=(x-k)/t,_=function(D){var z=D*v,G=To(k),A=c/(n*b)*(G*Ua(t*z+k)-Xa(k));return[u+A*y,s+A*g,c*G/To(t*z+k)]}}return _.duration=v*1e3*t/Math.SQRT2,_}return i.rho=function(r){var l=Math.max(.001,+r),u=l*l,s=u*u;return e(l,u,s)},i}(Math.SQRT2,2,4);var tt=0,rt=0,ot=0,Si=1e3,Ht,lt,Lt=0,Ue=0,Wt=0,ht=typeof performance=="object"&&performance.now?performance:Date,Ni=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Xn(){return Ue||(Ni(Wa),Ue=ht.now()+Wt)}function Wa(){Ue=0}function Ft(){this._call=this._time=this._next=null}Ft.prototype=ki.prototype={constructor:Ft,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Xn():+n)+(t==null?0:+t),!this._next&&lt!==this&&(lt?lt._next=this:Ht=this,lt=this),this._call=e,this._time=n,On()},stop:function(){this._call&&(this._call=null,this._time=1/0,On())}};function ki(e,t,n){var o=new Ft;return o.restart(e,t,n),o}function Ka(){Xn(),++tt;for(var e=Ht,t;e;)(t=Ue-e._time)>=0&&e._call.call(void 0,t),e=e._next;--tt}function Bo(){Ue=(Lt=ht.now())+Wt,tt=rt=0;try{Ka()}finally{tt=0,ja(),Ue=0}}function qa(){var e=ht.now(),t=e-Lt;t>Si&&(Wt-=t,Lt=e)}function ja(){for(var e,t=Ht,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ht=n);lt=e,On(o)}function On(e){if(!tt){rt&&(rt=clearTimeout(rt));var t=e-Ue;t>24?(e<1/0&&(rt=setTimeout(Bo,e-ht.now()-Wt)),ot&&(ot=clearInterval(ot))):(ot||(Lt=ht.now(),ot=setInterval(qa,Si)),tt=1,Ni(Bo))}}function Po(e,t,n){var o=new Ft;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var Ja=Ut("start","end","cancel","interrupt"),Qa=[],Ci=0,Oo=1,In=2,Pt=3,Io=4,Dn=5,Ot=6;function Kt(e,t,n,o,i,r){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;eu(e,n,{name:t,index:o,group:i,on:Ja,tween:Qa,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Ci})}function Un(e,t){var n=Ee(e,t);if(n.state>Ci)throw new Error("too late; already scheduled");return n}function Ne(e,t){var n=Ee(e,t);if(n.state>Pt)throw new Error("too late; already running");return n}function Ee(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function eu(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=ki(r,0,n.time);function r(c){n.state=Oo,n.timer.restart(l,n.delay,n.time),n.delay<=c&&l(c-n.delay)}function l(c){var d,h,p,y;if(n.state!==Oo)return s();for(d in o)if(y=o[d],y.name===n.name){if(y.state===Pt)return Po(l);y.state===Io?(y.state=Ot,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete o[d]):+d<t&&(y.state=Ot,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete o[d])}if(Po(function(){n.state===Pt&&(n.state=Io,n.timer.restart(u,n.delay,n.time),u(c))}),n.state=In,n.on.call("start",e,e.__data__,n.index,n.group),n.state===In){for(n.state=Pt,i=new Array(p=n.tween.length),d=0,h=-1;d<p;++d)(y=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=y);i.length=h+1}}function u(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(s),n.state=Dn,1),h=-1,p=i.length;++h<p;)i[h].call(e,d);n.state===Dn&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Ot,n.timer.stop(),delete o[t];for(var c in o)return;delete e.__transition}}function It(e,t){var n=e.__transition,o,i,r=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((o=n[l]).name!==t){r=!1;continue}i=o.state>In&&o.state<Dn,o.state=Ot,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[l]}r&&delete e.__transition}}function tu(e){return this.each(function(){It(this,e)})}function nu(e,t){var n,o;return function(){var i=Ne(this,e),r=i.tween;if(r!==n){o=n=r;for(var l=0,u=o.length;l<u;++l)if(o[l].name===t){o=o.slice(),o.splice(l,1);break}}i.tween=o}}function ou(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var r=Ne(this,e),l=r.tween;if(l!==o){i=(o=l).slice();for(var u={name:t,value:n},s=0,c=i.length;s<c;++s)if(i[s].name===t){i[s]=u;break}s===c&&i.push(u)}r.tween=i}}function iu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Ee(this.node(),n).tween,i=0,r=o.length,l;i<r;++i)if((l=o[i]).name===e)return l.value;return null}return this.each((t==null?nu:ou)(n,e,t))}function Zn(e,t,n){var o=e._id;return e.each(function(){var i=Ne(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ee(i,o).value[t]}}function Mi(e,t){var n;return(typeof t=="number"?Oe:t instanceof ft?Mo:(n=ft(t))?(t=n,Mo):Va)(e,t)}function ru(e){return function(){this.removeAttribute(e)}}function lu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function au(e,t,n){var o,i=n+"",r;return function(){var l=this.getAttribute(e);return l===i?null:l===o?r:r=t(o=l,n)}}function uu(e,t,n){var o,i=n+"",r;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===o?r:r=t(o=l,n)}}function su(e,t,n){var o,i,r;return function(){var l,u=n(this),s;return u==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=u+"",l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,u)))}}function cu(e,t,n){var o,i,r;return function(){var l,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=u+"",l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,u)))}}function du(e,t){var n=Zt(e),o=n==="transform"?Ga:Mi;return this.attrTween(e,typeof t=="function"?(n.local?cu:su)(n,o,Zn(this,"attr."+e,t)):t==null?(n.local?lu:ru)(n):(n.local?uu:au)(n,o,t))}function fu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function hu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function gu(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&hu(e,r)),n}return i._value=t,i}function pu(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&fu(e,r)),n}return i._value=t,i}function mu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Zt(e);return this.tween(n,(o.local?gu:pu)(o,t))}function vu(e,t){return function(){Un(this,e).delay=+t.apply(this,arguments)}}function yu(e,t){return t=+t,function(){Un(this,e).delay=t}}function xu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vu:yu)(t,e)):Ee(this.node(),t).delay}function wu(e,t){return function(){Ne(this,e).duration=+t.apply(this,arguments)}}function _u(e,t){return t=+t,function(){Ne(this,e).duration=t}}function Eu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wu:_u)(t,e)):Ee(this.node(),t).duration}function bu(e,t){if(typeof t!="function")throw new Error;return function(){Ne(this,e).ease=t}}function Su(e){var t=this._id;return arguments.length?this.each(bu(t,e)):Ee(this.node(),t).ease}function Nu(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ne(this,e).ease=n}}function ku(e){if(typeof e!="function")throw new Error;return this.each(Nu(this._id,e))}function Cu(e){typeof e!="function"&&(e=li(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,u=o[i]=[],s,c=0;c<l;++c)(s=r[c])&&e.call(s,s.__data__,c,r)&&u.push(s);return new Pe(o,this._parents,this._name,this._id)}function Mu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),l=new Array(o),u=0;u<r;++u)for(var s=t[u],c=n[u],d=s.length,h=l[u]=new Array(d),p,y=0;y<d;++y)(p=s[y]||c[y])&&(h[y]=p);for(;u<o;++u)l[u]=t[u];return new Pe(l,this._parents,this._name,this._id)}function $u(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Tu(e,t,n){var o,i,r=$u(t)?Un:Ne;return function(){var l=r(this,e),u=l.on;u!==o&&(i=(o=u).copy()).on(t,n),l.on=i}}function Bu(e,t){var n=this._id;return arguments.length<2?Ee(this.node(),n).on.on(e):this.each(Tu(n,e,t))}function Pu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ou(){return this.on("end.remove",Pu(this._id))}function Iu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Fn(e));for(var o=this._groups,i=o.length,r=new Array(i),l=0;l<i;++l)for(var u=o[l],s=u.length,c=r[l]=new Array(s),d,h,p=0;p<s;++p)(d=u[p])&&(h=e.call(d,d.__data__,p,u))&&("__data__"in d&&(h.__data__=d.__data__),c[p]=h,Kt(c[p],t,n,p,c,Ee(d,n)));return new Pe(r,this._parents,t,n)}function Du(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ri(e));for(var o=this._groups,i=o.length,r=[],l=[],u=0;u<i;++u)for(var s=o[u],c=s.length,d,h=0;h<c;++h)if(d=s[h]){for(var p=e.call(d,d.__data__,h,s),y,g=Ee(d,n),f=0,_=p.length;f<_;++f)(y=p[f])&&Kt(y,t,n,f,p,g);r.push(p),l.push(d)}return new Pe(r,l,t,n)}var Au=wt.prototype.constructor;function zu(){return new Au(this._groups,this._parents)}function Ru(e,t){var n,o,i;return function(){var r=et(this,e),l=(this.style.removeProperty(e),et(this,e));return r===l?null:r===n&&l===o?i:i=t(n=r,o=l)}}function $i(e){return function(){this.style.removeProperty(e)}}function Vu(e,t,n){var o,i=n+"",r;return function(){var l=et(this,e);return l===i?null:l===o?r:r=t(o=l,n)}}function Hu(e,t,n){var o,i,r;return function(){var l=et(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),et(this,e))),l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,u))}}function Lu(e,t){var n,o,i,r="style."+t,l="end."+r,u;return function(){var s=Ne(this,e),c=s.on,d=s.value[r]==null?u||(u=$i(t)):void 0;(c!==n||i!==d)&&(o=(n=c).copy()).on(l,i=d),s.on=o}}function Fu(e,t,n){var o=(e+="")=="transform"?Fa:Mi;return t==null?this.styleTween(e,Ru(e,o)).on("end.style."+e,$i(e)):typeof t=="function"?this.styleTween(e,Hu(e,o,Zn(this,"style."+e,t))).each(Lu(this._id,e)):this.styleTween(e,Vu(e,o,t),n).on("end.style."+e,null)}function Gu(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Yu(e,t,n){var o,i;function r(){var l=t.apply(this,arguments);return l!==i&&(o=(i=l)&&Gu(e,l,n)),o}return r._value=t,r}function Xu(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Yu(e,t,n??""))}function Uu(e){return function(){this.textContent=e}}function Zu(e){return function(){var t=e(this);this.textContent=t??""}}function Wu(e){return this.tween("text",typeof e=="function"?Zu(Zn(this,"text",e)):Uu(e==null?"":e+""))}function Ku(e){return function(t){this.textContent=e.call(this,t)}}function qu(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Ku(i)),t}return o._value=e,o}function ju(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,qu(e))}function Ju(){for(var e=this._name,t=this._id,n=Ti(),o=this._groups,i=o.length,r=0;r<i;++r)for(var l=o[r],u=l.length,s,c=0;c<u;++c)if(s=l[c]){var d=Ee(s,t);Kt(s,e,n,c,l,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Pe(o,this._parents,e,n)}function Qu(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(r,l){var u={value:l},s={value:function(){--i===0&&r()}};n.each(function(){var c=Ne(this,o),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),c.on=t}),i===0&&r()})}var es=0;function Pe(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Ti(){return++es}var Me=wt.prototype;Pe.prototype={constructor:Pe,select:Iu,selectAll:Du,selectChild:Me.selectChild,selectChildren:Me.selectChildren,filter:Cu,merge:Mu,selection:zu,transition:Ju,call:Me.call,nodes:Me.nodes,node:Me.node,size:Me.size,empty:Me.empty,each:Me.each,on:Bu,attr:du,attrTween:mu,style:Fu,styleTween:Xu,text:Wu,textTween:ju,remove:Ou,tween:iu,delay:xu,duration:Eu,ease:Su,easeVarying:ku,end:Qu,[Symbol.iterator]:Me[Symbol.iterator]};function ts(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ns={time:null,delay:0,duration:250,ease:ts};function os(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function is(e){var t,n;e instanceof Pe?(t=e._id,e=e._name):(t=Ti(),(n=ns).time=Xn(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var l=o[r],u=l.length,s,c=0;c<u;++c)(s=l[c])&&Kt(s,e,t,c,l,n||os(s,t));return new Pe(o,this._parents,e,t)}wt.prototype.interrupt=tu;wt.prototype.transition=is;const Mt=e=>()=>e;function rs(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Te(e,t,n){this.k=e,this.x=t,this.y=n}Te.prototype={constructor:Te,scale:function(e){return e===1?this:new Te(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Te(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ze=new Te(1,0,0);Te.prototype;function pn(e){e.stopImmediatePropagation()}function it(e){e.preventDefault(),e.stopImmediatePropagation()}function ls(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function as(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Do(){return this.__zoom||Ze}function us(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ss(){return navigator.maxTouchPoints||"ontouchstart"in this}function cs(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),l>r?(r+l)/2:Math.min(0,r)||Math.max(0,l))}function ds(){var e=ls,t=as,n=cs,o=us,i=ss,r=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,s=Za,c=Ut("start","zoom","end"),d,h,p,y=500,g=150,f=0,_=10;function v(w){w.property("__zoom",Do).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",G).on("dblclick.zoom",A).filter(i).on("touchstart.zoom",J).on("touchmove.zoom",Z).on("touchend.zoom touchcancel.zoom",ee).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(w,M,S,P){var H=w.selection?w.selection():w;H.property("__zoom",Do),w!==H?k(w,M,S,P):H.interrupt().each(function(){x(this,arguments).event(P).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},v.scaleBy=function(w,M,S,P){v.scaleTo(w,function(){var H=this.__zoom.k,U=typeof M=="function"?M.apply(this,arguments):M;return H*U},S,P)},v.scaleTo=function(w,M,S,P){v.transform(w,function(){var H=t.apply(this,arguments),U=this.__zoom,T=S==null?m(H):typeof S=="function"?S.apply(this,arguments):S,F=U.invert(T),B=typeof M=="function"?M.apply(this,arguments):M;return n(C(b(U,B),T,F),H,l)},S,P)},v.translateBy=function(w,M,S,P){v.transform(w,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),l)},null,P)},v.translateTo=function(w,M,S,P,H){v.transform(w,function(){var U=t.apply(this,arguments),T=this.__zoom,F=P==null?m(U):typeof P=="function"?P.apply(this,arguments):P;return n(Ze.translate(F[0],F[1]).scale(T.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof S=="function"?-S.apply(this,arguments):-S),U,l)},P,H)};function b(w,M){return M=Math.max(r[0],Math.min(r[1],M)),M===w.k?w:new Te(M,w.x,w.y)}function C(w,M,S){var P=M[0]-S[0]*w.k,H=M[1]-S[1]*w.k;return P===w.x&&H===w.y?w:new Te(w.k,P,H)}function m(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function k(w,M,S,P){w.on("start.zoom",function(){x(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).event(P).end()}).tween("zoom",function(){var H=this,U=arguments,T=x(H,U).event(P),F=t.apply(H,U),B=S==null?m(F):typeof S=="function"?S.apply(H,U):S,W=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),te=H.__zoom,$=typeof M=="function"?M.apply(H,U):M,Y=s(te.invert(B).concat(W/te.k),$.invert(B).concat(W/$.k));return function(O){if(O===1)O=$;else{var K=Y(O),re=W/K[2];O=new Te(re,B[0]-K[0]*re,B[1]-K[1]*re)}T.zoom(null,O)}})}function x(w,M,S){return!S&&w.__zooming||new D(w,M)}function D(w,M){this.that=w,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,M),this.taps=0}D.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,M){return this.mouse&&w!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var M=xe(this.that).datum();c.call(w,this.that,new rs(w,{sourceEvent:this.sourceEvent,target:v,type:w,transform:this.that.__zoom,dispatch:c}),M)}};function z(w,...M){if(!e.apply(this,arguments))return;var S=x(this,M).event(w),P=this.__zoom,H=Math.max(r[0],Math.min(r[1],P.k*Math.pow(2,o.apply(this,arguments)))),U=be(w);if(S.wheel)(S.mouse[0][0]!==U[0]||S.mouse[0][1]!==U[1])&&(S.mouse[1]=P.invert(S.mouse[0]=U)),clearTimeout(S.wheel);else{if(P.k===H)return;S.mouse=[U,P.invert(U)],It(this),S.start()}it(w),S.wheel=setTimeout(T,g),S.zoom("mouse",n(C(b(P,H),S.mouse[0],S.mouse[1]),S.extent,l));function T(){S.wheel=null,S.end()}}function G(w,...M){if(p||!e.apply(this,arguments))return;var S=w.currentTarget,P=x(this,M,!0).event(w),H=xe(w.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",W,!0),U=be(w,S),T=w.clientX,F=w.clientY;mi(w.view),pn(w),P.mouse=[U,this.__zoom.invert(U)],It(this),P.start();function B(te){if(it(te),!P.moved){var $=te.clientX-T,Y=te.clientY-F;P.moved=$*$+Y*Y>f}P.event(te).zoom("mouse",n(C(P.that.__zoom,P.mouse[0]=be(te,S),P.mouse[1]),P.extent,l))}function W(te){H.on("mousemove.zoom mouseup.zoom",null),vi(te.view,P.moved),it(te),P.event(te).end()}}function A(w,...M){if(e.apply(this,arguments)){var S=this.__zoom,P=be(w.changedTouches?w.changedTouches[0]:w,this),H=S.invert(P),U=S.k*(w.shiftKey?.5:2),T=n(C(b(S,U),P,H),t.apply(this,M),l);it(w),u>0?xe(this).transition().duration(u).call(k,T,P,w):xe(this).call(v.transform,T,P,w)}}function J(w,...M){if(e.apply(this,arguments)){var S=w.touches,P=S.length,H=x(this,M,w.changedTouches.length===P).event(w),U,T,F,B;for(pn(w),T=0;T<P;++T)F=S[T],B=be(F,this),B=[B,this.__zoom.invert(B),F.identifier],H.touch0?!H.touch1&&H.touch0[2]!==B[2]&&(H.touch1=B,H.taps=0):(H.touch0=B,U=!0,H.taps=1+!!d);d&&(d=clearTimeout(d)),U&&(H.taps<2&&(h=B[0],d=setTimeout(function(){d=null},y)),It(this),H.start())}}function Z(w,...M){if(this.__zooming){var S=x(this,M).event(w),P=w.changedTouches,H=P.length,U,T,F,B;for(it(w),U=0;U<H;++U)T=P[U],F=be(T,this),S.touch0&&S.touch0[2]===T.identifier?S.touch0[0]=F:S.touch1&&S.touch1[2]===T.identifier&&(S.touch1[0]=F);if(T=S.that.__zoom,S.touch1){var W=S.touch0[0],te=S.touch0[1],$=S.touch1[0],Y=S.touch1[1],O=(O=$[0]-W[0])*O+(O=$[1]-W[1])*O,K=(K=Y[0]-te[0])*K+(K=Y[1]-te[1])*K;T=b(T,Math.sqrt(O/K)),F=[(W[0]+$[0])/2,(W[1]+$[1])/2],B=[(te[0]+Y[0])/2,(te[1]+Y[1])/2]}else if(S.touch0)F=S.touch0[0],B=S.touch0[1];else return;S.zoom("touch",n(C(T,F,B),S.extent,l))}}function ee(w,...M){if(this.__zooming){var S=x(this,M).event(w),P=w.changedTouches,H=P.length,U,T;for(pn(w),p&&clearTimeout(p),p=setTimeout(function(){p=null},y),U=0;U<H;++U)T=P[U],S.touch0&&S.touch0[2]===T.identifier?delete S.touch0:S.touch1&&S.touch1[2]===T.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(T=be(T,this),Math.hypot(h[0]-T[0],h[1]-T[1])<_)){var F=xe(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return v.wheelDelta=function(w){return arguments.length?(o=typeof w=="function"?w:Mt(+w),v):o},v.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Mt(!!w),v):e},v.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:Mt(!!w),v):i},v.extent=function(w){return arguments.length?(t=typeof w=="function"?w:Mt([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),v):t},v.scaleExtent=function(w){return arguments.length?(r[0]=+w[0],r[1]=+w[1],v):[r[0],r[1]]},v.translateExtent=function(w){return arguments.length?(l[0][0]=+w[0][0],l[1][0]=+w[1][0],l[0][1]=+w[0][1],l[1][1]=+w[1][1],v):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},v.constrain=function(w){return arguments.length?(n=w,v):n},v.duration=function(w){return arguments.length?(u=+w,v):u},v.interpolate=function(w){return arguments.length?(s=w,v):s},v.on=function(){var w=c.on.apply(c,arguments);return w===c?v:w},v.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,v):Math.sqrt(f)},v.tapDistance=function(w){return arguments.length?(_=+w,v):_},v}var j=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(j||{}),qt=(e=>(e.Partial="partial",e.Full="full",e))(qt||{}),Le=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Le||{}),Ae=(e=>(e.Strict="strict",e.Loose="loose",e))(Ae||{}),Gt=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Gt||{}),gt=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(gt||{}),Bi=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(Bi||{});const Pi="vue-flow__node-desc",Oi="vue-flow__edge-desc",fs="vue-flow__aria-live",Ii=["Enter"," ","Escape"],Je={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function Ao(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function An(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function jt(e){return{width:e.offsetWidth,height:e.offsetHeight}}function ze(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Wn(e,t){return{x:ze(e.x,t[0][0],t[1][0]),y:ze(e.y,t[0][1],t[1][1])}}function zo(e){const t=e.getRootNode(),n=so();return"elementFromPoint"in t?t:n.document}function _e(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function Di(e){return _e(e)&&"sourceNode"in e&&"targetNode"in e}function Xe(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!_e(e)}function Fe(e){return Xe(e)&&"computedPosition"in e}function hs(e){return!!e.width&&!!e.height&&!!e.x&&!!e.y}function gs(e,t={}){let n=t;return Fe(e)||(n={type:e.type??t.type??"default",dimensions:a.markRaw({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:a.markRaw({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,...t,data:le(e.data)?e.data:{},events:a.markRaw(le(e.events)?e.events:{})}),Object.assign({},n,e,{id:e.id.toString()})}function Kn(e,t={}){const n=le(e.events)?e.events:t.events&&le(t.events)?t.events:{},o=le(e.data)?e.data:t.data&&le(t.data)?t.data:{};return t=Di(e)?t:{...t,sourceHandle:(e.sourceHandle?e.sourceHandle.toString():void 0)||t.sourceHandle,targetHandle:(e.targetHandle?e.targetHandle.toString():void 0)||t.targetHandle,type:e.type??t.type??"default",source:e.source.toString()||t.source,target:e.target.toString()||t.target,updatable:e.updatable??t.updatable,selectable:e.selectable??t.selectable,focusable:e.focusable??t.focusable,data:o,events:a.markRaw(n),label:(e.label&&!De(e.label)?a.markRaw(e.label):e.label)||t.label,interactionWidth:e.interactionWidth||t.interactionWidth},Object.assign({},t,e,{id:e.id.toString()})}function Ai(e,t,n){if(!Xe(e))return[];const o=n==="source"?"target":"source",i=t.filter(r=>_e(r)&&r[o]===e.id).map(r=>_e(r)&&r[n]);return t.filter(r=>i.includes(r.id))}function ps(e,t){return Ai(e,t,"target")}function ms(e,t){return Ai(e,t,"source")}function Jt({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function qn(e,t){return t.some(n=>_e(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function vs(e,t,n){if(!e.source||!e.target)return vt("Can't create edge. An edge needs a source and a target."),t;let o;return _e(e)?o={...e}:o={...e,id:Jt(e)},o=Kn(o,n),qn(o,t)||t.push(o),t}function ys(e,t,n){if(!t.source||!t.target)return vt("Can't create new edge. An edge needs a source and a target."),n;const o=n.find(r=>_e(r)&&r.id===e.id);if(!o)return vt(`The old edge with id=${e.id} does not exist.`),n;const i={...e,id:Jt(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(o),1,i),n.filter(r=>r.id!==e.id)}function jn({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function Qt({x:e,y:t},{x:n,y:o,zoom:i},r,[l,u]){const s={x:(e-n)/i,y:(t-o)/i};return r?{x:l*Math.round(s.x/l),y:u*Math.round(s.y/u)}:s}function zi(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Yt({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function Ri({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function xs(e,t){return Ri(zi(Yt(e),Yt(t)))}function en(e){const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:i={width:0,height:0}}={})=>zi(n,Yt({...o,...i})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ri(t)}function Jn(e,t,{x:n,y:o,zoom:i}={x:0,y:0,zoom:1},r=!1,l=!1){const u={x:(t.x-n)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i};return e.filter(s=>{const{computedPosition:c={x:0,y:0},dimensions:d={width:0,height:0},selectable:h}=s;if(l&&!h)return!1;const p={...c,width:d.width||0,height:d.height||0},y=An(u,p),g=typeof d.width>"u"||typeof d.height>"u"||d.width===0||d.height===0,f=r&&y>0,_=d.width*d.height;return g||f||y>=_})}function Et(e,t){const n=e.map(o=>De(o)?o:o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))}function pt(e,t,n,o,i,r=.1,l={x:0,y:0}){const u=t/(e.width*(1+r)),s=n/(e.height*(1+r)),c=Math.min(u,s),d=ze(c,o,i),h=e.x+e.width/2,p=e.y+e.height/2,y=t/2-h*d+(l.x??0),g=n/2-p*d+(l.y??0);return{x:y,y:g,zoom:d}}function ws(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Vi(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:Vi(n,t):!1}function Ie(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function Ro(e,t,n){return e<t?ze(Math.abs(e-t),1,50)/50:e>n?-ze(Math.abs(e-n),1,50)/50:0}function Hi(e,t){const n=Ro(e.x,35,t.width-35)*20,o=Ro(e.y,35,t.height-35)*20;return[n,o]}function mn(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(nt(t.style)?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(De(i.width)){const r=Number(i.width.replace("px",""));i.width=`${r+n}px`}else i.width+=n;if(o>0)if(De(i.height)){const r=Number(i.height.replace("px",""));i.height=`${r+o}px`}else i.height+=o;if(e.position.x<0){const r=Math.abs(e.position.x);if(t.position.x=t.position.x-r,De(i.width)){const l=Number(i.width.replace("px",""));i.width=`${l+r}px`}else i.width+=r;e.position.x=0}if(e.position.y<0){const r=Math.abs(e.position.y);if(t.position.y=t.position.y-r,De(i.height)){const l=Number(i.height.replace("px",""));i.height=`${l+r}px`}else i.height+=r;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),nt(t.style)?t.style=r=>{const l=t.style;return{...l(r),...i}}:t.style={...t.style,...i}}}}function mt(e,t){e.filter(i=>i.type==="add"||i.type==="remove").forEach(i=>{if(i.type==="add")t.findIndex(l=>l.id===i.item.id)===-1&&t.push(i.item);else if(i.type==="remove"){const r=t.findIndex(l=>l.id===i.id);r!==-1&&t.splice(r,1)}});const o=t.map(i=>i.id);return t.forEach(i=>{var l,u;const r=e.filter(s=>s.id===i.id);for(const s of r)switch(s.type){case"select":i.selected=s.selected;break;case"position":if(Fe(i)&&(typeof s.position<"u"&&(i.position=s.position),typeof s.dragging<"u"&&(i.dragging=s.dragging),i.expandParent&&i.parentNode)){const c=t[o.indexOf(i.parentNode)];c&&Fe(c)&&mn(i,c)}break;case"dimensions":if(Fe(i)){if(typeof s.dimensions<"u"&&(i.dimensions=s.dimensions),typeof s.updateStyle<"u"&&(i.style={...i.style||{},width:`${(l=s.dimensions)==null?void 0:l.width}px`,height:`${(u=s.dimensions)==null?void 0:u.height}px`}),typeof s.resizing<"u"&&(i.resizing=s.resizing),i.expandParent&&i.parentNode){const c=t[o.indexOf(i.parentNode)];c&&Fe(c)&&(c.initialized?mn(i,c):a.nextTick(()=>{mn(i,c)}))}i.initialized||(i.initialized=!0)}break}}),t}function _s(e,t){return mt(e,t)}function Es(e,t){return mt(e,t)}function $e(e,t){return{id:e,type:"select",selected:t}}function Vo(e){return{item:e,type:"add"}}function vn(e){return{id:e,type:"remove"}}function yn(e,t){return e.reduce((n,o)=>{let i=t.includes(o.id);le(o.selectable)&&!o.selectable&&(i=!1);const r=Fe(o)?"changedNodes":"changedEdges";return!o.selected&&i?n[r].push($e(o.id,!0)):o.selected&&!i&&n[r].push($e(o.id,!1)),n},{changedNodes:[],changedEdges:[]})}function L(e=()=>{}){const t=a.ref(new Set);e&&t.value.add(e);const n=r=>{t.value.delete(r)};return{on:r=>{t.value.has(e)&&t.value.delete(e),t.value.add(r);const l=()=>n(r);return xt(l),{off:l}},off:n,trigger:r=>Promise.all(Array.from(t.value).map(l=>l(r))),fns:t}}function Ho(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function bs(e,t,n,o,i){return e.filter(r=>(r.selected||r.id===i)&&(!r.parentNode||!Vi(r,o))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>{var l,u;return a.markRaw({id:r.id,position:r.position||{x:0,y:0},distance:{x:n.x-((l=r.computedPosition)==null?void 0:l.x)||0,y:n.y-((u=r.computedPosition)==null?void 0:u.y)||0},from:r.computedPosition,extent:r.extent,parentNode:r.parentNode,dimensions:r.dimensions})})}function xn({id:e,dragItems:t,findNode:n}){const o=t.reduce((i,r)=>{const l=n(r.id);return l&&i.push(l),i},[]);return[e?o.find(i=>i.id===e):o[0],o]}function Li(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function Ss(e,t,n){const[o,i,r,l]=typeof e!="string"?Li(e.padding):[0,0,0,0];return n&&Be(n.computedPosition.x)&&Be(n.computedPosition.y)&&Be(n.dimensions.width)&&Be(n.dimensions.height)?[[n.computedPosition.x+l,n.computedPosition.y+o],[n.computedPosition.x+(n.dimensions.width-t.dimensions.width)-i,n.computedPosition.y+(n.dimensions.height-t.dimensions.height)-r]]:!1}function Ns(e,t,n,o){let i=e.extent||n;if(i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const r=Ss(i,e,o);r&&(i=r)}else t(new fe(ce.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const r=(o==null?void 0:o.computedPosition.x)||0,l=(o==null?void 0:o.computedPosition.y)||0;i=[[i[0][0]+r,i[0][1]+l],[i[1][0]+r,i[1][1]+l]]}else if(i!=null&&i.range&&Array.isArray(i.range)){const[r,l,u,s]=Li(i.padding),c=(o==null?void 0:o.computedPosition.x)||0,d=(o==null?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+c+s,i.range[0][1]+d+r],[i.range[1][0]+c-l,i.range[1][1]+d-u]]}return i}function Qn(e,t,n,o,i){const r=Ns(e,n,o,i),l=Wn(t,r);return{position:{x:l.x-((i==null?void 0:i.computedPosition.x)||0),y:l.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:l}}function Lo(e,t,n){const o=((n==null?void 0:n.x)??0)+t.x,i=((n==null?void 0:n.y)??0)+t.y,r=(n==null?void 0:n.width)??t.width,l=(n==null?void 0:n.height)??t.height;switch(e){case j.Top:return{x:o+r/2,y:i};case j.Right:return{x:o+r,y:i+l/2};case j.Bottom:return{x:o+r/2,y:i+l};case j.Left:return{x:o,y:i+l/2}}}function Fo(e=[],t){return e.length?!t||e.length===1?e[0]:t&&e.find(n=>n.id===t)||null:null}function ks(e,t,n,o,i,r){const l=Lo(n,{...e.dimensions,...e.computedPosition},t),u=Lo(r,{...o.dimensions,...o.computedPosition},i);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y}}function Cs({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:r,width:l,height:u,viewport:s}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+r)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d=Yt({x:(0-s.x)/s.zoom,y:(0-s.y)/s.zoom,width:l/s.zoom,height:u/s.zoom}),h=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),p=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y));return Math.ceil(h*p)>0}function Ms(e,t,n=!1){const o=Be(e.zIndex);let i=o?e.zIndex:0;const r=t(e.source),l=t(e.target);return!r||!l?0:(n&&(i=o?e.zIndex:Math.max(r.computedPosition.z||0,l.computedPosition.z||0)),i)}var ce=(e=>(e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e))(ce||{});const wn={MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`};class fe extends Error{constructor(t,...n){var o;super((o=wn[t])==null?void 0:o.call(wn,...n)),this.code=t}}function eo(e){return"clientX"in e}function Qe(e,t){var r,l;const n=eo(e),o=n?e.clientX:(r=e.touches)==null?void 0:r[0].clientX,i=n?e.clientY:(l=e.touches)==null?void 0:l[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}}function De(e){return typeof e=="string"}function nt(e){return typeof e=="function"}function $s(e){return typeof e=="boolean"}function Be(e){return typeof e=="number"}function Ts(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function _n(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function Go(e,t,n,o){return(t[n]||[]).reduce((i,r)=>{var l,u;return`${e.id}-${r.id}-${n}`!==o&&i.push({id:r.id||null,type:n,nodeId:e.id,x:(((l=e.computedPosition)==null?void 0:l.x)??0)+r.x+r.width/2,y:(((u=e.computedPosition)==null?void 0:u.y)??0)+r.y+r.height/2,width:r.width,height:r.height}),i},[])}function Bs(e,t,n,o){let i=[],r=1/0;return n.forEach(l=>{const u=Math.sqrt((l.x-e.x-l.width/2)**2+(l.y-e.y-l.height/2)**2);if(u<=t){const s=o(l);u<=r&&s.isValid&&(u<r?i=[{handle:l,validHandleResult:s}]:u===r&&i.push({handle:l,validHandleResult:s}),r=u)}}),i.length?i.length===1?i[0]:i.find(({handle:l})=>l.type==="target")||i[0]:{handle:null,validHandleResult:o(null)}}function Yo(e,t,n,o,i,r,l,u,s,c){const d=r==="target",h=u.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:p,y}=Qe(e),g=u.elementFromPoint(p,y),f=g!=null&&g.classList.contains("vue-flow__handle")?g:h,_=Ts();if(f){const v=Fi(void 0,f),b=f.getAttribute("data-nodeid"),C=f.getAttribute("data-handleid"),m=f.classList.contains("connectable"),k=f.classList.contains("connectableend"),x={source:d?b:o,sourceHandle:d?C:i,target:d?o:b,targetHandle:d?i:C};_.connection=x;const z=m&&k&&(n===Ae.Strict?d&&v==="source"||!d&&v==="target":b!==o||C!==i);_.endHandle={nodeId:b,handleId:C,type:v},z&&(_.isValid=l(x,{edges:s,sourceNode:c(x.source),targetNode:c(x.target)}))}return _}function Ps({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((i,r)=>{const{handleBounds:l}=r;let u=[],s=[];return l&&(u=Go(r,l,"source",`${t}-${n}-${o}`),s=Go(r,l,"target",`${t}-${n}-${o}`)),i.push(...u,...s),i},[])}function Fi(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Os(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const Is=["production","prod"];function vt(e,...t){Is.includes(process.env.NODE_ENV||"")||console.warn(`[Vue Flow]: ${e}`,...t)}function Xo(e,t,n){const o=t.querySelectorAll(`.vue-flow__handle${e}`);if(!o||!o.length)return;const i=Array.from(o),r=t.getBoundingClientRect();return i.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-r.left)/n,y:(u.top-r.top)/n,...jt(l)}})}function zn(e,t,n,o,i,r=!1,l){i.value=!1,e.selected?(r||e.selected&&t)&&(o([e]),a.nextTick(l.blur)):n([e])}function le(e){return typeof a.unref(e)<"u"}function Ds(e,t,n){if(!e.source||!e.target)return n(new fe(ce.EDGE_INVALID,e.id)),!1;let o;return _e(e)?o=e:o={...e,id:Jt(e)},o=Kn(o),qn(o,t)?!1:o}function As(e,t,n,o,i,r){if(!t.source||!t.target)return r(new fe(ce.EDGE_INVALID,e.id)),!1;const l=o(e.id);if(!l)return r(new fe(ce.EDGE_NOT_FOUND,e.id)),!1;const{id:u,...s}=e,c={...s,id:i?Jt(t):u,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(l),1,c),c}function Uo(e,t,n,o){const i={},r=e.reduce((u,s)=>{if(!Xe(s))return o(new fe(ce.NODE_INVALID)),u;const c=gs(s,{...n(s.id),parentNode:s.parentNode});return s.parentNode&&(i[s.parentNode]=!0),u.concat(c)},[]),l=[...r,...t];for(const u of r){const s=l.find(c=>c.id===u.parentNode);u.parentNode&&!s&&o(new fe(ce.NODE_MISSING_PARENT,u.id,u.parentNode)),(u.parentNode||i[u.id])&&(i[u.id]&&(u.isParent=!0),s&&(s.isParent=!0))}return r}function Gi(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodes:r,nodeExtent:l,viewport:u,autoPanOnNodeDrag:s,nodesDraggable:c,panBy:d,findNode:h,multiSelectionActive:p,nodesSelectionActive:y,selectNodesOnDrag:g,removeSelectedElements:f,addSelectedNodes:_,updateNodePositions:v,emits:b}=ue(),{onStart:C,onDrag:m,onStop:k,el:x,disabled:D,id:z,selectable:G,dragHandle:A}=e,J=a.ref(!1);let Z=[],ee,w=null,M={x:void 0,y:void 0},S={x:0,y:0},P=null,H=0,U=!1;const T=nr(),F=({x:W,y:te})=>{M={x:W,y:te};let $=!1;if(Z=Z.map(Y=>{const O={x:W-Y.distance.x,y:te-Y.distance.y};n.value&&(O.x=o.value[0]*Math.round(O.x/o.value[0]),O.y=o.value[1]*Math.round(O.y/o.value[1]));const{computedPosition:K}=Qn(Y,O,b.error,l.value,Y.parentNode?h(Y.parentNode):void 0);return $=$||Y.position.x!==K.x||Y.position.y!==K.y,Y.position=K,Y}),!!$&&(v(Z,!0,!0),J.value=!0,P)){const[Y,O]=xn({id:z,dragItems:Z,findNode:h});m({event:P,node:Y,nodes:O})}},B=()=>{if(!w)return;const[W,te]=Hi(S,w);if(W!==0||te!==0){const $={x:(M.x??0)-W/u.value.zoom,y:(M.y??0)-te/u.value.zoom};d({x:W,y:te})&&F($)}H=requestAnimationFrame(B)};return a.watch([()=>oe(D),x],([W,te])=>{if(te){const $=xe(te);W?$.on(".drag",null):(ee=_a().on("start",Y=>{var re;const O=h(z);!g.value&&!p.value&&O&&(O.selected||f()),O&&oe(G)&&g.value&&zn(O,p.value,_,f,y,!1,te);const K=T(Y);if(M=K,Z=bs(r.value,c.value,K,h,z),Z.length){const[se,de]=xn({id:z,dragItems:Z,findNode:h});C({event:Y.sourceEvent,node:se,nodes:de})}w=((re=t.value)==null?void 0:re.getBoundingClientRect())||null,S=Qe(Y.sourceEvent,w)}).on("drag",Y=>{const O=T(Y);!U&&s.value&&(U=!0,B()),(M.x!==O.xSnapped||M.y!==O.ySnapped)&&Z.length&&(P=Y.sourceEvent,S=Qe(Y.sourceEvent,w),F(O))}).on("end",Y=>{if(J.value=!1,U=!1,cancelAnimationFrame(H),Z.length){v(Z,!1,!1);const[O,K]=xn({id:z,dragItems:Z,findNode:h});k({event:Y.sourceEvent,node:O,nodes:K})}}).filter(Y=>{const O=Y.target,K=oe(A);return!Y.button&&(!i.value||!Ho(O,`.${i.value}`,te)&&(!K||Ho(O,K,te)))}),$.call(ee))}}),J}function zs(){return{edgesChange:L(),nodesChange:L(),nodeDoubleClick:L(),nodeClick:L(),nodeMouseEnter:L(),nodeMouseMove:L(),nodeMouseLeave:L(),nodeContextMenu:L(),nodeDragStart:L(),nodeDrag:L(),nodeDragStop:L(),nodesInitialized:L(),miniMapNodeClick:L(),miniMapNodeDoubleClick:L(),miniMapNodeMouseEnter:L(),miniMapNodeMouseMove:L(),miniMapNodeMouseLeave:L(),connect:L(),connectStart:L(),connectEnd:L(),clickConnectStart:L(),clickConnectEnd:L(),paneReady:L(),move:L(),moveStart:L(),moveEnd:L(),selectionDragStart:L(),selectionDrag:L(),selectionDragStop:L(),selectionContextMenu:L(),selectionStart:L(),selectionEnd:L(),viewportChangeStart:L(),viewportChange:L(),viewportChangeEnd:L(),paneScroll:L(),paneClick:L(),paneContextMenu:L(),paneMouseEnter:L(),paneMouseMove:L(),paneMouseLeave:L(),edgeContextMenu:L(),edgeMouseEnter:L(),edgeMouseMove:L(),edgeMouseLeave:L(),edgeDoubleClick:L(),edgeClick:L(),edgeUpdateStart:L(),edgeUpdate:L(),edgeUpdateEnd:L(),updateNodeInternals:L(),error:L(e=>vt(e.message))}}function Rs(e,t){a.onBeforeMount(()=>{for(const[n,o]of Object.entries(t.value)){const i=r=>{e(n,r)};o.on(i),xt(()=>{o.off(i)})}})}function Vs(e,t){const n={};for(const o in e)t.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>e[o]});return n}const Hs=["data-id","data-handleid","data-nodeid","data-handlepos"],Ls={name:"Handle",compatConfig:{MODE:3}},yt=a.defineComponent({...Ls,props:{id:null,type:null,position:{default:j.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e){const t=Vs(e,["position","connectable","connectableStart","connectableEnd","id"]),n=Dt(t,"type","source"),o=Dt(t,"isValidConnection",void 0),{connectionStartHandle:i,connectionClickStartHandle:r,connectionEndHandle:l,vueFlowRef:u,nodesConnectable:s,noDragClassName:c,noPanClassName:d}=ue(),{id:h,node:p,nodeEl:y,connectedEdges:g}=or(),f=a.ref(),_=a.computed(()=>e.id??`${h}__handle-${e.position}`),v=a.computed(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),b=a.computed(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),{handlePointerDown:C,handleClick:m}=uo({nodeId:h,handleId:_,isValidConnection:o,type:n}),k=a.computed(()=>De(e.connectable)&&e.connectable==="single"?!g.value.some(A=>{const J=A[`${n.value}Handle`];return A[n.value]!==h?!1:J?J===_.value:!0}):nt(e.connectable)?e.connectable(p,g.value):le(e.connectable)?e.connectable:s.value),x=a.computed(()=>{var A,J,Z,ee,w,M;return((A=i.value)==null?void 0:A.nodeId)===h&&((J=i.value)==null?void 0:J.handleId)===_.value&&((Z=i.value)==null?void 0:Z.type)===n.value||((ee=l.value)==null?void 0:ee.nodeId)===h&&((w=l.value)==null?void 0:w.handleId)===_.value&&((M=l.value)==null?void 0:M.type)===n.value}),D=a.computed(()=>{var A,J,Z;return((A=r.value)==null?void 0:A.nodeId)===h&&((J=r.value)==null?void 0:J.handleId)===_.value&&((Z=r.value)==null?void 0:Z.type)===n.value});me(()=>p.initialized).toBe(!0,{flush:"post"}).then(()=>{var P;const A=(P=p.handleBounds[n.value])==null?void 0:P.find(H=>H.id===_.value);if(!u.value||A)return;const J=u.value.querySelector(".vue-flow__transformationpane");if(!y||!f.value||!J||!_.value)return;const Z=y.value.getBoundingClientRect(),ee=f.value.getBoundingClientRect(),w=window.getComputedStyle(J),{m22:M}=new window.DOMMatrixReadOnly(w.transform),S={id:_.value,position:e.position,x:(ee.left-Z.left)/M,y:(ee.top-Z.top)/M,...jt(f.value)};p.handleBounds[n.value]=[...p.handleBounds[n.value]??[],S]});function z(A){const J=eo(A);k.value&&v.value&&(J&&A.button===0||!J)&&C(A)}function G(A){!h||!r.value&&!v.value||k.value&&m(A)}return(A,J)=>(a.openBlock(),a.createElementBlock("div",{ref_key:"handle",ref:f,"data-id":`${a.unref(h)}-${a.unref(_)}-${a.unref(n)}`,"data-handleid":a.unref(_),"data-nodeid":a.unref(h),"data-handlepos":e.position,class:a.normalizeClass(["vue-flow__handle",[`vue-flow__handle-${e.position}`,`vue-flow__handle-${a.unref(_)}`,a.unref(c),a.unref(d),a.unref(n),{connectable:a.unref(k),connecting:a.unref(D),connectablestart:a.unref(v),connectableend:a.unref(b),connectionindicator:a.unref(k)&&(a.unref(v)&&!a.unref(x)||a.unref(b)&&a.unref(x))}]]),onMousedown:z,onTouchstartPassive:z,onClick:G},[a.renderSlot(A.$slots,"default",{id:e.id})],42,Hs))}}),tn=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:r}){return[a.h(yt,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof n!="string"&&n?a.h(n):a.h("div",{innerHTML:n}),a.h(yt,{type:"source",position:e,connectable:o,isValidConnection:r})]};tn.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"];tn.inheritAttrs=!1;tn.compatConfig={MODE:3};const Fs=tn,nn=function({sourcePosition:e=j.Bottom,label:t,connectable:n=!0,isValidSourcePos:o}){return[typeof t!="string"&&t?a.h(t):a.h("div",{innerHTML:t}),a.h(yt,{type:"source",position:e,connectable:n,isValidConnection:o})]};nn.props=["sourcePosition","label","isValidSourcePos","connectable"];nn.inheritAttrs=!1;nn.compatConfig={MODE:3};const Gs=nn,on=function({targetPosition:e=j.Top,label:t,connectable:n=!0,isValidTargetPos:o}){return[a.h(yt,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof t!="string"&&t?a.h(t):a.h("div",{innerHTML:t})]};on.props=["targetPosition","label","isValidTargetPos","connectable"];on.inheritAttrs=!1;on.compatConfig={MODE:3};const Ys=on,Rn=Symbol("vueFlow"),to=Symbol("nodeId"),Yi=Symbol("nodeRef"),Xi=Symbol("edgeId"),Ui=Symbol("edgeRef"),rn=Symbol("slots"),Xs=a.defineComponent({name:"Node",compatConfig:{MODE:3},props:["name","type","id","draggable","selectable","focusable","connectable","node","resizeObserver"],setup(e){a.provide(to,e.id);const{id:t,edges:n,noPanClassName:o,selectNodesOnDrag:i,nodesSelectionActive:r,multiSelectionActive:l,emits:u,findNode:s,removeSelectedNodes:c,addSelectedNodes:d,updateNodeDimensions:h,onUpdateNodeInternals:p,getIntersectingNodes:y,getNodeTypes:g,nodeExtent:f,elevateNodesOnSelect:_,disableKeyboardA11y:v,ariaLiveMessage:b,snapToGrid:C,snapGrid:m}=ue(),k=ir(),x=at(e,"node"),D=a.computed(()=>s(x.value.parentNode)),z=a.computed(()=>Et([x.value],n.value)),G=a.ref();a.provide(Yi,G);const{emit:A,on:J}=Sc(x.value,u),Z=Gi({id:e.id,el:G,disabled:()=>!e.draggable,selectable:()=>e.selectable,dragHandle:()=>x.value.dragHandle,onStart($){A.dragStart({...$,intersections:y(x.value)})},onDrag($){A.drag({...$,intersections:y(x.value)})},onStop($){A.dragStop({...$,intersections:y(x.value)})}}),ee=a.computed(()=>x.value.class instanceof Function?x.value.class(x.value):x.value.class),w=a.computed(()=>{const $=(x.value.style instanceof Function?x.value.style(x.value):x.value.style)||{},Y=x.value.width instanceof Function?x.value.width(x.value):x.value.width,O=x.value.height instanceof Function?x.value.height(x.value):x.value.height;return Y&&($.width=typeof Y=="string"?Y:`${Y}px`),O&&($.height=typeof O=="string"?O:`${O}px`),$}),M=()=>Number(x.value.zIndex??w.value.zIndex??0);return p($=>{$.includes(e.id)&&P()}),a.onMounted(()=>{e.resizeObserver.observe(G.value)}),a.onBeforeUnmount(()=>{e.resizeObserver.unobserve(G.value)}),a.watch([()=>x.value.type,()=>x.value.sourcePosition,()=>x.value.targetPosition],()=>{h([{id:e.id,nodeElement:G.value,forceUpdate:!0}])},{flush:"pre"}),a.watch([()=>x.value.position.x,()=>x.value.position.y,()=>{var $;return($=D.value)==null?void 0:$.computedPosition.x},()=>{var $;return($=D.value)==null?void 0:$.computedPosition.y},()=>{var $;return($=D.value)==null?void 0:$.computedPosition.z},()=>M(),()=>x.value.selected,()=>x.value.dimensions.height,()=>x.value.dimensions.width,()=>{var $;return($=D.value)==null?void 0:$.dimensions.height},()=>{var $;return($=D.value)==null?void 0:$.dimensions.width}],([$,Y,O,K,re,se])=>{const de={x:$,y:Y,z:se+(_.value&&x.value.selected?1e3:0)};Be(O)&&Be(K)?x.value.computedPosition=ws({x:O,y:K,z:re},de):x.value.computedPosition=de},{flush:"pre",immediate:!0}),a.watch([()=>x.value.extent,f],([$,Y],[O,K])=>{($!==O||Y!==K)&&S()}),x.value.extent==="parent"||typeof x.value.extent=="object"&&"range"in x.value.extent&&x.value.extent.range==="parent"?me(()=>x.value.initialized).toBe(!0).then(S):S(),()=>a.h("div",{ref:G,"data-id":x.value.id,class:["vue-flow__node",`vue-flow__node-${e.type===!1?"default":e.name}`,{[o.value]:e.draggable,dragging:Z==null?void 0:Z.value,selected:x.value.selected,selectable:e.selectable,parent:x.value.isParent},ee.value],style:{zIndex:x.value.computedPosition.z??M(),transform:`translate(${x.value.computedPosition.x}px,${x.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",visibility:x.value.initialized?"visible":"hidden",...w.value},tabIndex:e.focusable?0:void 0,role:e.focusable?"button":void 0,"aria-describedby":v.value?void 0:`${Pi}-${t}`,"aria-label":x.value.ariaLabel,onMouseenter:H,onMousemove:U,onMouseleave:T,onContextmenu:F,onClick:W,onDblclick:B,onKeydown:te},[a.h(e.type===!1?g.value.default:e.type,{id:x.value.id,type:x.value.type,data:x.value.data,events:{...x.value.events,...J},selected:!!x.value.selected,resizing:!!x.value.resizing,dragging:Z.value,connectable:e.connectable,position:x.value.position,dimensions:x.value.dimensions,isValidTargetPos:x.value.isValidTargetPos,isValidSourcePos:x.value.isValidSourcePos,parent:x.value.parentNode,zIndex:x.value.computedPosition.z,targetPosition:x.value.targetPosition,sourcePosition:x.value.sourcePosition,label:x.value.label,dragHandle:x.value.dragHandle,onUpdateNodeInternals:P})]);function S(){const $=x.value.computedPosition;C.value&&($.x=m.value[0]*Math.round($.x/m.value[0]),$.y=m.value[1]*Math.round($.y/m.value[1]));const{computedPosition:Y,position:O}=Qn(x.value,$,u.error,f.value,D.value);(x.value.computedPosition.x!==Y.x||x.value.computedPosition.y!==Y.y)&&(x.value.computedPosition={...x.value.computedPosition,...Y}),(x.value.position.x!==O.x||x.value.position.y!==O.y)&&(x.value.position=O)}function P(){G.value&&h([{id:e.id,nodeElement:G.value,forceUpdate:!0}])}function H($){Z!=null&&Z.value||A.mouseEnter({event:$,node:x.value,connectedEdges:z.value})}function U($){Z!=null&&Z.value||A.mouseMove({event:$,node:x.value,connectedEdges:z.value})}function T($){Z!=null&&Z.value||A.mouseLeave({event:$,node:x.value,connectedEdges:z.value})}function F($){return A.contextMenu({event:$,node:x.value,connectedEdges:z.value})}function B($){return A.doubleClick({event:$,node:x.value,connectedEdges:z.value})}function W($){e.selectable&&(!i.value||!e.draggable)&&zn(x.value,l.value,d,c,r,!1,G.value),A.click({event:$,node:x.value,connectedEdges:z.value})}function te($){if(!Vn($))if(Ii.includes($.key)&&e.selectable){const Y=$.key==="Escape";zn(x.value,l.value,d,c,r,Y,G.value)}else!v.value&&e.draggable&&x.value.selected&&Je[$.key]&&(b.value=`Moved selected node ${$.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~x.value.position.x}, y: ${~~x.value.position.y}`,k({x:Je[$.key].x,y:Je[$.key].y},$.shiftKey))}}}),Us=Xs,Zs=["transform"],Ws=["width","height","x","y","rx","ry"],Ks=["y"],qs={name:"EdgeText",compatConfig:{MODE:3}},Zi=a.defineComponent({...qs,props:{"aria-activedescendant":null,"aria-atomic":{type:[Boolean,String]},"aria-autocomplete":null,"aria-busy":{type:[Boolean,String]},"aria-checked":{type:[Boolean,String]},"aria-colcount":null,"aria-colindex":null,"aria-colspan":null,"aria-controls":null,"aria-current":{type:[Boolean,String]},"aria-describedby":null,"aria-details":null,"aria-disabled":{type:[Boolean,String]},"aria-dropeffect":null,"aria-errormessage":null,"aria-expanded":{type:[Boolean,String]},"aria-flowto":null,"aria-grabbed":{type:[Boolean,String]},"aria-haspopup":{type:[Boolean,String]},"aria-hidden":{type:[Boolean,String]},"aria-invalid":{type:[Boolean,String]},"aria-keyshortcuts":null,"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":null,"aria-modal":{type:[Boolean,String]},"aria-multiline":{type:[Boolean,String]},"aria-multiselectable":{type:[Boolean,String]},"aria-orientation":null,"aria-owns":null,"aria-placeholder":null,"aria-posinset":null,"aria-pressed":{type:[Boolean,String]},"aria-readonly":{type:[Boolean,String]},"aria-relevant":null,"aria-required":{type:[Boolean,String]},"aria-roledescription":null,"aria-rowcount":null,"aria-rowindex":null,"aria-rowspan":null,"aria-selected":{type:[Boolean,String]},"aria-setsize":null,"aria-sort":null,"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null,innerHTML:null,class:null,style:null,color:null,height:null,id:null,lang:null,max:null,media:null,method:null,min:null,name:null,target:null,type:null,width:null,role:null,tabindex:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,allowReorder:null,alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,attributeName:null,attributeType:null,autoReverse:null,azimuth:null,baseFrequency:null,"baseline-shift":null,baseProfile:null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,clip:null,"clip-path":null,clipPathUnits:null,"clip-rule":null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,contentScriptType:null,contentStyleType:null,cursor:null,cx:null,cy:null,d:null,decelerate:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,elevation:null,"enable-background":null,end:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,focusable:null,"font-family":null,"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,hanging:null,"horiz-adv-x":null,"horiz-origin-x":null,href:null,ideographic:null,"image-rendering":null,in2:null,in:null,intercept:null,k1:null,k2:null,k3:null,k4:null,k:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,markerHeight:null,"marker-mid":null,"marker-start":null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,mode:null,numOctaves:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,"overline-position":null,"overline-thickness":null,"paint-order":null,"panose-1":null,pathLength:null,patternContentUnits:null,patternTransform:null,patternUnits:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,r:null,radius:null,refX:null,refY:null,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,spacing:null,specularConstant:null,specularExponent:null,speed:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,"stroke-opacity":null,"stroke-width":null,surfaceScale:null,systemLanguage:null,tableValues:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,textLength:null,"text-rendering":null,to:null,transform:null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,"unicode-bidi":null,"unicode-range":null,"unitsPer-em":null,"v-alphabetic":null,values:null,"vector-effect":null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,"v-hanging":null,"v-ideographic":null,viewBox:null,viewTarget:null,visibility:null,"v-mathematical":null,widths:null,"word-spacing":null,"writing-mode":null,x1:null,x2:null,x:null,xChannelSelector:null,"x-height":null,xlinkActuate:null,xlinkArcrole:null,xlinkHref:null,xlinkRole:null,xlinkShow:null,xlinkTitle:null,xlinkType:null,xmlns:null,y1:null,y2:null,y:null,yChannelSelector:null,z:null,zoomAndPan:null,label:null,labelStyle:{default:{}},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:{}},labelBgPadding:{default:[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=a.ref({x:0,y:0,width:0,height:0}),n=a.ref(null),o=a.computed(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);a.onMounted(i),a.watch([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const r=n.value.getBBox();(r.width!==t.value.width||r.height!==t.value.height)&&(t.value=r)}return(r,l)=>(a.openBlock(),a.createElementBlock("g",{transform:a.unref(o),class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(a.openBlock(),a.createElementBlock("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*e.labelBgPadding[0]}px`,height:`${t.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:a.normalizeStyle(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,Ws)):a.createCommentVNode("",!0),a.createElementVNode("text",a.mergeProps(r.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:e.labelStyle}),[a.renderSlot(r.$slots,"default",{},()=>[a.unref(De)(e.label)?(a.openBlock(),a.createElementBlock(a.Fragment,{key:1},[a.createTextVNode(a.toDisplayString(e.label),1)],64)):(a.openBlock(),a.createBlock(a.resolveDynamicComponent(e.label),{key:0}))])],16,Ks)],8,Zs))}}),ln=function({id:e,path:t,label:n,labelX:o,labelY:i,labelBgBorderRadius:r,labelBgPadding:l,labelBgStyle:u,labelShowBg:s=!0,labelStyle:c,markerStart:d,markerEnd:h,interactionWidth:p=20},{attrs:y}){return[a.h("path",{id:e,style:y.style,class:["vue-flow__edge-path",y.class].join(" "),d:t,"marker-end":h,"marker-start":d}),p?a.h("path",{d:t,fill:"none","stroke-opacity":0,"stroke-width":p,class:"vue-flow__edge-interaction"}):null,n&&Be(o)&&Be(i)?a.h(Zi,{x:o,y:i,label:n,labelStyle:c,labelShowBg:s,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:r}):null]};ln.props=["id","path","labelX","labelY","label","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelShowBg","labelStyle","markerStart","markerEnd","interactionWidth"];ln.inheritAttrs=!1;ln.compatConfig={MODE:3};const bt=ln;function no({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,r=n<e?n+i:n-i,l=Math.abs(o-t)/2,u=o<t?o+l:o-l;return[r,u,i,l]}function oo({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:r,targetControlX:l,targetControlY:u}){const s=e*.125+i*.375+l*.375+n*.125,c=t*.125+r*.375+u*.375+o*.125,d=Math.abs(s-e),h=Math.abs(c-t);return[s,c,d,h]}function $t(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Zo({pos:e,x1:t,y1:n,x2:o,y2:i,c:r}){let l,u;switch(e){case j.Left:l=t-$t(t-o,r),u=n;break;case j.Right:l=t+$t(o-t,r),u=n;break;case j.Top:l=t,u=n-$t(n-i,r);break;case j.Bottom:l=t,u=n+$t(i-n,r);break}return[l,u]}function io({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:i,targetPosition:r=j.Top,curvature:l=.25}){const[u,s]=Zo({pos:n,x1:e,y1:t,x2:o,y2:i,c:l}),[c,d]=Zo({pos:r,x1:o,y1:i,x2:e,y2:t,c:l}),[h,p,y,g]=oo({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:u,sourceControlY:s,targetControlX:c,targetControlY:d});return[`M${e},${t} C${u},${s} ${c},${d} ${o},${i}`,h,p,y,g]}function Wo({pos:e,x1:t,y1:n,x2:o,y2:i}){let r,l;switch(e){case j.Left:case j.Right:r=.5*(t+o),l=n;break;case j.Top:case j.Bottom:r=t,l=.5*(n+i);break}return[r,l]}function ro({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:i,targetPosition:r=j.Top}){const[l,u]=Wo({pos:n,x1:e,y1:t,x2:o,y2:i}),[s,c]=Wo({pos:r,x1:o,y1:i,x2:e,y2:t}),[d,h,p,y]=oo({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:s,targetControlY:c});return[`M${e},${t} C${l},${u} ${s},${c} ${o},${i}`,d,h,p,y]}const Ko={[j.Left]:{x:-1,y:0},[j.Right]:{x:1,y:0},[j.Top]:{x:0,y:-1},[j.Bottom]:{x:0,y:1}};function js({source:e,sourcePosition:t=j.Bottom,target:n}){return t===j.Left||t===j.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function qo(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function Js({source:e,sourcePosition:t=j.Bottom,target:n,targetPosition:o=j.Top,center:i,offset:r}){const l=Ko[t],u=Ko[o],s={x:e.x+l.x*r,y:e.y+l.y*r},c={x:n.x+u.x*r,y:n.y+u.y*r},d=js({source:s,sourcePosition:t,target:c}),h=d.x!==0?"x":"y",p=d[h];let y,g,f;const[_,v,b,C]=no({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[h]*u[h]===-1){g=i.x||_,f=i.y||v;const k=[{x:g,y:s.y},{x:g,y:c.y}],x=[{x:s.x,y:f},{x:c.x,y:f}];l[h]===p?y=h==="x"?k:x:y=h==="x"?x:k}else{const k=[{x:s.x,y:c.y}],x=[{x:c.x,y:s.y}];if(h==="x"?y=l.x===p?x:k:y=l.y===p?k:x,t!==o){const D=h==="x"?"y":"x",z=l[h]===u[D],G=s[D]>c[D],A=s[D]<c[D];(l[h]===1&&(!z&&G||z&&A)||l[h]!==1&&(!z&&A||z&&G))&&(y=h==="x"?k:x)}g=y[0].x,f=y[0].y}return[[e,s,...y,c,n],g,f,b,C]}function Qs(e,t,n,o){const i=Math.min(qo(e,t)/2,qo(t,n)/2,o),{x:r,y:l}=t;if(e.x===r&&r===n.x||e.y===l&&l===n.y)return`L${r} ${l}`;if(e.y===l){const c=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${r+i*c},${l}Q ${r},${l} ${r},${l+i*d}`}const u=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${r},${l+i*s}Q ${r},${l} ${r+i*u},${l}`}function Xt({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:i,targetPosition:r=j.Top,borderRadius:l=5,centerX:u,centerY:s,offset:c=20}){const[d,h,p,y,g]=Js({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:i},targetPosition:r,center:{x:u,y:s},offset:c});return[d.reduce((_,v,b)=>{let C;return b>0&&b<d.length-1?C=Qs(d[b-1],v,d[b+1],l):C=`${b===0?"M":"L"}${v.x} ${v.y}`,_+=C,_},""),h,p,y,g]}function Wi({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[i,r,l,u]=no({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,i,r,l,u]}const an=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,...n},{attrs:o}){const[i,r,l]=io({sourcePosition:e,targetPosition:t,...n});return a.h(bt,{path:i,labelX:r,labelY:l,...n,...o})};an.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"];an.inheritAttrs=!1;an.compatConfig={MODE:3};const Ki=an,un=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,...n},{attrs:o}){const[i,r,l]=ro({sourcePosition:e,targetPosition:t,...n});return a.h(bt,{path:i,labelX:r,labelY:l,...n,...o})};un.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"];un.inheritAttrs=!1;un.compatConfig={MODE:3};const qi=un,sn=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,...n},{attrs:o}){const[i,r,l]=Xt({sourcePosition:e,targetPosition:t,...n});return a.h(bt,{path:i,labelX:r,labelY:l,...n,...o})};sn.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"];sn.inheritAttrs=!1;sn.compatConfig={MODE:3};const lo=sn,cn=function(e,{attrs:t}){return a.h(lo,{...e,...t,borderRadius:0})};cn.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"];cn.inheritAttrs=!1;cn.compatConfig={MODE:3};const ji=cn,dn=function(e,{attrs:t}){const[n,o,i]=Wi(e);return a.h(bt,{path:n,labelX:o,labelY:i,...e,...t})};dn.props=["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"];dn.inheritAttrs=!1;dn.compatConfig={MODE:3};const Ji=dn;function ec(e,t,n){return n===j.Left?e-t:n===j.Right?e+t:e}function tc(e,t,n){return n===j.Top?e-t:n===j.Bottom?e+t:e}const ao=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=j.Top,type:i}){return a.h("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:ec(t,e,o),cy:tc(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};ao.props=["radius","centerX","centerY","position","type"];ao.compatConfig={MODE:3};const jo=ao,nc=a.defineComponent({name:"Edge",compatConfig:{MODE:3},props:["name","type","id","updatable","selectable","focusable","edge"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:r,nodesSelectionActive:l,noPanClassName:u,getEdgeTypes:s,removeSelectedEdges:c,findEdge:d,findNode:h,isValidConnection:p}=ue(),y=wc(e.edge,r),g=at(e,"edge"),f=a.ref(!1),_=a.ref(!1),v=a.ref(""),b=a.ref(null),C=a.ref("source"),m=a.ref();a.provide(Xi,e.id),a.provide(Ui,m);const k=a.computed(()=>g.value.class instanceof Function?g.value.class(g.value):g.value.class),x=a.computed(()=>g.value.style instanceof Function?g.value.style(g.value):g.value.style),{handlePointerDown:D}=uo({nodeId:v,handleId:b,type:C,isValidConnection:p,edgeUpdaterType:C,onEdgeUpdate:A,onEdgeUpdateEnd:J});return()=>{const B=h(g.value.source),W=h(g.value.target);if(!B||!W||!g.value||B.hidden||W.hidden)return null;let te;o.value===Ae.Strict?te=B.handleBounds.source:te=[...B.handleBounds.source||[],...B.handleBounds.target||[]];const $=Fo(te,g.value.sourceHandle);let Y;o.value===Ae.Strict?Y=W.handleBounds.target:Y=[...W.handleBounds.target||[],...W.handleBounds.source||[]];const O=Fo(Y,g.value.targetHandle),K=$?$.position:j.Bottom,re=O?O.position:j.Top,{sourceX:se,sourceY:de,targetY:ke,targetX:Ce}=ks(B,$,K,W,O,re);return g.value.sourceX=se,g.value.sourceY=de,g.value.targetX=Ce,g.value.targetY=ke,a.h("g",{ref:m,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.type===!1?"default":e.name}`,u.value,k.value,{updating:f.value,selected:g.value.selected,animated:g.value.animated,inactive:!e.selectable}],onClick:ee,onContextmenu:w,onDblclick:M,onMouseenter:S,onMousemove:P,onMouseleave:H,onKeyDown:e.focusable?F:void 0,tabIndex:e.focusable?0:void 0,"aria-label":g.value.ariaLabel===null?void 0:g.value.ariaLabel||`Edge from ${g.value.source} to ${g.value.target}`,"aria-describedby":e.focusable?`${Oi}-${t}`:void 0,role:e.focusable?"button":void 0},[_.value?null:a.h(e.type===!1?s.value.default:e.type,{id:e.id,sourceNode:B,targetNode:W,source:g.value.source,target:g.value.target,type:g.value.type,updatable:e.updatable,selected:g.value.selected,animated:g.value.animated,label:g.value.label,labelStyle:g.value.labelStyle,labelShowBg:g.value.labelShowBg,labelBgStyle:g.value.labelBgStyle,labelBgPadding:g.value.labelBgPadding,labelBgBorderRadius:g.value.labelBgBorderRadius,data:g.value.data,events:{...g.value.events,...y.on},style:x.value,markerStart:`url(#${Ie(g.value.markerStart,t)})`,markerEnd:`url(#${Ie(g.value.markerEnd,t)})`,sourcePosition:K,targetPosition:re,sourceX:se,sourceY:de,targetX:Ce,targetY:ke,sourceHandleId:g.value.sourceHandle,targetHandleId:g.value.targetHandle,interactionWidth:g.value.interactionWidth}),[e.updatable==="source"||e.updatable===!0?[a.h("g",{onMousedown:U,onMouseenter:z,onMouseout:G},a.h(jo,{position:K,centerX:se,centerY:de,radius:i.value,type:"source","data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[a.h("g",{onMousedown:T,onMouseenter:z,onMouseout:G},a.h(jo,{position:re,centerX:Ce,centerY:ke,radius:i.value,type:"target","data-type":"target"}))]:null]])};function z(){f.value=!0}function G(){f.value=!1}function A(B,W){y.emit.update({event:B,edge:g.value,connection:W})}function J(B){y.emit.updateEnd({event:B,edge:g.value}),_.value=!1}function Z(B,W){B.button===0&&(_.value=!0,v.value=W?g.value.target:g.value.source,b.value=(W?g.value.targetHandle:g.value.sourceHandle)??"",C.value=W?"target":"source",y.emit.updateStart({event:B,edge:g.value}),D(B))}function ee(B){const W={event:B,edge:g.value};e.selectable&&(l.value=!1,n([g.value])),y.emit.click(W)}function w(B){y.emit.contextMenu({event:B,edge:g.value})}function M(B){y.emit.doubleClick({event:B,edge:g.value})}function S(B){y.emit.mouseEnter({event:B,edge:g.value})}function P(B){y.emit.mouseMove({event:B,edge:g.value})}function H(B){y.emit.mouseLeave({event:B,edge:g.value})}function U(B){Z(B,!0)}function T(B){Z(B,!1)}function F(B){var W;Ii.includes(B.key)&&e.selectable&&(B.key==="Escape"?((W=m.value)==null||W.blur(),c([d(e.id)])):n([d(e.id)]))}}}),oc=nc,ic={height:"0",width:"0"},rc={name:"EdgeLabelRenderer",compatConfig:{MODE:3}},lc=a.defineComponent({...rc,setup(e){const{viewportRef:t}=ue(),n=Dt(()=>t.value.getElementsByClassName("vue-flow__edge-labels")[0]);return(o,i)=>(a.openBlock(),a.createElementBlock("svg",null,[(a.openBlock(),a.createElementBlock("foreignObject",ic,[(a.openBlock(),a.createBlock(a.Teleport,{to:a.unref(n),disabled:!a.unref(n)},[a.renderSlot(o.$slots,"default")],8,["to","disabled"]))]))]))}}),ac={[j.Left]:j.Right,[j.Right]:j.Left,[j.Top]:j.Bottom,[j.Bottom]:j.Top},uc=a.defineComponent({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var h;const{connectionMode:e,connectionStartHandle:t,connectionEndHandle:n,connectionPosition:o,connectionLineType:i,connectionLineStyle:r,connectionLineOptions:l,connectionStatus:u,viewport:s,findNode:c}=ue(),d=(h=a.inject(rn))==null?void 0:h["connection-line"];return()=>{var M,S,P,H,U,T;if(!t.value)return null;const p=c(t.value.nodeId);if(!p)return null;const y=t.value.handleId,g=t.value.type,f=((M=n.value)==null?void 0:M.handleId)&&c(n.value.nodeId)||null,_=(o.value.x-s.value.x)/s.value.zoom,v=(o.value.y-s.value.y)/s.value.zoom,b=p.handleBounds;let C=b==null?void 0:b[g];if(e.value===Ae.Loose&&(C=C||(b==null?void 0:b[g==="source"?"target":"source"])),!C)return null;const m=y?C.find(F=>F.id===y):C[0],k=m?m.x+m.width/2:(p.dimensions.width??0)/2,x=m?m.y+m.height/2:p.dimensions.height??0,D=(((S=p.computedPosition)==null?void 0:S.x)??0)+k,z=(((P=p.computedPosition)==null?void 0:P.y)??0)+x,G=m==null?void 0:m.position,A=f&&((H=n.value)==null?void 0:H.handleId)&&((e.value===Ae.Strict?(U=f.handleBounds[g==="source"?"target":"source"])==null?void 0:U.find(F=>{var B;return F.id===((B=n.value)==null?void 0:B.handleId)}):[...f.handleBounds.source||[],...f.handleBounds.target||[]].find(F=>{var B;return F.id===((B=n.value)==null?void 0:B.handleId)}))||((T=f.handleBounds[g??"target"])==null?void 0:T[0]))||null,J=G?ac[G]:null;if(!G||!J)return null;const Z=i.value??l.value.type;let ee="";const w={sourceX:D,sourceY:z,sourcePosition:G,targetX:_,targetY:v,targetPosition:J};return Z===Le.Bezier?[ee]=io(w):Z===Le.Step?[ee]=Xt({...w,borderRadius:0}):Z===Le.SmoothStep?[ee]=Xt(w):Z===Le.SimpleBezier?[ee]=ro(w):ee=`M${D},${z} ${_},${v}`,a.h("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},a.h("g",{class:"vue-flow__connection"},d?a.h(d,{sourceX:D,sourceY:z,sourcePosition:G,targetX:_,targetY:v,targetPosition:J,sourceNode:p,sourceHandle:m,targetNode:f,targetHandle:A,markerEnd:`url(#${Ie(l.value.markerEnd)})`,markerStart:`url(#${Ie(l.value.markerStart)})`,connectionStatus:u.value}):a.h("path",{d:ee,class:[l.value.class,u,"vue-flow__connection-path"],style:r.value||l.value.style,"marker-end":`url(#${Ie(l.value.markerEnd)})`,"marker-start":`url(#${Ie(l.value.markerStart)})`})))}}}),sc=uc,cc=["tabIndex"],dc={name:"NodesSelection",compatConfig:{MODE:3}},fc=a.defineComponent({...dc,setup(e){const t=ue(),n=a.toRef(t,"emits"),o=a.toRef(t,"viewport"),i=a.toRef(t,"getSelectedNodes"),r=a.toRef(t,"noPanClassName"),l=a.toRef(t,"disableKeyboardA11y"),u=a.toRef(t,"userSelectionActive"),s=ir(),c=a.ref(),d=Gi({el:c,onStart(f){n.value.selectionDragStart(f)},onDrag(f){n.value.selectionDrag(f)},onStop(f){n.value.selectionDragStop(f)}});a.onMounted(()=>{var f;l.value||(f=c.value)==null||f.focus({preventScroll:!0})});const h=a.computed(()=>en(i.value)),p=a.computed(()=>({width:`${h.value.width}px`,height:`${h.value.height}px`,top:`${h.value.y}px`,left:`${h.value.x}px`}));function y(f){n.value.selectionContextMenu({event:f,nodes:i.value})}function g(f){l.value||Je[f.key]&&s({x:Je[f.key].x,y:Je[f.key].y},f.shiftKey)}return(f,_)=>!a.unref(u)&&a.unref(h).width&&a.unref(h).height?(a.openBlock(),a.createElementBlock("div",{key:0,class:a.normalizeClass(["vue-flow__nodesselection vue-flow__container",a.unref(r)]),style:a.normalizeStyle({transform:`translate(${a.unref(o).x}px,${a.unref(o).y}px) scale(${a.unref(o).zoom})`})},[a.createElementVNode("div",{ref_key:"el",ref:c,class:a.normalizeClass([{dragging:a.unref(d)},"vue-flow__nodesselection-rect"]),style:a.normalizeStyle(a.unref(p)),tabIndex:a.unref(l)?void 0:-1,onContextmenu:y,onKeydown:g},null,46,cc)],6)):a.createCommentVNode("",!0)}}),hc={name:"UserSelection",compatConfig:{MODE:3}},gc=a.defineComponent({...hc,setup(e){const{userSelectionRect:t}=ue();return(n,o)=>{var i,r,l,u;return a.openBlock(),a.createElementBlock("div",{class:"vue-flow__selection vue-flow__container",style:a.normalizeStyle({width:`${(i=a.unref(t))==null?void 0:i.width}px`,height:`${(r=a.unref(t))==null?void 0:r.height}px`,transform:`translate(${(l=a.unref(t))==null?void 0:l.x}px, ${(u=a.unref(t))==null?void 0:u.y}px)`})},null,4)}}}),Qi={input:Gs,default:Fs,output:Ys},er={default:Ki,straight:Ji,step:ji,smoothstep:lo,simplebezier:qi};function pc(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:qt.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:gt.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Le.Bezier,style:{}},connectionMode:Ae.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:"Meta",zoomActivationKeyCode:"Meta",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:zs(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,disableKeyboardA11y:!1,ariaLiveMessage:"",__experimentalFeatures:{nestedFlow:!1}}}function tr(e){const t=pc();return e&&Object.keys(e).forEach(n=>{const o=e[n];le(o)&&(t[n]=o)}),t}function mc(e,t,n,o){let i=!1;const r=kc(e,t),l=E=>{const N=E??n.value??[];e.hooks.updateNodeInternals.trigger(N)},u=E=>{if(E)return e.nodes&&!n.value.length?e.nodes.find(N=>N.id===E):e.nodes[n.value.indexOf(E)]},s=E=>{if(E)return e.edges&&!o.value.length?e.edges.find(N=>N.id===E):e.edges[o.value.indexOf(E)]},c=(E,N,V)=>{const I=[];E.forEach(R=>{var q,ie;const Q={id:R.id,type:"position",dragging:V,from:R.from};if(N&&(Q.position=R.position,R.parentNode)){const ne=u(R.parentNode);Q.position={x:Q.position.x-(((q=ne==null?void 0:ne.computedPosition)==null?void 0:q.x)??0),y:Q.position.y-(((ie=ne==null?void 0:ne.computedPosition)==null?void 0:ie.y)??0)}}I.push(Q)}),I!=null&&I.length&&e.hooks.nodesChange.trigger(I)},d=E=>{var R;if(!e.vueFlowRef)return;const N=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!N)return;let V;if((R=e.__experimentalFeatures)!=null&&R.nestedFlow){let Q=[N],q=N,ie;for(;!ie&&q;)q=q.parentElement,ie=q==null?void 0:q.classList.contains("vue-flow__transformationpane"),ie&&(Q=[q,...Q]);Q.forEach(ne=>{const pe=window.getComputedStyle(ne),{m22:We}=new window.DOMMatrixReadOnly(pe.transform);V?V*=We:V=We})}else{const Q=window.getComputedStyle(N),{m22:q}=new window.DOMMatrixReadOnly(Q.transform);V=q}const I=E.reduce((Q,q)=>{const ie=u(q.id);if(ie){const ne=jt(q.nodeElement);!!(ne.width&&ne.height&&(ie.dimensions.width!==ne.width||ie.dimensions.height!==ne.height||q.forceUpdate))&&(ie.handleBounds.source=Xo(".source",q.nodeElement,V),ie.handleBounds.target=Xo(".target",q.nodeElement,V),ie.dimensions=ne,ie.initialized=!0,Q.push({id:ie.id,type:"dimensions",dimensions:ne}))}return Q},[]);e.fitViewOnInit&&!i&&(me(()=>r.value.initialized).toBe(!0).then(()=>{r.value.fitView()}),i=!0),I.length&&e.hooks.nodesChange.trigger(I)},h=(E,N)=>{const V=E.map(Q=>Q.id);let I,R=[];if(e.multiSelectionActive)I=V.map(Q=>$e(Q,N));else{const Q=yn([...e.nodes,...e.edges],V);I=Q.changedNodes,R=Q.changedEdges}I.length&&e.hooks.nodesChange.trigger(I),R.length&&e.hooks.edgesChange.trigger(R)},p=(E,N)=>{const V=E.map(Q=>Q.id);let I=[],R;if(e.multiSelectionActive)R=V.map(Q=>$e(Q,N));else{const Q=yn([...e.nodes,...e.edges],V);I=Q.changedNodes,R=Q.changedEdges}I.length&&e.hooks.nodesChange.trigger(I),R.length&&e.hooks.edgesChange.trigger(R)},y=(E,N)=>{const V=E.filter(Xe).map(q=>q.id),I=E.filter(_e).map(q=>q.id);let{changedNodes:R,changedEdges:Q}=yn([...e.nodes,...e.edges],[...V,...I]);e.multiSelectionActive&&(R=V.map(q=>$e(q,N)),Q=I.map(q=>$e(q,N))),R.length&&e.hooks.nodesChange.trigger(R),Q.length&&e.hooks.edgesChange.trigger(Q)},g=E=>{h(E,!0)},f=E=>{p(E,!0)},_=E=>{y(E,!0)},v=E=>{if(!E.length)return h(E,!1);const V=E.map(I=>I.id).map(I=>$e(I,!1));V.length&&e.hooks.nodesChange.trigger(V)},b=E=>{if(!E.length)return p(E,!1);const V=E.map(I=>I.id).map(I=>$e(I,!1));V.length&&e.hooks.edgesChange.trigger(V)},C=E=>{if(!E||!E.length)return y([],!1);const{changedNodes:N,changedEdges:V}=E.reduce((I,R)=>{const Q=$e(R.id,!1);return Xe(R)?I.changedNodes.push(Q):I.changedEdges.push(Q),I},{changedNodes:[],changedEdges:[]});N.length&&e.hooks.nodesChange.trigger(N),V.length&&e.hooks.edgesChange.trigger(V)},m=E=>{var N;(N=e.d3Zoom)==null||N.scaleExtent([E,e.maxZoom]),e.minZoom=E},k=E=>{var N;(N=e.d3Zoom)==null||N.scaleExtent([e.minZoom,E]),e.maxZoom=E},x=E=>{var N;(N=e.d3Zoom)==null||N.translateExtent(E),e.translateExtent=E},D=E=>{e.nodeExtent=E,l(n.value)},z=E=>{e.nodesDraggable=E,e.nodesConnectable=E,e.elementsSelectable=E},G=E=>{const N=E instanceof Function?E(e.nodes):E;!e.initialized&&!N.length||(e.nodes=Uo(N,e.nodes,u,e.hooks.error.trigger))},A=E=>{const N=E instanceof Function?E(e.edges):E;if(!e.initialized&&!N.length)return;const V=e.isValidConnection?N.filter(I=>e.isValidConnection(I,{edges:e.edges,sourceNode:u(I.source),targetNode:u(I.target)})):N;e.edges=V.reduce((I,R)=>{const Q=u(R.source),q=u(R.target),ie=!Q||typeof Q>"u",ne=!q||typeof q>"u";if(ie&&ne?e.hooks.error.trigger(new fe(ce.EDGE_SOURCE_TARGET_MISSING,R.id,R.source,R.target)):(ie&&e.hooks.error.trigger(new fe(ce.EDGE_SOURCE_MISSING,R.id,R.source)),ne&&e.hooks.error.trigger(new fe(ce.EDGE_TARGET_MISSING,R.id,R.target))),ie||ne)return I;const pe=s(R.id);return I.push({...Kn(R,Object.assign({},pe,e.defaultEdgeOptions)),sourceNode:Q,targetNode:q}),I},[])},J=E=>{const N=E instanceof Function?E([...e.nodes,...e.edges]):E;!e.initialized&&!N.length||(G(N.filter(Xe)),A(N.filter(_e)))},Z=E=>{let N=E instanceof Function?E(e.nodes):E;N=Array.isArray(N)?N:[N];const I=Uo(N,e.nodes,u,e.hooks.error.trigger).map(Vo);I.length&&e.hooks.nodesChange.trigger(I)},ee=E=>{let N=E instanceof Function?E(e.edges):E;N=Array.isArray(N)?N:[N];const I=(e.isValidConnection?N.filter(R=>e.isValidConnection(R,{edges:e.edges,sourceNode:u(R.source),targetNode:u(R.target)})):N).reduce((R,Q)=>{const q=Ds({...Q,...e.defaultEdgeOptions},e.edges,e.hooks.error.trigger);if(q){const ie=u(q.source),ne=u(q.target),pe=!ie||typeof ie>"u",We=!ne||typeof ne>"u";if(pe&&We?e.hooks.error.trigger(new fe(ce.EDGE_SOURCE_TARGET_MISSING,q.id,q.source,q.target)):(pe&&e.hooks.error.trigger(new fe(ce.EDGE_SOURCE_MISSING,q.id,q.source)),We&&e.hooks.error.trigger(new fe(ce.EDGE_TARGET_MISSING,q.id,q.target))),pe||We)return R;R.push(Vo({...q,sourceNode:ie,targetNode:ne}))}return R},[]);I.length&&e.hooks.edgesChange.trigger(I)},w=(E,N=!0)=>{let V=E instanceof Function?E(e.nodes):E;V=Array.isArray(V)?V:[V];const I=[],R=[];V.forEach(Q=>{const q=typeof Q=="string"?u(Q):Q;if(q&&!(le(q.deletable)&&!q.deletable)&&(I.push(vn(q.id)),N)){const ie=Et([q],e.edges).filter(ne=>le(ne.deletable)?ne.deletable:!0);R.push(...ie.map(ne=>vn(ne.id)))}}),R.length&&e.hooks.edgesChange.trigger(R),I.length&&e.hooks.nodesChange.trigger(I)},M=E=>{let N=E instanceof Function?E(e.edges):E;N=Array.isArray(N)?N:[N];const V=[];N.forEach(I=>{const R=typeof I=="string"?s(I):I;R&&(le(R.deletable)&&!R.deletable||V.push(vn(typeof I=="string"?I:I.id)))}),e.hooks.edgesChange.trigger(V)},S=(E,N,V=!0)=>As(E,N,e.edges,s,V,e.hooks.error.trigger),P=E=>mt(E,e.nodes),H=E=>mt(E,e.edges),U=(E,N,V,I=!1)=>{I?e.connectionClickStartHandle=E:e.connectionStartHandle=E,e.connectionEndHandle=null,e.connectionStatus=null,N&&(e.connectionPosition=N)},T=(E,N=null,V=null)=>{e.connectionStartHandle&&(e.connectionPosition=E,e.connectionEndHandle=N,e.connectionStatus=V)},F=(E,N)=>{e.connectionPosition={x:NaN,y:NaN},e.connectionEndHandle=null,e.connectionStatus=null,N?e.connectionClickStartHandle=null:e.connectionStartHandle=null},B=E=>{const N=hs(E),V=N?null:u(E.id);return!N&&!V?[null,null,N]:[N?E:Ao(V),V,N]},W=(E,N=!0,V)=>{const[I,R,Q]=B(E);return I?(V||e.nodes).filter(q=>{if(!Q&&(q.id===R.id||!q.computedPosition))return!1;const ie=Ao(q),ne=An(ie,I);return N&&ne>0||ne>=Number(E.width)*Number(E.height)}):[]},te=(E,N,V=!0)=>{const[I]=B(E);if(!I)return!1;const R=An(I,N);return V&&R>0||R>=Number(E.width)*Number(E.height)},$=E=>{const{viewport:N,dimensions:V,d3Zoom:I,d3Selection:R,translateExtent:Q}=e;if(!I||!R||!E.x&&!E.y)return!1;const q=Ze.translate(N.x+E.x,N.y+E.y).scale(N.zoom),ie=[[0,0],[V.width,V.height]],ne=I.constrain()(q,ie,Q),pe=e.viewport.x!==ne.x||e.viewport.y!==ne.y||e.viewport.zoom!==ne.k;return I.transform(R,ne),pe},Y=E=>{const N=E instanceof Function?E(e):E,V=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks","defaultEdgeOptions"],I=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];le(N.defaultEdgeOptions)&&(e.defaultEdgeOptions=N.defaultEdgeOptions);const R=N.modelValue||N.nodes||N.edges?[]:void 0;R&&(N.modelValue&&R.push(...N.modelValue),N.nodes&&R.push(...N.nodes),N.edges&&R.push(...N.edges),J(R));const Q=()=>{le(N.maxZoom)&&k(N.maxZoom),le(N.minZoom)&&m(N.minZoom),le(N.translateExtent)&&x(N.translateExtent),le(N.nodeExtent)&&D(N.nodeExtent)};Object.keys(N).forEach(q=>{const ie=q,ne=N[ie];![...V,...I].includes(ie)&&le(ne)&&(e[ie]=ne)}),e.d3Zoom?Q():me(()=>e.d3Zoom).not.toBeUndefined().then(Q),e.initialized||(e.initialized=!0)},O=async(E={padding:.1})=>{await me(()=>r.value.initialized).toBe(!0),r.value.fitView(E)},K=async E=>{await me(()=>r.value.initialized).toBe(!0),r.value.zoomIn(E)},re=async E=>{await me(()=>r.value.initialized).toBe(!0),r.value.zoomOut(E)},se=async(E,N)=>{await me(()=>r.value.initialized).toBe(!0),r.value.zoomTo(E,N)},de=async(E,N)=>{await me(()=>r.value.initialized).toBe(!0),r.value.setTransform(E,N)};return{updateNodePositions:c,updateNodeDimensions:d,setElements:J,setNodes:G,setEdges:A,addNodes:Z,addEdges:ee,removeNodes:w,removeEdges:M,findNode:u,findEdge:s,updateEdge:S,applyEdgeChanges:H,applyNodeChanges:P,addSelectedElements:_,addSelectedNodes:g,addSelectedEdges:f,setMinZoom:m,setMaxZoom:k,setTranslateExtent:x,setNodeExtent:D,removeSelectedElements:C,removeSelectedNodes:v,removeSelectedEdges:b,startConnection:U,updateConnection:T,endConnection:F,setInteractive:z,setState:Y,getIntersectingNodes:W,isNodeIntersecting:te,panBy:$,fitView:O,zoomIn:K,zoomOut:re,zoomTo:se,setTransform:de,getTransform:()=>r.value.getTransform(),setCenter:async(E,N,V)=>{await me(()=>r.value.initialized).toBe(!0),r.value.setCenter(E,N,V)},fitBounds:async(E,N)=>{await me(()=>r.value.initialized).toBe(!0),r.value.fitBounds(E,N)},project:E=>r.value.project(E),toObject:()=>JSON.parse(JSON.stringify({nodes:e.nodes.map(E=>{const{computedPosition:N,handleBounds:V,selected:I,dimensions:R,isParent:Q,resizing:q,dragging:ie,initialized:ne,...pe}=E;return pe}),edges:e.edges.map(E=>{const{selected:N,sourceNode:V,targetNode:I,...R}=E;return R}),position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom})),fromObject:E=>{const{nodes:N,edges:V,position:I,zoom:R}=E;N&&G(N),V&&A(V),I&&de({x:I[0],y:I[1],zoom:R||1})},updateNodeInternals:l,$reset:()=>{const E=tr();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const N=Ze.translate(E.defaultViewport.x??0,E.defaultViewport.y??0).scale(ze(E.defaultViewport.zoom??1,E.minZoom,E.maxZoom)),V=e.viewportRef.getBoundingClientRect(),I=[[0,0],[V.width,V.height]],R=e.d3Zoom.constrain()(N,I,E.translateExtent);e.d3Zoom.transform(e.d3Selection,R)}Y(E)},$destroy:()=>{}}}function vc(e,t,n){const o=a.computed(()=>f=>e.nodes&&!t.value.length?e.nodes.find(_=>_.id===f):e.nodes[t.value.indexOf(f)]),i=a.computed(()=>f=>e.edges&&!n.value.length?e.edges.find(_=>_.id===f):e.edges[n.value.indexOf(f)]),r=a.computed(()=>{var v;const f={...er,...e.edgeTypes},_=Object.keys(f);return(v=e.edges)==null||v.forEach(b=>b.type&&!_.includes(b.type)&&(f[b.type]=b.type)),f}),l=a.computed(()=>{var v;const f={...Qi,...e.nodeTypes},_=Object.keys(f);return(v=e.nodes)==null||v.forEach(b=>b.type&&!_.includes(b.type)&&(f[b.type]=b.type)),f}),u=a.computed(()=>{const f=e.nodes.filter(_=>!_.hidden);return e.onlyRenderVisibleElements?f&&Jn(f,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):f??[]}),s=(f,_,v)=>{if(_=_??o.value(f.source),v=v??o.value(f.target),!_||!v){e.hooks.error.trigger(new fe(ce.EDGE_ORPHANED,f.id));return}return!f.hidden&&!v.hidden&&!_.hidden},c=a.computed(()=>e.onlyRenderVisibleElements?e.edges.filter(f=>{const _=o.value(f.source),v=o.value(f.target);return s(f,_,v)&&Cs({sourcePos:_.computedPosition||{x:0,y:0},targetPos:v.computedPosition||{x:0,y:0},sourceWidth:_.dimensions.width,sourceHeight:_.dimensions.height,targetWidth:v.dimensions.width,targetHeight:v.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(f=>s(f))),d=a.computed(()=>[...u.value,...c.value]),h=a.computed(()=>e.nodes.filter(f=>f.selected)),p=a.computed(()=>e.edges.filter(f=>f.selected)),y=a.computed(()=>[...h.value??[],...p.value??[]]),g=a.computed(()=>u.value.filter(f=>f.initialized&&f.handleBounds!==void 0));return{getNode:o,getEdge:i,getElements:d,getEdgeTypes:r,getNodeTypes:l,getEdges:c,getNodes:u,getSelectedElements:y,getSelectedNodes:h,getSelectedEdges:p,getNodesInitialized:g}}class Ge{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return Ge.instance||(Ge.instance=new Ge),Ge.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=tr(n),i=a.reactive(o),r=a.computed(()=>i.nodes.map(p=>p.id)),l=a.computed(()=>i.edges.map(p=>p.id)),u=vc(i,r,l),s=mc(i,u,r,l),c={};Object.entries(i.hooks).forEach(([p,y])=>{const g=`on${p.charAt(0).toUpperCase()+p.slice(1)}`;c[g]=y.on});const d={};Object.entries(i.hooks).forEach(([p,y])=>{d[p]=y.trigger}),s.setState(i);const h={...c,...u,...s,...pr(i),emits:d,id:t,vueFlowVersion:"1.20.2",$destroy:()=>{this.remove(t)}};return this.set(t,h),h}getId(){return`vue-flow-${this.currentId++}`}}function ue(e){const t=Ge.getInstance(),n=a.getCurrentScope(),o=e==null?void 0:e.id,i=(n==null?void 0:n.vueFlowId)||o;let r,l=!1;if(n){const u=a.inject(Rn,null);typeof u<"u"&&u!==null&&(r=u)}if(r||i&&(r=t.get(i)),!r||r&&o&&o!==r.id){const u=o??t.getId();r=t.create(u,e),n&&(l=!0)}else e&&r.setState(e);return n&&(a.provide(Rn,r),n.vueFlowId=r.id,l&&xt(()=>{if(r){const u=t.get(r.id);u?u.$destroy():vt(`No store instance found for id ${r.id} in storage.`)}})),r}function yc(e){const t=e??a.inject(Xi,""),n=a.inject(Ui,null),{findEdge:o,emits:i}=ue(),r=o(t);return r||i.error(new fe(ce.EDGE_NOT_FOUND,t)),{id:t,edge:r,edgeEl:n}}function xc(){return{doubleClick:L(),click:L(),mouseEnter:L(),mouseMove:L(),mouseLeave:L(),contextMenu:L(),updateStart:L(),update:L(),updateEnd:L()}}function wc(e,t){const n=xc();return n.doubleClick.on(o=>{var i,r;t.edgeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.edgeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.edgeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.edgeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.edgeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.edgeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.updateStart.on(o=>{var i,r;t.edgeUpdateStart(o),(r=(i=e.events)==null?void 0:i.updateStart)==null||r.call(i,o)}),n.update.on(o=>{var i,r;t.edgeUpdate(o),(r=(i=e.events)==null?void 0:i.update)==null||r.call(i,o)}),n.updateEnd.on(o=>{var i,r;t.edgeUpdateEnd(o),(r=(i=e.events)==null?void 0:i.updateEnd)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function nr(){const{viewport:e,snapGrid:t,snapToGrid:n}=ue();return({sourceEvent:o})=>{const i=o.touches?o.touches[0].clientX:o.clientX,r=o.touches?o.touches[0].clientY:o.clientY,l={x:(i-e.value.x)/e.value.zoom,y:(r-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(l.x/t.value[0]):l.x,ySnapped:n.value?t.value[1]*Math.round(l.y/t.value[1]):l.y,...l}}}function Tt(){return!0}function uo({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:r,onEdgeUpdateEnd:l}){const{vueFlowRef:u,connectionMode:s,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:h,nodesConnectable:p,autoPanOnConnect:y,findNode:g,panBy:f,getNodes:_,startConnection:v,updateConnection:b,endConnection:C,emits:m,viewport:k,edges:x,isValidConnection:D}=ue();let z=null,G=!1,A=null;function J(ee){var P;const w=oe(n)==="target",M=eo(ee),S=zo(ee.target);if(M&&ee.button===0||!M){let H=function(he){se=Qe(he,K);const{handle:Re,validHandleResult:X}=Bs(Qt(se,k.value,!1,[1,1]),c.value,ke,ae=>Yo(he,ae,s.value,oe(t),oe(e),w?"target":"source",F,S,x.value,g));if(B=Re||ke.find(ae=>{var ye;return ae.id===((ye=X.endHandle)==null?void 0:ye.handleId)})||null,de||(Ce(),de=!0),z=X.connection,G=X.isValid,A=X.handleDomNode,b(B&&G?jn({x:B.x,y:B.y},k.value):se,X.endHandle,Os(!!B,G)),!B&&!G&&!A)return _n(re);z&&z.source!==z.target&&A&&(_n(re),re=A,A.classList.add("connecting","vue-flow__handle-connecting"),A.classList.toggle("valid",G),A.classList.toggle("vue-flow__handle-valid",G))},U=function(he){(B||A)&&z&&G&&(r?r(he,z):m.connect(z)),m.connectEnd(he),i&&(l==null||l(he)),_n(re),cancelAnimationFrame(W),C(he),de=!1,G=!1,z=null,A=null,S.removeEventListener("mousemove",H),S.removeEventListener("mouseup",U),S.removeEventListener("touchmove",H),S.removeEventListener("touchend",U)};const T=g(oe(t));let F=oe(o)||D.value||Tt;!F&&T&&(F=(w?T.isValidSourcePos:T.isValidTargetPos)||Tt);let B,W=0;const{x:te,y:$}=Qe(ee),Y=S==null?void 0:S.elementFromPoint(te,$),O=Fi(oe(i),Y),K=(P=u.value)==null?void 0:P.getBoundingClientRect();if(!K||!O)return;let re,se=Qe(ee,K),de=!1;const ke=Ps({nodes:_.value,nodeId:oe(t),handleId:oe(e),handleType:O}),Ce=()=>{if(!y)return;const[he,Re]=Hi(se,K);f({x:he,y:Re}),W=requestAnimationFrame(Ce)};v({nodeId:oe(t),handleId:oe(e),type:O},{x:te-K.left,y:$-K.top},ee),m.connectStart({event:ee,nodeId:oe(t),handleId:oe(e),handleType:O}),S.addEventListener("mousemove",H),S.addEventListener("mouseup",U),S.addEventListener("touchmove",H),S.addEventListener("touchend",U)}}function Z(ee){if(!d.value)return;const w=oe(n)==="target";if(!h.value)m.clickConnectStart({event:ee,nodeId:oe(t),handleId:oe(e)}),v({nodeId:oe(t),type:oe(n),handleId:oe(e)},void 0,ee,!0);else{let M=oe(o)||D.value||Tt;const S=g(oe(t));if(!M&&S&&(M=(w?S.isValidSourcePos:S.isValidTargetPos)||Tt),S&&(typeof S.connectable>"u"?p.value:S.connectable)===!1)return;const P=zo(ee.target),{connection:H,isValid:U}=Yo(ee,{nodeId:oe(t),id:oe(e),type:oe(n)},s.value,h.value.nodeId,h.value.handleId||null,h.value.type,M,P,x.value,g),T=H.source===H.target;U&&!T&&m.connect(H),m.clickConnectEnd(ee),C(ee,!0)}}return{handlePointerDown:J,handleClick:Z}}function so(){return typeof window<"u"?window:{chrome:!1}}function Vn(e){var i,r;const t=((r=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:r[0])||e.target,n=nt(t.hasAttribute)?t.hasAttribute("contenteditable"):!1,o=nt(t.closest)?t.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||n||!!o}function _c(e){return e.ctrlKey||e.metaKey||e.shiftKey}function Ec(e,t){return n=>e.some(o=>{const i=o.split("+").map(r=>r.trim().toLowerCase());return i.length===1?n.key===o:(t.add(n.key.toLowerCase()),i.every(r=>t.has(r)))})}function ut(e,t){const n=so(),o=a.ref(oe(e)===!0);let i=!1;const r=new Set;return a.watch(o,()=>{t==null||t(o.value)}),a.watch(()=>oe(e),l=>{if(n&&typeof n.addEventListener<"u"&&Ln(n,"blur",()=>{o.value=!1}),$s(l)){o.value=l;return}Array.isArray(l)&&(l=Ec(l,r)),l&&(mo(l,u=>{i=_c(u),!(!i&&Vn(u))&&(u.preventDefault(),o.value=!0)},{eventName:"keydown"}),mo(l,u=>{if(o.value){if(!i&&Vn(u))return;i=!1,r.clear(),o.value=!1}},{eventName:"keyup"}))},{immediate:!0}),o}function or(e){const t=e??a.inject(to,""),n=a.inject(Yi,null),{findNode:o,edges:i,emits:r}=ue(),l=o(t);return l||r.error(new fe(ce.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:l,parentNode:a.computed(()=>o(l.parentNode)),connectedEdges:a.computed(()=>Et([l],i.value))}}function bc(){return{doubleClick:L(),click:L(),mouseEnter:L(),mouseMove:L(),mouseLeave:L(),contextMenu:L(),dragStart:L(),drag:L(),dragStop:L()}}function Sc(e,t){const n=bc();return n.doubleClick.on(o=>{var i,r;t.nodeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.nodeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.nodeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.nodeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.nodeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.nodeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.dragStart.on(o=>{var i,r;t.nodeDragStart(o),(r=(i=e.events)==null?void 0:i.dragStart)==null||r.call(i,o)}),n.drag.on(o=>{var i,r;t.nodeDrag(o),(r=(i=e.events)==null?void 0:i.drag)==null||r.call(i,o)}),n.dragStop.on(o=>{var i,r;t.nodeDragStop(o),(r=(i=e.events)==null?void 0:i.dragStop)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function ir(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:r,nodesDraggable:l,emits:u}=ue();return(s,c=!1)=>{const d=r.value?i.value[0]:5,h=r.value?i.value[1]:5,p=c?4:1,y=s.x*d*p,g=s.y*h*p,f=e.value.filter(_=>_.draggable||l&&typeof _.draggable>"u").map(_=>{const v={x:_.computedPosition.x+y,y:_.computedPosition.y+g},{computedPosition:b}=Qn(_,v,u.error,t.value,_.parentNode?o(_.parentNode):void 0);return{id:_.id,position:b,from:_.position,distance:{x:s.x,y:s.y},dimensions:_.dimensions}});n(f,!0,!1)}}const En=.1;function Ve(){}const Nc={zoomIn:Ve,zoomOut:Ve,zoomTo:Ve,fitView:Ve,setCenter:Ve,fitBounds:Ve,project:e=>e,setTransform:Ve,getTransform:()=>({x:0,y:0,zoom:1}),initialized:!1};function kc(e,t){const n=e,o=a.toRef(n,"nodes"),i=a.toRef(n,"d3Zoom"),r=a.toRef(n,"d3Selection"),l=a.toRef(n,"dimensions"),u=a.toRef(n,"translateExtent"),s=a.toRef(n,"minZoom"),c=a.toRef(n,"maxZoom"),d=a.toRef(n,"viewport"),h=a.toRef(n,"snapToGrid"),p=a.toRef(n,"snapGrid"),y=a.toRef(n,"hooks"),g=t,f=a.toRef(g,"getNodes"),_=a.ref(!1);y.value.nodesInitialized.on(()=>{_.value=!0});const v=a.computed(()=>!!i.value&&!!r.value&&!!l.value.width&&!!l.value.height&&_.value);function b(m,k){r.value&&i.value&&i.value.scaleBy(bn(r.value,k),m)}function C(m,k,x,D){const{x:z,y:G}=Wn({x:-m,y:-k},u.value),A=Ze.translate(-z,-G).scale(x);r.value&&i.value&&i.value.transform(bn(r.value,D),A)}return a.computed(()=>v.value?{initialized:!0,zoomIn:m=>{b(1.2,m==null?void 0:m.duration)},zoomOut:m=>{b(1/1.2,m==null?void 0:m.duration)},zoomTo:(m,k)=>{r.value&&i.value&&i.value.scaleTo(bn(r.value,k==null?void 0:k.duration),m)},setTransform:(m,k)=>{C(m.x,m.y,m.zoom,k==null?void 0:k.duration)},getTransform:()=>({x:d.value.x,y:d.value.y,zoom:d.value.zoom}),fitView:(m={padding:En,includeHiddenNodes:!1,duration:0})=>{if(!o.value.length)return;const k=(m.includeHiddenNodes?o.value:f.value).filter(A=>{var ee;const J=A.initialized&&A.dimensions.width&&A.dimensions.height;let Z=!0;return(ee=m.nodes)!=null&&ee.length&&(Z=m.nodes.includes(A.id)),J&&Z}),x=en(k),{x:D,y:z,zoom:G}=pt(x,l.value.width,l.value.height,m.minZoom??s.value,m.maxZoom??c.value,m.padding??En,m.offset);C(D,z,G,m==null?void 0:m.duration)},setCenter:(m,k,x)=>{const D=typeof(x==null?void 0:x.zoom)<"u"?x.zoom:c.value,z=l.value.width/2-m*D,G=l.value.height/2-k*D;C(z,G,D,x==null?void 0:x.duration)},fitBounds:(m,k={padding:En})=>{const{x,y:D,zoom:z}=pt(m,l.value.width,l.value.height,s.value,c.value,k.padding);C(x,D,z,k==null?void 0:k.duration)},project:m=>Qt(m,d.value,h.value,p.value)}:Nc)}function bn(e,t=0){return e.transition().duration(t)}function Cc(e,t,n){const o=a.effectScope();return o.run(()=>{[()=>{o.run(()=>{let g,f,_=!!(n.nodes.value.length||n.edges.value.length);g=Ke([e.modelValue,()=>{var v,b;return(b=(v=e.modelValue)==null?void 0:v.value)==null?void 0:b.length}],([v])=>{v&&Array.isArray(v)&&(f==null||f.pause(),n.setElements(v),!f&&!_&&v.length?_=!0:f==null||f.resume())}),f=Ke([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([v,b])=>{var C;(C=e.modelValue)!=null&&C.value&&Array.isArray(e.modelValue.value)&&(g==null||g.pause(),e.modelValue.value=[...v,...b],a.nextTick(()=>{g==null||g.resume()}))},{immediate:_}),a.onScopeDispose(()=>{g==null||g.stop(),f==null||f.stop()})})},()=>{o.run(()=>{let g,f,_=!!n.nodes.value.length;g=Ke([e.nodes,()=>{var v,b;return(b=(v=e.nodes)==null?void 0:v.value)==null?void 0:b.length}],([v])=>{v&&Array.isArray(v)&&(f==null||f.pause(),n.setNodes(v),!f&&!_&&v.length?_=!0:f==null||f.resume())}),f=Ke([n.nodes,()=>n.nodes.value.length],([v])=>{var b;(b=e.nodes)!=null&&b.value&&Array.isArray(e.nodes.value)&&(g==null||g.pause(),e.nodes.value=[...v],a.nextTick(()=>{g==null||g.resume()}))},{immediate:_}),a.onScopeDispose(()=>{g==null||g.stop(),f==null||f.stop()})})},()=>{o.run(()=>{let g,f,_=!!n.edges.value.length;g=Ke([e.edges,()=>{var v,b;return(b=(v=e.edges)==null?void 0:v.value)==null?void 0:b.length}],([v])=>{v&&Array.isArray(v)&&(f==null||f.pause(),n.setEdges(v),!f&&!_&&v.length?_=!0:f==null||f.resume())}),f=Ke([n.edges,()=>n.edges.value.length],([v])=>{var b;(b=e.edges)!=null&&b.value&&Array.isArray(e.edges.value)&&(g==null||g.pause(),e.edges.value=[...v],a.nextTick(()=>{g==null||g.resume()}))},{immediate:_}),a.onScopeDispose(()=>{g==null||g.stop(),f==null||f.stop()})})},()=>{o.run(()=>{a.watch(()=>t.minZoom,()=>{t.minZoom&&le(t.minZoom)&&n.setMinZoom(t.minZoom)})})},()=>{o.run(()=>{a.watch(()=>t.maxZoom,()=>{t.maxZoom&&le(t.maxZoom)&&n.setMaxZoom(t.maxZoom)})})},()=>{o.run(()=>{a.watch(()=>t.translateExtent,()=>{t.translateExtent&&le(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)})})},()=>{o.run(()=>{a.watch(()=>t.nodeExtent,()=>{t.nodeExtent&&le(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)})})},()=>{o.run(()=>{a.watch(()=>t.applyDefault,()=>{le(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)}),a.watch(n.applyDefault,(g,f,_)=>{n.applyDefault.value?(n.onNodesChange(n.applyNodeChanges),n.onEdgesChange(n.applyEdgeChanges)):(n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)),_(()=>{n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)})},{immediate:!0})})},()=>{o.run(()=>{const g=async f=>{let _=f;nt(t.autoConnect)&&(_=await t.autoConnect(f)),_!==!1&&n.addEdges([_])};a.watch(()=>t.autoConnect,()=>{le(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)}),a.watch(n.autoConnect,(f,_,v)=>{f?n.onConnect(g):n.hooks.value.connect.off(g),v(()=>{n.hooks.value.connect.off(g)})},{immediate:!0})})},()=>{const g=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach(f=>{if(!g.includes(f)){const _=Dt(t,f),v=n[f];o.run(()=>{a.watch(_,b=>{le(b)&&(v.value=b)},{flush:"pre"})})}})}].forEach(g=>g())}),()=>o.stop()}const Sn=.1;function Mc(e){const t=ue({id:e}),n=a.toRef(t,"nodes"),o=a.toRef(t,"d3Zoom"),i=a.toRef(t,"d3Selection"),r=a.toRef(t,"dimensions"),l=a.toRef(t,"translateExtent"),u=a.toRef(t,"minZoom"),s=a.toRef(t,"maxZoom"),c=a.toRef(t,"viewport"),d=a.toRef(t,"snapToGrid"),h=a.toRef(t,"snapGrid"),p=a.toRef(t,"getNodes");return{zoomIn:f=>{y(1.2,f==null?void 0:f.duration)},zoomOut:f=>{y(1/1.2,f==null?void 0:f.duration)},zoomTo:(f,_)=>{i.value&&o.value&&o.value.scaleTo(Nn(i.value,_==null?void 0:_.duration),f)},setTransform:(f,_)=>{g(f.x,f.y,f.zoom,_==null?void 0:_.duration)},getTransform:()=>({x:c.value.x,y:c.value.y,zoom:c.value.zoom}),fitView:(f={padding:Sn,includeHiddenNodes:!1,duration:0})=>{if(!n.value.length)return;const _=(f.includeHiddenNodes?n.value:p.value).filter(k=>{var z;const x=k.initialized&&k.dimensions.width&&k.dimensions.height;let D=!0;return(z=f.nodes)!=null&&z.length&&(D=f.nodes.includes(k.id)),x&&D}),v=en(_),{x:b,y:C,zoom:m}=pt(v,r.value.width,r.value.height,f.minZoom??u.value,f.maxZoom??s.value,f.padding??Sn,f.offset);g(b,C,m,f==null?void 0:f.duration)},setCenter:(f,_,v)=>{const b=typeof(v==null?void 0:v.zoom)<"u"?v.zoom:s.value,C=r.value.width/2-f*b,m=r.value.height/2-_*b;g(C,m,b,v==null?void 0:v.duration)},fitBounds:(f,_={padding:Sn})=>{const{x:v,y:b,zoom:C}=pt(f,r.value.width,r.value.height,u.value,s.value,_.padding);g(v,b,C,_==null?void 0:_.duration)},project:f=>Qt(f,c.value,d.value,h.value)};function y(f,_){i.value&&o.value&&o.value.scaleBy(Nn(i.value,_),f)}function g(f,_,v,b){const{x:C,y:m}=Wn({x:-f,y:-_},l.value),k=Ze.translate(-C,-m).scale(v);i.value&&o.value&&o.value.transform(Nn(i.value,b),k)}}function Nn(e,t=0){return e.transition().duration(t)}function Jo(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const $c={name:"Pane",compatConfig:{MODE:3}},Tc=a.defineComponent({...$c,props:{isSelecting:{type:Boolean}},setup(e){const{id:t,vueFlowRef:n,getNodes:o,getEdges:i,viewport:r,emits:l,userSelectionActive:u,removeSelectedElements:s,panOnDrag:c,userSelectionRect:d,elementsSelectable:h,nodesSelectionActive:p,addSelectedElements:y,getSelectedEdges:g,getSelectedNodes:f,removeNodes:_,removeEdges:v,selectionMode:b,deleteKeyCode:C,multiSelectionKeyCode:m,multiSelectionActive:k}=ue(),x=a.ref(null),D=a.ref(0),z=a.ref(0),G=a.ref(),A=a.computed(()=>h.value&&(e.isSelecting||u.value));ut(C,T=>{if(!T)return;const F=o.value.reduce((B,W)=>((!W.selected&&W.parentNode&&B.find(te=>te.id===W.parentNode)||W.selected)&&B.push(W),B),[]);(F||g.value)&&(g.value.length>0&&v(g.value),F.length>0&&_(F),p.value=!1,s())}),ut(m,T=>{k.value=T});function J(){u.value=!1,d.value=null,D.value=0,z.value=0}function Z(T){T.target!==x.value||A.value||(l.paneClick(T),s(),p.value=!1)}function ee(T){var F;if(T.target===x.value){if(Array.isArray(c.value)&&((F=c.value)!=null&&F.includes(2))){T.preventDefault();return}l.paneContextMenu(T)}}function w(T){T.target===x.value&&l.paneScroll(T)}function M(T){if(G.value=n.value.getBoundingClientRect(),!A.value||!h||!e.isSelecting||T.button!==0||T.target!==x.value||!G.value)return;const{x:F,y:B}=Jo(T,G.value);s(),d.value={width:0,height:0,startX:F,startY:B,x:F,y:B},u.value=!0,l.selectionStart(T)}function S(T){if(!A.value)return l.paneMouseMove(T);if(!e.isSelecting||!G.value||!d.value)return;u.value||(u.value=!0),p.value&&(p.value=!1);const F=Jo(T,G.value),B=d.value.startX??0,W=d.value.startY??0,te={...d.value,x:F.x<B?F.x:B,y:F.y<W?F.y:W,width:Math.abs(F.x-B),height:Math.abs(F.y-W)},$=Jn(o.value,d.value,r.value,b.value===qt.Partial),Y=Et($,i.value);D.value=$.length,z.value=Y.length,d.value=te,y([...$,...Y])}function P(T){A.value&&T.button===0&&(!u.value&&d.value&&T.target===x.value&&Z(T),p.value=D.value>0,J(),l.selectionEnd(T))}function H(T){var F;if(!A.value)return l.paneMouseLeave(T);u.value&&(p.value=D.value>0,(F=l.selectionEnd)==null||F.call(l,T)),J()}function U(T){A.value||l.paneMouseEnter(T)}return(T,F)=>(a.openBlock(),a.createElementBlock("div",{ref_key:"container",ref:x,key:`pane-${a.unref(t)}`,class:a.normalizeClass(["vue-flow__pane vue-flow__container",{selection:e.isSelecting}]),onClick:Z,onContextmenu:ee,onWheelPassive:w,onMouseenter:U,onMousedown:M,onMousemove:S,onMouseup:P,onMouseleave:H},[a.renderSlot(T.$slots,"default"),a.unref(u)&&a.unref(d)?(a.openBlock(),a.createBlock(gc,{key:0})):a.createCommentVNode("",!0),a.unref(p)&&a.unref(f).length?(a.openBlock(),a.createBlock(fc,{key:1})):a.createCommentVNode("",!0)],34))}}),Bc={class:"vue-flow__nodes vue-flow__container"},Pc={name:"Nodes",compatConfig:{MODE:3}},Oc=a.defineComponent({...Pc,setup(e){const t=a.inject(rn),n=ue(),o=a.toRef(n,"nodesDraggable"),i=a.toRef(n,"nodesFocusable"),r=a.toRef(n,"elementsSelectable"),l=a.toRef(n,"nodesConnectable"),u=a.toRef(n,"getNodes"),s=a.toRef(n,"getNodesInitialized"),c=a.toRef(n,"getNodeTypes"),d=a.toRef(n,"updateNodeDimensions"),h=a.toRef(n,"emits");let p=a.ref();me(()=>u.value.length>0&&s.value.length===u.value.length).toBe(!0).then(()=>{a.nextTick(()=>{h.value.nodesInitialized(s.value)})}),a.onMounted(()=>{p.value=new ResizeObserver(b=>{const C=b.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));d.value(C)})}),a.onBeforeUnmount(()=>{var b;return(b=p.value)==null?void 0:b.disconnect()});function y(b){return typeof b>"u"?o.value:b}function g(b){return typeof b>"u"?r.value:b}function f(b){return typeof b>"u"?l.value:b}function _(b){return typeof b>"u"?i.value:b}function v(b,C){const m=b||"default";let k=C??c.value[m];const x=a.getCurrentInstance();if(typeof k=="string"&&x){const z=Object.keys(x.appContext.components);z&&z.includes(m)&&(k=a.resolveComponent(m,!1))}if(typeof k!="string")return k;const D=t==null?void 0:t[`node-${m}`];return D||(h.value.error(new fe(ce.NODE_TYPE_MISSING,k)),!1)}return(b,C)=>(a.openBlock(),a.createElementBlock("div",Bc,[a.unref(p)?(a.openBlock(!0),a.createElementBlock(a.Fragment,{key:0},a.renderList(a.unref(u),m=>(a.openBlock(),a.createBlock(a.unref(Us),{id:m.id,key:m.id,"resize-observer":a.unref(p),type:v(m.type,m.template),name:m.type||"default",draggable:y(m.draggable),selectable:g(m.selectable),connectable:f(m.connectable),focusable:_(m.focusable),node:m},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","focusable","node"]))),128)):a.createCommentVNode("",!0)]))}}),Ic=["id","markerWidth","markerHeight","markerUnits","orient"],Dc=["stroke","stroke-width","fill"],Ac=["stroke","stroke-width"],zc={name:"MarkerType",compatConfig:{MODE:3}},Rc=a.defineComponent({...zc,props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(a.openBlock(),a.createElementBlock("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===a.unref(Gt).ArrowClosed?(a.openBlock(),a.createElementBlock("polyline",{key:0,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:e.color,points:"-5,-4 0,0 -5,4 -5,-4"},null,8,Dc)):a.createCommentVNode("",!0),e.type===a.unref(Gt).Arrow?(a.openBlock(),a.createElementBlock("polyline",{key:1,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:"none",points:"-5,-4 0,0 -5,4"},null,8,Ac)):a.createCommentVNode("",!0)],8,Ic))}}),Vc={name:"MarkerDefinitions",compatConfig:{MODE:3}},Hc=a.defineComponent({...Vc,setup(e){const t=ue(),n=a.toRef(t,"id"),o=a.toRef(t,"edges"),i=a.toRef(t,"connectionLineOptions"),r=a.toRef(t,"defaultMarkerColor"),l=a.computed(()=>{const u=[],s=[],c=d=>{if(d){const h=Ie(d,n.value);u.includes(h)||(typeof d=="object"?s.push({...d,id:h,color:d.color||r.value}):s.push({id:h,color:r.value,type:d}),u.push(h))}};return[i.value.markerEnd,i.value.markerStart].forEach(c),o.value.reduce((d,h)=>([h.markerStart,h.markerEnd].forEach(c),d.sort((p,y)=>p.id.localeCompare(y.id))),s),s});return(u,s)=>(a.openBlock(),a.createElementBlock("defs",null,[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(a.unref(l),c=>(a.openBlock(),a.createBlock(Rc,{id:c.id,key:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,"stroke-width":c.strokeWidth,orient:c.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}}),Lc={class:"vue-flow__edges vue-flow__container"},Fc={name:"Edges",compatConfig:{MODE:3}},Gc=a.defineComponent({...Fc,setup(e){const t=a.inject(rn),{edgesUpdatable:n,edgesFocusable:o,elementsSelectable:i,findNode:r,getEdges:l,getEdgeTypes:u,elevateEdgesOnSelect:s,dimensions:c,emits:d}=ue();function h(f){return typeof f>"u"?i.value:f}function p(f){return typeof f>"u"?n.value:f}function y(f){return typeof f>"u"?o.value:f}function g(f,_){const v=f||"default";let b=_??u.value[v];const C=a.getCurrentInstance();if(typeof b=="string"&&C){const k=Object.keys(C.appContext.components);k&&k.includes(v)&&(b=a.resolveComponent(v,!1))}if(b&&typeof b!="string")return b;const m=t==null?void 0:t[`edge-${v}`];return m||(d.error(new fe(ce.EDGE_TYPE_MISSING,b)),!1)}return(f,_)=>a.unref(c).width&&a.unref(c).height?(a.openBlock(),a.createElementBlock(a.Fragment,{key:0},[(a.openBlock(),a.createElementBlock("svg",Lc,[a.createVNode(Hc)])),(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(a.unref(l),v=>(a.openBlock(),a.createElementBlock("svg",{key:v.id,class:"vue-flow__edges vue-flow__container",style:a.normalizeStyle({zIndex:a.unref(Ms)(v,a.unref(r),a.unref(s))})},[a.createVNode(a.unref(oc),{id:v.id,edge:v,type:g(v.type,v.template),name:v.type||"default",selectable:h(v.selectable),updatable:p(v.updatable),focusable:y(v.focusable)},null,8,["id","edge","type","name","selectable","updatable","focusable"])],4))),128)),a.createVNode(a.unref(sc))],64)):a.createCommentVNode("",!0)}}),Yc=a.createElementVNode("div",{class:"vue-flow__edge-labels"},null,-1),Xc={name:"Transform",compatConfig:{MODE:3}},Uc=a.defineComponent({...Xc,setup(e){const{id:t,viewport:n,emits:o,d3Zoom:i,d3Selection:r,dimensions:l,...u}=ue(),s=a.ref(!Qo);return me(()=>i.value&&r.value&&l.value.width>0&&l.value.height>0).toBeTruthy().then(()=>{o.paneReady({id:t,viewport:n,emits:o,d3Zoom:i,d3Selection:r,dimensions:l,...u}),setTimeout(()=>{s.value=!0},0)}),(c,d)=>(a.openBlock(),a.createElementBlock("div",{key:`transform-${a.unref(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:a.normalizeStyle({transform:`translate(${a.unref(n).x}px,${a.unref(n).y}px) scale(${a.unref(n).zoom})`,opacity:s.value?void 0:0})},[a.createVNode(Gc),Yc,a.createVNode(Oc),a.renderSlot(c.$slots,"default")],4))}}),Zc={name:"Viewport",compatConfig:{MODE:3}},Wc=a.defineComponent({...Zc,setup(e){const{id:t,minZoom:n,maxZoom:o,defaultViewport:i,translateExtent:r,dimensions:l,zoomActivationKeyCode:u,selectionKeyCode:s,panActivationKeyCode:c,panOnScroll:d,panOnScrollMode:h,panOnScrollSpeed:p,panOnDrag:y,zoomOnDoubleClick:g,zoomOnPinch:f,zoomOnScroll:_,preventScrolling:v,noWheelClassName:b,noPanClassName:C,emits:m,connectionStartHandle:k,userSelectionActive:x,paneDragging:D,d3Zoom:z,d3Selection:G,d3ZoomHandler:A,viewport:J,viewportRef:Z}=ue(),ee=a.ref(),w=a.ref(!1),M=a.ref(!1);let S=!1,P=0,H={x:0,y:0,zoom:0};const U=ut(c),T=a.computed(()=>!w.value&&y.value&&U.value),F=a.computed(()=>s.value!==!0&&w.value||s.value===!0&&!T.value);a.onMounted(()=>{Or(ee,$);const O=so();Ln(O,"resize",$)}),a.onMounted(()=>{const O=ee.value,K=O.getBoundingClientRect(),re=ds().scaleExtent([n.value,o.value]).translateExtent(r.value),se=xe(O).call(re),de=se.on("wheel.zoom"),ke=Ze.translate(i.value.x??0,i.value.y??0).scale(ze(i.value.zoom??1,n.value,o.value)),Ce=[[0,0],[K.width,K.height]],he=re.constrain()(ke,Ce,r.value);re.transform(se,he),z.value=re,G.value=se,A.value=de,J.value={x:he.x,y:he.y,zoom:he.k},Z.value=O,ut(s,X=>{w.value=X});const Re=ut(u);a.watchEffect(()=>{w.value&&x.value&&!M.value?re.on("zoom",null):!w.value&&!x.value&&re.on("zoom",X=>{J.value={x:X.transform.x,y:X.transform.y,zoom:X.transform.k};const ae=te(X.transform);S=B(y.value,P??0),m.viewportChange(ae),m.move({event:X,flowTransform:ae})})}),re.on("start",X=>{var ye;if(!X.sourceEvent)return null;P=X.sourceEvent.button,M.value=!0;const ae=te(X.transform);((ye=X.sourceEvent)==null?void 0:ye.type)==="mousedown"&&(D.value=!0),H=ae,m.viewportChangeStart(ae),m.moveStart({event:X,flowTransform:ae})}),re.on("end",X=>{if(!X.sourceEvent)return null;if(M.value=!1,D.value=!1,B(y.value,P??0)&&!S&&m.paneContextMenu(X.sourceEvent),S=!1,W(H,X.transform)){const ae=te(X.transform);H=ae,m.viewportChangeEnd(ae),m.moveEnd({event:X,flowTransform:ae})}}),a.watchEffect(()=>{d.value&&!Re.value&&!x.value?se.on("wheel.zoom",X=>{if(Y(X,b.value))return!1;X.preventDefault(),X.stopImmediatePropagation();const ae=se.property("__zoom").k||1;if(X.ctrlKey&&f.value){const V=be(X),I=-X.deltaY*(X.deltaMode===1?.05:X.deltaMode?1:.002)*10,R=ae*2**I;re.scaleTo(se,R,V);return}const ye=X.deltaMode===1?20:1,E=h.value===gt.Vertical?0:X.deltaX*ye,N=h.value===gt.Horizontal?0:X.deltaY*ye;re.translateBy(se,-(E/ae)*p.value,-(N/ae)*p.value)},{passive:!1}):typeof de<"u"&&se.on("wheel.zoom",function(X,ae){if(!v.value||Y(X,b.value))return null;X.preventDefault(),de.call(this,X,ae)},{passive:!1})}),re.filter(X=>{var N,V;const ae=Re.value||_.value,ye=f.value&&X.ctrlKey;if(X.button===1&&X.type==="mousedown"&&((N=X.target)!=null&&N.closest(".vue-flow__node")||(V=X.target)!=null&&V.closest(".vue-flow__edge")))return!0;if(!y.value&&!ae&&!d.value&&!g.value&&!f.value||x.value||!g.value&&X.type==="dblclick"||Y(X,b.value)&&X.type==="wheel"||Y(X,C.value)&&X.type!=="wheel"||!f.value&&X.ctrlKey&&X.type==="wheel"||!ae&&!d.value&&!ye&&X.type==="wheel"||!y.value&&(X.type==="mousedown"||X.type==="touchstart")||Array.isArray(y.value)&&!y.value.includes(X.button)&&(X.type==="mousedown"||X.type==="touchstart"))return!1;const E=Array.isArray(y.value)&&y.value.includes(X.button)||!X.button||X.button<=1;return(!X.ctrlKey||X.type==="wheel")&&E})});function B(O,K){return K===2&&Array.isArray(O)&&O.includes(2)}function W(O,K){return O.x!==K.x&&!isNaN(K.x)||O.y!==K.y&&!isNaN(K.y)||O.zoom!==K.k&&!isNaN(K.k)}function te(O){return{x:O.x,y:O.y,zoom:O.k}}function $(){if(!ee.value)return;const{width:O,height:K}=jt(ee.value);(O===0||K===0)&&m.error(new fe(ce.MISSING_VIEWPORT_DIMENSIONS)),l.value.width=O||500,l.value.height=K||500}function Y(O,K){return O.target.closest(`.${K}`)}return(O,K)=>(a.openBlock(),a.createElementBlock(a.Fragment,null,[(a.openBlock(),a.createElementBlock("div",{ref_key:"viewportEl",ref:ee,key:`viewport-${a.unref(t)}`,class:"vue-flow__viewport vue-flow__container"},[a.createVNode(Tc,{"is-selecting":a.unref(F),class:a.normalizeClass({connecting:!!a.unref(k),dragging:a.unref(D),draggable:!!a.unref(y)})},{default:a.withCtx(()=>[a.createVNode(Uc,null,{default:a.withCtx(()=>[a.renderSlot(O.$slots,"zoom-pane")]),_:3})]),_:3},8,["is-selecting","class"])])),a.renderSlot(O.$slots,"default")],64))}}),Kc=["id"],qc=["id"],jc=["id"],Jc={name:"A11yDescriptions",compatConfig:{MODE:3}},Qc=a.defineComponent({...Jc,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=ue(),i={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"};return(r,l)=>(a.openBlock(),a.createElementBlock(a.Fragment,null,[a.createElementVNode("div",{id:`${a.unref(Pi)}-${a.unref(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+a.toDisplayString(a.unref(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Kc),a.createElementVNode("div",{id:`${a.unref(Oi)}-${a.unref(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,qc),a.unref(n)?a.createCommentVNode("",!0):(a.openBlock(),a.createElementBlock("div",{key:0,id:`${a.unref(fs)}-${a.unref(t)}`,"aria-live":"assertive","aria-atomic":"true",style:i},a.toDisplayString(a.unref(o)),9,jc))],64))}}),ed={name:"VueFlow",compatConfig:{MODE:3}},td=a.defineComponent({...ed,props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:null,isValidConnection:{type:Function,default:void 0},deleteKeyCode:{type:[Boolean,String,Function],default:void 0},selectionKeyCode:{type:[Boolean,String,Function],default:void 0},multiSelectionKeyCode:{type:[Boolean,String,Function],default:void 0},zoomActivationKeyCode:{type:[Boolean,String,Function],default:void 0},panActivationKeyCode:{type:[Boolean,String,Function],default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:Boolean,default:void 0},minZoom:null,maxZoom:null,defaultViewport:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:null,edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null,elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},__experimentalFeatures:null},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","error","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=at(o,"modelValue",n),r=at(o,"nodes",n),l=at(o,"edges",n),{vueFlowRef:u,hooks:s,getNodeTypes:c,getEdgeTypes:d,...h}=ue(o),p=Cc({modelValue:i,nodes:r,edges:l},o,{vueFlowRef:u,hooks:s,getNodeTypes:c,getEdgeTypes:d,...h});Rs(n,s);const y=a.ref();return a.provide(rn,a.useSlots()),a.onUnmounted(()=>{p()}),a.onMounted(()=>{u.value=y.value}),t({vueFlowRef:u,hooks:s,getNodeTypes:c,getEdgeTypes:d,...h}),(g,f)=>(a.openBlock(),a.createElementBlock("div",{ref_key:"el",ref:y,class:"vue-flow"},[a.createVNode(Wc,null,{nodes:a.withCtx(()=>[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(Object.keys(a.unref(c)),_=>a.renderSlot(g.$slots,`node-${_}`)),256))]),edges:a.withCtx(()=>[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(Object.keys(a.unref(d)),_=>a.renderSlot(g.$slots,`edge-${_}`)),256))]),"connection-name":a.withCtx(()=>[a.renderSlot(g.$slots,"connection-line")]),"zoom-pane":a.withCtx(()=>[a.renderSlot(g.$slots,"zoom-pane")]),default:a.withCtx(()=>[a.renderSlot(g.$slots,"default")]),_:3}),a.createVNode(Qc)],512))}}),nd={name:"Panel",compatConfig:{MODE:3}},od=a.defineComponent({...nd,props:{position:null},setup(e){const t=e,{userSelectionActive:n}=ue(),o=a.computed(()=>`${t.position}`.split("-"));return(i,r)=>(a.openBlock(),a.createElementBlock("div",{class:a.normalizeClass(["vue-flow__panel",a.unref(o)]),style:a.normalizeStyle({pointerEvents:a.unref(n)?"none":"all"})},[a.renderSlot(i.$slots,"default")],6))}});exports.BaseEdge=bt;exports.BezierEdge=Ki;exports.ConnectionLineType=Le;exports.ConnectionMode=Ae;exports.EdgeLabelRenderer=lc;exports.EdgeText=Zi;exports.ErrorCode=ce;exports.GlobalVueFlowStorage=Ge;exports.Handle=yt;exports.MarkerType=Gt;exports.NodeIdInjection=to;exports.PanOnScrollMode=gt;exports.Panel=od;exports.PanelPosition=Bi;exports.Position=j;exports.SelectionMode=qt;exports.SimpleBezierEdge=qi;exports.SmoothStepEdge=lo;exports.StepEdge=ji;exports.StraightEdge=Ji;exports.VueFlow=td;exports.VueFlowError=fe;exports.VueFlowInjection=Rn;exports.addEdge=vs;exports.applyChanges=mt;exports.applyEdgeChanges=_s;exports.applyNodeChanges=Es;exports.clamp=ze;exports.connectionExists=qn;exports.defaultEdgeTypes=er;exports.defaultNodeTypes=Qi;exports.getBezierEdgeCenter=oo;exports.getBezierPath=io;exports.getBoundsofRects=xs;exports.getConnectedEdges=Et;exports.getIncomers=ms;exports.getMarkerId=Ie;exports.getNodesInside=Jn;exports.getOutgoers=ps;exports.getRectOfNodes=en;exports.getSimpleBezierPath=ro;exports.getSimpleEdgeCenter=no;exports.getSmoothStepPath=Xt;exports.getStraightPath=Wi;exports.getTransformForBounds=pt;exports.graphPosToZoomedPos=jn;exports.isEdge=_e;exports.isGraphEdge=Di;exports.isGraphNode=Fe;exports.isNode=Xe;exports.pointToRendererPoint=Qt;exports.rendererPointToPoint=jn;exports.updateEdge=ys;exports.useEdge=yc;exports.useGetPointerPosition=nr;exports.useHandle=uo;exports.useNode=or;exports.useVueFlow=ue;exports.useZoomPanHelper=Mc;
