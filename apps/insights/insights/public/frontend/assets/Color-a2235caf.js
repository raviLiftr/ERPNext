import{C as b}from"./colors-b352916e.js";import{_ as V,M as m,v as i,x as o,O as u,B as d,L as g,H as f,N as r,A as c,F as p,E as C,C as v,aC as x,G as k}from"./frappe-ui-24524c82.js";const w={name:"Color",props:{label:String,modelValue:[String,Array],options:Array,inputClass:String,placeholder:String,autofocus:Boolean,multiple:Boolean,max:Number},emits:["focus","update:modelValue"],mounted(){this.autofocus&&this.focus()},methods:{focus(){this.$refs.input&&this.$refs.input.focus&&this.$refs.input.focus()},setColorValue(e){this.multiple&&this.max&&this.value.length>=this.max||this.isValidColor(e)&&this.triggerChange(e)},isValidColor(e){return e.startsWith("#")||(e="#"+e),!!/^#[0-9A-F]{6}$/i.test(e)},triggerChange(e){e===""&&(e=null),this.multiple?this.$emit("update:modelValue",[...this.modelValue,e]):this.$emit("update:modelValue",e)},isSelected(e){return this.multiple?this.value.includes(e):this.value===e},toggleColor(e){this.isSelected(e)?this.removeColor(e):this.setColorValue(e)},removeColor(e){if(this.multiple){const a=this.modelValue.filter(l=>l!==e);this.$emit("update:modelValue",a)}},resetColor(){this.$emit("update:modelValue",null)}},computed:{value:{get(){return this.multiple?(!this.modelValue&&this.$emit("update:modelValue",[]),this.modelValue||[]):Array.isArray(this.modelValue)?this.modelValue[0]:this.modelValue},set(e){this.setColorValue(e)}},colors(){return this.options||Object.values(b)},selectedColorLabel(){return!this.value||!this.modelValue?null:this.multiple?this.modelValue.length>1?`${this.modelValue.length} colors`:this.value[0]:this.value}}},S={key:0,class:"mb-1 text-sm text-gray-600"},A=["onClick"],B={class:"flex items-center"},L={key:0,class:"flex items-center space-x-2"},F={class:"flex -space-x-2 overflow-hidden"},N={key:1,class:"text-gray-500"},O={class:"mt-1 w-fit rounded border bg-white p-3 pt-2 text-center shadow-md"},z={class:"inline-grid grid-cols-5 gap-3 border-b border-none"},H=r("div",{class:"col-span-5 text-left text-sm uppercase tracking-wide text-gray-600"}," Select Color ",-1),M=["onClick"],P=r("div",{class:"col-span-5 text-left text-sm uppercase tracking-wide text-gray-600"}," Hex ",-1);function j(e,a,l,E,I,t){const h=m("FeatherIcon"),y=m("Popover");return i(),o("div",null,[l.label?(i(),o("div",S,u(l.label),1)):d("",!0),g(y,{placement:"bottom-start",class:"w-full"},{target:f(({togglePopover:s})=>[r("div",{tabindex:"0",class:c([l.inputClass,"form-input relative block w-full items-center rounded border-gray-400 bg-gray-100 placeholder-gray-500 focus:outline-none"]),onClick:n=>s(),readonly:""},[r("div",B,[!l.multiple&&t.value||l.multiple&&t.value.length>0?(i(),o("div",L,[r("div",F,[(i(!0),o(p,null,C(l.multiple&&t.value.length>0?t.value:[t.value],(n,_)=>(i(),o("div",{key:_,class:"h-4 w-4 rounded-full",style:v({backgroundColor:n})},null,4))),128))]),r("span",null,u(t.selectedColorLabel),1)])):(i(),o("span",N,u(l.placeholder||l.label),1)),t.selectedColorLabel?(i(),o("div",{key:2,class:"absolute inset-y-0 right-0 z-10 flex cursor-pointer items-center rounded p-1",onClick:a[0]||(a[0]=x(n=>t.resetColor(),["prevent","stop"]))},[g(h,{class:"h-4 w-4 text-gray-500 hover:text-gray-800",name:"x"})])):d("",!0)])],10,A)]),body:f(()=>[r("div",O,[r("div",null,[r("div",z,[H,(i(!0),o(p,null,C(t.colors,s=>(i(),o("div",{key:s,class:c(["flex h-5 w-5 cursor-pointer items-center justify-center rounded bg-opacity-50",[t.isSelected(s)?"bg-opacity-50 shadow":"bg-opacity-100"]]),style:v({backgroundColor:s}),onClick:n=>t.toggleColor(s)},[t.isSelected(s)?(i(),k(h,{key:0,class:"h-4 w-4 text-white",name:"check",onClick:x(n=>t.toggleColor(s),["prevent","stop"])},null,8,["onClick"])):d("",!0)],14,M))),128)),P,r("input",{ref:"input",type:"text",placeholder:"Custom Hex",class:c([l.inputClass,"col-span-5 -mt-1 flex h-7 items-center rounded border-0 bg-gray-100 px-3 text-base placeholder-gray-500 focus:outline-none"]),onChange:a[1]||(a[1]=s=>t.setColorValue(s.target.value))},null,34)])])])]),_:1})])}const R=V(w,[["render",j]]);export{R as C};
