var N=(a,c,e)=>new Promise((u,i)=>{var d=s=>{try{h(e.next(s))}catch(x){i(x)}},o=s=>{try{h(e.throw(s))}catch(x){i(x)}},h=s=>s.done?u(s.value):Promise.resolve(s.value).then(d,o);h((e=e.apply(a,c)).next())});import{P as U}from"./PageBreadcrumbs-e38fbd0a.js";import{u as S}from"./useDashboards-ef8a3602.js";import{g as q,a as z,u as A}from"./index-61e7aa99.js";import{M as v,v as r,G as k,H as p,N as t,O as b,A as E,aC as M,L as l,a5 as C,z as g,r as y,f as w,x as m,B as D,F as I,E as G,Y as O,aB as R}from"./frappe-ui-24524c82.js";import{P as Y}from"./plus-32532d21.js";import"./index-45270e13.js";const H={class:"flex h-full flex-1 flex-col rounded bg-white shadow"},J={class:"flex flex-1 flex-col p-4"},K={class:"flex flex-col space-y-3"},Q={class:"flex items-center justify-between"},W={class:"flex h-6 items-center"},X={class:"flex-shrink-0 text-xl font-medium text-gray-800"},Z={class:"flex items-end justify-between"},ee={class:"flex gap-2"},te={class:"flex h-6 items-center text-sm text-gray-600"},se={class:"flex h-6 items-center text-sm text-gray-600"},ae={class:"flex h-6 items-center text-sm text-gray-600"},oe={__name:"DashboardListCard",props:{dashboard:{type:Object,required:!0}},setup(a){const c=a,e=S();function u(){e.toggleLike(c.dashboard)}return(i,d)=>{const o=v("FeatherIcon"),h=v("router-link");return r(),k(h,{class:"flex w-full cursor-pointer",to:{name:"Dashboard",params:{name:a.dashboard.name}}},{default:p(()=>[t("div",H,[t("div",J,[t("div",K,[t("div",Q,[t("div",W,[t("div",X,b(a.dashboard.title),1),t("span",{class:E(["ml-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded hover:bg-gray-100",{"text-yellow-500":a.dashboard.is_favourite,"text-gray-600":!a.dashboard.is_favourite}]),onClick:d[0]||(d[0]=M(s=>u(),["prevent","stop"]))},b(a.dashboard.is_favourite?"★":"☆"),3)]),l(o,{name:"arrow-right",class:"h-4 w-4 text-gray-600"})]),t("div",Z,[t("div",ee,[t("div",te,[l(o,{name:"eye",class:"mr-1 h-4 w-4"}),C(" "+b(g(q)(a.dashboard.view_count)),1)]),t("div",se,[l(o,{name:"bar-chart-2",class:"mr-1 h-4 w-4"}),C(" "+b(a.dashboard.charts.length),1)])]),t("div",ae," Updated "+b(a.dashboard.modified_from_now),1)])])])])]),_:1},8,["to"])}}},le={class:"flex items-center"},re={class:"text-xl font-medium text-gray-700"},ne={key:0,class:"ml-auto flex items-center"},ie={class:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4"},de={class:"col-span-1"},ce={key:0,class:"w-full text-center text-gray-600"},$={__name:"DashboardListGroup",props:{title:{type:String,required:!0},dashboards:{type:Array,required:!0},enableSearch:{type:Boolean,default:!1}},setup(a){const c=a,e=y(""),u=w(()=>e.value?c.dashboards.filter(i=>i.title.toLowerCase().includes(e.value.toLowerCase())):c.dashboards);return(i,d)=>{const o=v("Badge"),h=v("Input");return r(),m("div",null,[t("div",le,[t("div",re,b(a.title),1),l(o,{variant:"outline",label:String(a.dashboards.length),class:"ml-2"},null,8,["label"]),a.enableSearch?(r(),m("div",ne,[l(h,{ref:"searchInput",modelValue:e.value,"onUpdate:modelValue":d[0]||(d[0]=s=>e.value=s),iconLeft:"search",placeholder:"Search..."},null,8,["modelValue"])])):D("",!0)]),t("div",ie,[(r(!0),m(I,null,G(u.value,s=>(r(),m("div",de,[(r(),k(oe,{key:s.id,dashboard:s},null,8,["dashboard"]))]))),256)),e.value&&u.value.length===0?(r(),m("div",ce," No dashboards found. ")):D("",!0)])])}}},ue={class:"sticky top-0 z-10 flex items-center justify-between bg-white px-5 py-2.5"},he={class:"space-x-2.5"},fe={class:"flex flex-1 space-y-4 overflow-hidden bg-white px-5 py-2"},me={key:0,class:"flex flex-1 flex-col space-y-6 overflow-y-scroll p-1"},ve={key:1,class:"flex flex-1 flex-col items-center justify-center space-y-1"},be=t("div",{class:"text-base font-light text-gray-600"}," You haven't created any dashboards yet. ",-1),De={__name:"DashboardList",setup(a){const c=z().settings,e=S();e.reload();const u=w(()=>e.list.sort((f,n)=>f.title.toLowerCase()<n.title.toLowerCase()?-1:1)),i=w(()=>e.list.filter(f=>f.is_favourite)),d=w(()=>e.list.filter(f=>f.is_private)),o=y(!1);O().hash=="#new"&&(o.value=!0);const s=y(""),x=R();function j(){return N(this,null,function*(){const f=yield e.create(s.value);o.value=!1,s.value="",x.push(`/dashboard/${f}`)})}const F=y({title:"Dashboards"});return A(F),(f,n)=>{var B,L;const V=v("Button"),P=v("Input"),T=v("Dialog");return r(),m(I,null,[t("header",ue,[l(U,{class:"h-7",items:[{label:"Dashboards"}]}),t("div",he,[l(V,{label:"New Dashboard",variant:"solid",onClick:n[0]||(n[0]=_=>o.value=!0)},{prefix:p(()=>[l(g(Y),{class:"h-4 w-4"})]),_:1})])]),t("div",fe,[(L=(B=g(e))==null?void 0:B.list)!=null&&L.length?(r(),m("div",me,[i.value.length>0?(r(),k($,{key:0,dashboards:i.value,title:"Favorites"},null,8,["dashboards"])):D("",!0),g(c).enable_permissions?(r(),k($,{key:1,dashboards:d.value,title:"Private"},null,8,["dashboards"])):D("",!0),l($,{dashboards:u.value,title:"All",enableSearch:!0},null,8,["dashboards"])])):(r(),m("div",ve,[be,t("div",{class:"cursor-pointer text-sm font-light text-blue-500 hover:underline",onClick:n[1]||(n[1]=_=>o.value=!0)}," Create a new dashboard ")]))]),l(T,{options:{title:"New Dashboard"},modelValue:o.value,"onUpdate:modelValue":n[3]||(n[3]=_=>o.value=_)},{"body-content":p(()=>[l(P,{type:"text",label:"Title",placeholder:"Enter a suitable title...",modelValue:s.value,"onUpdate:modelValue":n[2]||(n[2]=_=>s.value=_)},null,8,["modelValue"])]),actions:p(()=>[l(V,{class:"w-full",variant:"solid",onClick:j,loading:g(e).creating},{default:p(()=>[C(" Create ")]),_:1},8,["loading"])]),_:1},8,["modelValue"])],64)}}};export{De as default};
