var za=Object.defineProperty,Ra=Object.defineProperties;var Va=Object.getOwnPropertyDescriptors;var Wt=Object.getOwnPropertySymbols;var bo=Object.prototype.hasOwnProperty,xo=Object.prototype.propertyIsEnumerable;var pt=Math.pow,yo=(e,t,n)=>t in e?za(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t)=>{for(var n in t||(t={}))bo.call(t,n)&&yo(e,n,t[n]);if(Wt)for(var n of Wt(t))xo.call(t,n)&&yo(e,n,t[n]);return e},fe=(e,t)=>Ra(e,Va(t));var Pt=(e,t)=>{var n={};for(var o in e)bo.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Wt)for(var o of Wt(e))t.indexOf(o)<0&&xo.call(e,o)&&(n[o]=e[o]);return n};var gt=(e,t,n)=>new Promise((o,r)=>{var a=u=>{try{i(n.next(u))}catch(s){r(s)}},l=u=>{try{i(n.throw(u))}catch(s){r(s)}},i=u=>u.done?o(u.value):Promise.resolve(u.value).then(a,l);i((n=n.apply(e,t)).next())});import{P as Ya}from"./PageBreadcrumbs-e38fbd0a.js";import{f as Ha,h as La,i as Fa,j as Xa}from"./index-61e7aa99.js";import{k as xe,r as pe,f as se,aG as vr,v as oe,x as ce,y as Pe,z as T,A as lt,i as Be,e as mr,w as ye,D as je,aM as Ga,q as Qe,L as we,H as Ie,F as Me,E as it,g as yr,o as rn,l as _e,ab as br,aN as xr,p as Ua,aO as ja,N as be,C as ze,B as ke,G as Le,W as Za,a as _r,s as _o,O as ut,b as wr,d as qa,ac as bn,a5 as Er,Z as Sr,I as Wa,n as Ke,u as Nr,X as ge,M as St,m as xt,aP as kr,a1 as Ka,a8 as Ja,a9 as Qa}from"./frappe-ui-24524c82.js";import{u as el}from"./index-45270e13.js";import{u as Cr}from"./useDataSourceTable-f88aea74.js";import{u as tl}from"./useDataSource-327864e5.js";import"./cacheStore-8d74b582.js";const nl=Ha("GripIcon",[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"19",cy:"5",r:"1",key:"w8mnmm"}],["circle",{cx:"5",cy:"5",r:"1",key:"lttvr7"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}],["circle",{cx:"19",cy:"19",r:"1",key:"shf9b7"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]]);function Ut(e){return yr()?(rn(e),!0):!1}function he(e){return typeof e=="function"?e():T(e)}const Mr=typeof window<"u",ol=e=>typeof e<"u",Ir=()=>{};function rl(e,t){function n(...o){return new Promise((r,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(a)})}return n}const Tr=e=>e();function al(e=Tr){const t=pe(!0);function n(){t.value=!1}function o(){t.value=!0}const r=(...a)=>{t.value&&e(...a)};return{isActive:br(t),pause:n,resume:o,eventFilter:r}}function wo(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function cn(...e){if(e.length!==1)return _e(...e);const t=e[0];return typeof t=="function"?br(xr(()=>({get:t,set:Ir}))):pe(t)}var ll=Object.defineProperty,il=Object.defineProperties,ul=Object.getOwnPropertyDescriptors,Eo=Object.getOwnPropertySymbols,sl=Object.prototype.hasOwnProperty,cl=Object.prototype.propertyIsEnumerable,So=(e,t,n)=>t in e?ll(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dl=(e,t)=>{for(var n in t||(t={}))sl.call(t,n)&&So(e,n,t[n]);if(Eo)for(var n of Eo(t))cl.call(t,n)&&So(e,n,t[n]);return e},fl=(e,t)=>il(e,ul(t));function hl(e){if(!wr(e))return qa(e);const t=Array.isArray(e.value)?new Array(e.value.length):{};for(const n in e.value)t[n]=xr(()=>({get(){return e.value[n]},set(o){if(Array.isArray(e.value)){const r=[...e.value];r[n]=o,e.value=r}else{const r=fl(dl({},e.value),{[n]:o});Object.setPrototypeOf(r,e.value),e.value=r}}}));return t}function Hn(e,t=!1){function n(p,{flush:f="sync",deep:g=!1,timeout:_,throwOnTimeout:d}={}){let m=null;const h=[new Promise(v=>{m=ye(e,E=>{p(E)!==t&&(m==null||m(),v(E))},{flush:f,deep:g,immediate:!0})})];return _!=null&&h.push(wo(_,d).then(()=>he(e)).finally(()=>m==null?void 0:m())),Promise.race(h)}function o(p,f){if(!wr(p))return n(E=>E===p,f);const{flush:g="sync",deep:_=!1,timeout:d,throwOnTimeout:m}=f!=null?f:{};let h=null;const v=[new Promise(E=>{h=ye([e,p],([w,k])=>{t!==(w===k)&&(h==null||h(),E(w))},{flush:g,deep:_,immediate:!0})})];return d!=null&&v.push(wo(d,m).then(()=>he(e)).finally(()=>(h==null||h(),he(e)))),Promise.race(v)}function r(p){return n(f=>!!f,p)}function a(p){return o(null,p)}function l(p){return o(void 0,p)}function i(p){return n(Number.isNaN,p)}function u(p,f){return n(g=>{const _=Array.from(g);return _.includes(p)||_.includes(he(p))},f)}function s(p){return c(1,p)}function c(p=1,f){let g=-1;return n(()=>(g+=1,g>=p),f)}return Array.isArray(he(e))?{toMatch:n,toContains:u,changed:s,changedTimes:c,get not(){return Hn(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:a,toBeNaN:i,toBeUndefined:l,changed:s,changedTimes:c,get not(){return Hn(e,!t)}}}function Je(e){return Hn(e)}var No=Object.getOwnPropertySymbols,pl=Object.prototype.hasOwnProperty,gl=Object.prototype.propertyIsEnumerable,vl=(e,t)=>{var n={};for(var o in e)pl.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&No)for(var o of No(e))t.indexOf(o)<0&&gl.call(e,o)&&(n[o]=e[o]);return n};function ml(e,t,n={}){const o=n,{eventFilter:r=Tr}=o,a=vl(o,["eventFilter"]);return ye(e,rl(r,t),a)}var yl=Object.defineProperty,bl=Object.defineProperties,xl=Object.getOwnPropertyDescriptors,dn=Object.getOwnPropertySymbols,Or=Object.prototype.hasOwnProperty,Pr=Object.prototype.propertyIsEnumerable,ko=(e,t,n)=>t in e?yl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_l=(e,t)=>{for(var n in t||(t={}))Or.call(t,n)&&ko(e,n,t[n]);if(dn)for(var n of dn(t))Pr.call(t,n)&&ko(e,n,t[n]);return e},wl=(e,t)=>bl(e,xl(t)),El=(e,t)=>{var n={};for(var o in e)Or.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&dn)for(var o of dn(e))t.indexOf(o)<0&&Pr.call(e,o)&&(n[o]=e[o]);return n};function vt(e,t,n={}){const o=n,{eventFilter:r}=o,a=El(o,["eventFilter"]),{eventFilter:l,pause:i,resume:u,isActive:s}=al(r);return{stop:ml(e,t,wl(_l({},a),{eventFilter:l})),pause:i,resume:u,isActive:s}}function Ln(e){var t;const n=he(e);return(t=n==null?void 0:n.$el)!=null?t:n}const no=Mr?window:void 0;function oo(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=no):[t,n,o,r]=e,!t)return Ir;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],l=()=>{a.forEach(c=>c()),a.length=0},i=(c,p,f,g)=>(c.addEventListener(p,f,g),()=>c.removeEventListener(p,f,g)),u=ye(()=>[Ln(t),he(r)],([c,p])=>{l(),c&&a.push(...n.flatMap(f=>o.map(g=>i(c,f,g,p))))},{immediate:!0,flush:"post"}),s=()=>{u(),l()};return Ut(s),s}function Sl(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Co(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=no,eventName:a="keydown",passive:l=!1,dedupe:i=!1}=o,u=Sl(t);return oo(r,a,s=>{s.repeat&&he(i)||u(s)&&n(s)},l)}function Nl(){const e=pe(!1);return bn()&&Qe(()=>{e.value=!0}),e}function kl(e){const t=Nl();return se(()=>(t.value,!!e()))}function Cl(e){return JSON.parse(JSON.stringify(e))}var Mo=Object.getOwnPropertySymbols,Ml=Object.prototype.hasOwnProperty,Il=Object.prototype.propertyIsEnumerable,Tl=(e,t)=>{var n={};for(var o in e)Ml.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Mo)for(var o of Mo(e))t.indexOf(o)<0&&Il.call(e,o)&&(n[o]=e[o]);return n};function Ol(e,t,n={}){const o=n,{window:r=no}=o,a=Tl(o,["window"]);let l;const i=kl(()=>r&&"ResizeObserver"in r),u=()=>{l&&(l.disconnect(),l=void 0)},s=se(()=>Array.isArray(e)?e.map(f=>Ln(f)):[Ln(e)]),c=ye(s,f=>{if(u(),i.value&&r){l=new ResizeObserver(t);for(const g of f)g&&l.observe(g,a)}},{immediate:!0,flush:"post",deep:!0}),p=()=>{u(),c()};return Ut(p),{isSupported:i,stop:p}}function zt(e,t,n,o={}){var r,a,l;const{clone:i=!1,passive:u=!1,eventName:s,deep:c=!1,defaultValue:p,shouldEmit:f}=o,g=bn(),_=n||(g==null?void 0:g.emit)||((r=g==null?void 0:g.$emit)==null?void 0:r.bind(g))||((l=(a=g==null?void 0:g.proxy)==null?void 0:a.$emit)==null?void 0:l.bind(g==null?void 0:g.proxy));let d=s;t||(t="modelValue"),d=s||d||`update:${t.toString()}`;const m=E=>i?typeof i=="function"?i(E):Cl(E):E,h=()=>ol(e[t])?m(e[t]):p,v=E=>{f?f(E)&&_(d,E):_(d,E)};if(u){const E=h(),w=pe(E);return ye(()=>e[t],k=>w.value=m(k)),ye(w,k=>{(k!==e[t]||c)&&v(k)},{deep:c}),w}else return se({get(){return h()},set(E){v(E)}})}var Pl={value:()=>{}};function xn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new an(n)}function an(e){this._=e}function Dl(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}an.prototype=xn.prototype={constructor:an,on:function(e,t){var n=this._,o=Dl(e+"",n),r,a=-1,l=o.length;if(arguments.length<2){for(;++a<l;)if((r=(e=o[a]).type)&&(r=$l(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(r=(e=o[a]).type)n[r]=Io(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Io(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new an(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,a;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,r=a.length;o<r;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,a=o.length;r<a;++r)o[r].value.apply(t,n)}};function $l(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Io(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Pl,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Fn="http://www.w3.org/1999/xhtml";const To={svg:"http://www.w3.org/2000/svg",xhtml:Fn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _n(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),To.hasOwnProperty(t)?{space:To[t],local:e}:e}function Al(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Fn&&t.documentElement.namespaceURI===Fn?t.createElement(e):t.createElementNS(n,e)}}function Bl(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Dr(e){var t=_n(e);return(t.local?Bl:Al)(t)}function zl(){}function ro(e){return e==null?zl:function(){return this.querySelector(e)}}function Rl(e){typeof e!="function"&&(e=ro(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var a=t[r],l=a.length,i=o[r]=new Array(l),u,s,c=0;c<l;++c)(u=a[c])&&(s=e.call(u,u.__data__,c,a))&&("__data__"in u&&(s.__data__=u.__data__),i[c]=s);return new Oe(o,this._parents)}function Vl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Yl(){return[]}function $r(e){return e==null?Yl:function(){return this.querySelectorAll(e)}}function Hl(e){return function(){return Vl(e.apply(this,arguments))}}function Ll(e){typeof e=="function"?e=Hl(e):e=$r(e);for(var t=this._groups,n=t.length,o=[],r=[],a=0;a<n;++a)for(var l=t[a],i=l.length,u,s=0;s<i;++s)(u=l[s])&&(o.push(e.call(u,u.__data__,s,l)),r.push(u));return new Oe(o,r)}function Ar(e){return function(){return this.matches(e)}}function Br(e){return function(t){return t.matches(e)}}var Fl=Array.prototype.find;function Xl(e){return function(){return Fl.call(this.children,e)}}function Gl(){return this.firstElementChild}function Ul(e){return this.select(e==null?Gl:Xl(typeof e=="function"?e:Br(e)))}var jl=Array.prototype.filter;function Zl(){return Array.from(this.children)}function ql(e){return function(){return jl.call(this.children,e)}}function Wl(e){return this.selectAll(e==null?Zl:ql(typeof e=="function"?e:Br(e)))}function Kl(e){typeof e!="function"&&(e=Ar(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var a=t[r],l=a.length,i=o[r]=[],u,s=0;s<l;++s)(u=a[s])&&e.call(u,u.__data__,s,a)&&i.push(u);return new Oe(o,this._parents)}function zr(e){return new Array(e.length)}function Jl(){return new Oe(this._enter||this._groups.map(zr),this._parents)}function fn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}fn.prototype={constructor:fn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ql(e){return function(){return e}}function ei(e,t,n,o,r,a){for(var l=0,i,u=t.length,s=a.length;l<s;++l)(i=t[l])?(i.__data__=a[l],o[l]=i):n[l]=new fn(e,a[l]);for(;l<u;++l)(i=t[l])&&(r[l]=i)}function ti(e,t,n,o,r,a,l){var i,u,s=new Map,c=t.length,p=a.length,f=new Array(c),g;for(i=0;i<c;++i)(u=t[i])&&(f[i]=g=l.call(u,u.__data__,i,t)+"",s.has(g)?r[i]=u:s.set(g,u));for(i=0;i<p;++i)g=l.call(e,a[i],i,a)+"",(u=s.get(g))?(o[i]=u,u.__data__=a[i],s.delete(g)):n[i]=new fn(e,a[i]);for(i=0;i<c;++i)(u=t[i])&&s.get(f[i])===u&&(r[i]=u)}function ni(e){return e.__data__}function oi(e,t){if(!arguments.length)return Array.from(this,ni);var n=t?ti:ei,o=this._parents,r=this._groups;typeof e!="function"&&(e=Ql(e));for(var a=r.length,l=new Array(a),i=new Array(a),u=new Array(a),s=0;s<a;++s){var c=o[s],p=r[s],f=p.length,g=ri(e.call(c,c&&c.__data__,s,o)),_=g.length,d=i[s]=new Array(_),m=l[s]=new Array(_),h=u[s]=new Array(f);n(c,p,d,m,h,g,t);for(var v=0,E=0,w,k;v<_;++v)if(w=d[v]){for(v>=E&&(E=v+1);!(k=m[E])&&++E<_;);w._next=k||null}}return l=new Oe(l,o),l._enter=i,l._exit=u,l}function ri(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ai(){return new Oe(this._exit||this._groups.map(zr),this._parents)}function li(e,t,n){var o=this.enter(),r=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?a.remove():n(a),o&&r?o.merge(r).order():r}function ii(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,a=o.length,l=Math.min(r,a),i=new Array(r),u=0;u<l;++u)for(var s=n[u],c=o[u],p=s.length,f=i[u]=new Array(p),g,_=0;_<p;++_)(g=s[_]||c[_])&&(f[_]=g);for(;u<r;++u)i[u]=n[u];return new Oe(i,this._parents)}function ui(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,a=o[r],l;--r>=0;)(l=o[r])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function si(e){e||(e=ci);function t(p,f){return p&&f?e(p.__data__,f.__data__):!p-!f}for(var n=this._groups,o=n.length,r=new Array(o),a=0;a<o;++a){for(var l=n[a],i=l.length,u=r[a]=new Array(i),s,c=0;c<i;++c)(s=l[c])&&(u[c]=s);u.sort(t)}return new Oe(r,this._parents).order()}function ci(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function di(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function fi(){return Array.from(this)}function hi(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,a=o.length;r<a;++r){var l=o[r];if(l)return l}return null}function pi(){let e=0;for(const t of this)++e;return e}function gi(){return!this.node()}function vi(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],a=0,l=r.length,i;a<l;++a)(i=r[a])&&e.call(i,i.__data__,a,r);return this}function mi(e){return function(){this.removeAttribute(e)}}function yi(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bi(e,t){return function(){this.setAttribute(e,t)}}function xi(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function _i(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function wi(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ei(e,t){var n=_n(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?yi:mi:typeof t=="function"?n.local?wi:_i:n.local?xi:bi)(n,t))}function Rr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Si(e){return function(){this.style.removeProperty(e)}}function Ni(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ki(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Ci(e,t,n){return arguments.length>1?this.each((t==null?Si:typeof t=="function"?ki:Ni)(e,t,n!=null?n:"")):Nt(this.node(),e)}function Nt(e,t){return e.style.getPropertyValue(t)||Rr(e).getComputedStyle(e,null).getPropertyValue(t)}function Mi(e){return function(){delete this[e]}}function Ii(e,t){return function(){this[e]=t}}function Ti(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Oi(e,t){return arguments.length>1?this.each((t==null?Mi:typeof t=="function"?Ti:Ii)(e,t)):this.node()[e]}function Vr(e){return e.trim().split(/^|\s+/)}function ao(e){return e.classList||new Yr(e)}function Yr(e){this._node=e,this._names=Vr(e.getAttribute("class")||"")}Yr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Hr(e,t){for(var n=ao(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function Lr(e,t){for(var n=ao(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Pi(e){return function(){Hr(this,e)}}function Di(e){return function(){Lr(this,e)}}function $i(e,t){return function(){(t.apply(this,arguments)?Hr:Lr)(this,e)}}function Ai(e,t){var n=Vr(e+"");if(arguments.length<2){for(var o=ao(this.node()),r=-1,a=n.length;++r<a;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?$i:t?Pi:Di)(n,t))}function Bi(){this.textContent=""}function zi(e){return function(){this.textContent=e}}function Ri(e){return function(){var t=e.apply(this,arguments);this.textContent=t!=null?t:""}}function Vi(e){return arguments.length?this.each(e==null?Bi:(typeof e=="function"?Ri:zi)(e)):this.node().textContent}function Yi(){this.innerHTML=""}function Hi(e){return function(){this.innerHTML=e}}function Li(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t!=null?t:""}}function Fi(e){return arguments.length?this.each(e==null?Yi:(typeof e=="function"?Li:Hi)(e)):this.node().innerHTML}function Xi(){this.nextSibling&&this.parentNode.appendChild(this)}function Gi(){return this.each(Xi)}function Ui(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ji(){return this.each(Ui)}function Zi(e){var t=typeof e=="function"?e:Dr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function qi(){return null}function Wi(e,t){var n=typeof e=="function"?e:Dr(e),o=t==null?qi:typeof t=="function"?t:ro(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Ki(){var e=this.parentNode;e&&e.removeChild(this)}function Ji(){return this.each(Ki)}function Qi(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function tu(e){return this.select(e?eu:Qi)}function nu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ou(e){return function(t){e.call(this,t,this.__data__)}}function ru(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function au(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,a;n<r;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function lu(e,t,n){return function(){var o=this.__on,r,a=ou(t);if(o){for(var l=0,i=o.length;l<i;++l)if((r=o[l]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=t;return}}this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(r):this.__on=[r]}}function iu(e,t,n){var o=ru(e+""),r,a=o.length,l;if(arguments.length<2){var i=this.node().__on;if(i){for(var u=0,s=i.length,c;u<s;++u)for(r=0,c=i[u];r<a;++r)if((l=o[r]).type===c.type&&l.name===c.name)return c.value}return}for(i=t?lu:au,r=0;r<a;++r)this.each(i(o[r],t,n));return this}function Fr(e,t,n){var o=Rr(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function uu(e,t){return function(){return Fr(this,e,t)}}function su(e,t){return function(){return Fr(this,e,t.apply(this,arguments))}}function cu(e,t){return this.each((typeof t=="function"?su:uu)(e,t))}function*du(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,a=o.length,l;r<a;++r)(l=o[r])&&(yield l)}var Xr=[null];function Oe(e,t){this._groups=e,this._parents=t}function jt(){return new Oe([[document.documentElement]],Xr)}function fu(){return this}Oe.prototype=jt.prototype={constructor:Oe,select:Rl,selectAll:Ll,selectChild:Ul,selectChildren:Wl,filter:Kl,data:oi,enter:Jl,exit:ai,join:li,merge:ii,selection:fu,order:ui,sort:si,call:di,nodes:fi,node:hi,size:pi,empty:gi,each:vi,attr:Ei,style:Ci,property:Oi,classed:Ai,text:Vi,html:Fi,raise:Gi,lower:ji,append:Zi,insert:Wi,remove:Ji,clone:tu,datum:nu,on:iu,dispatch:cu,[Symbol.iterator]:du};function $e(e){return typeof e=="string"?new Oe([[document.querySelector(e)]],[document.documentElement]):new Oe([[e]],Xr)}function hu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ve(e,t){if(e=hu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const pu={passive:!1},Yt={capture:!0,passive:!1};function Tn(e){e.stopImmediatePropagation()}function _t(e){e.preventDefault(),e.stopImmediatePropagation()}function Gr(e){var t=e.document.documentElement,n=$e(e).on("dragstart.drag",_t,Yt);"onselectstart"in t?n.on("selectstart.drag",_t,Yt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ur(e,t){var n=e.document.documentElement,o=$e(e).on("dragstart.drag",null);t&&(o.on("click.drag",_t,Yt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Kt=e=>()=>e;function Xn(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:a,x:l,y:i,dx:u,dy:s,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:i,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:c}})}Xn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function gu(e){return!e.ctrlKey&&!e.button}function vu(){return this.parentNode}function mu(e,t){return t!=null?t:{x:e.x,y:e.y}}function yu(){return navigator.maxTouchPoints||"ontouchstart"in this}function bu(){var e=gu,t=vu,n=mu,o=yu,r={},a=xn("start","drag","end"),l=0,i,u,s,c,p=0;function f(w){w.on("mousedown.drag",g).filter(o).on("touchstart.drag",m).on("touchmove.drag",h,pu).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(w,k){if(!(c||!e.call(this,w,k))){var y=E(this,t.call(this,w,k),w,k,"mouse");y&&($e(w.view).on("mousemove.drag",_,Yt).on("mouseup.drag",d,Yt),Gr(w.view),Tn(w),s=!1,i=w.clientX,u=w.clientY,y("start",w))}}function _(w){if(_t(w),!s){var k=w.clientX-i,y=w.clientY-u;s=k*k+y*y>p}r.mouse("drag",w)}function d(w){$e(w.view).on("mousemove.drag mouseup.drag",null),Ur(w.view,s),_t(w),r.mouse("end",w)}function m(w,k){if(e.call(this,w,k)){var y=w.changedTouches,D=t.call(this,w,k),X=y.length,H,A;for(H=0;H<X;++H)(A=E(this,D,w,k,y[H].identifier,y[H]))&&(Tn(w),A("start",w,y[H]))}}function h(w){var k=w.changedTouches,y=k.length,D,X;for(D=0;D<y;++D)(X=r[k[D].identifier])&&(_t(w),X("drag",w,k[D]))}function v(w){var k=w.changedTouches,y=k.length,D,X;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),D=0;D<y;++D)(X=r[k[D].identifier])&&(Tn(w),X("end",w,k[D]))}function E(w,k,y,D,X,H){var A=a.copy(),q=Ve(H||y,k),Q,U,x;if((x=n.call(w,new Xn("beforestart",{sourceEvent:y,target:f,identifier:X,active:l,x:q[0],y:q[1],dx:0,dy:0,dispatch:A}),D))!=null)return Q=x.x-q[0]||0,U=x.y-q[1]||0,function M(N,O,L){var z=q,I;switch(N){case"start":r[X]=M,I=l++;break;case"end":delete r[X],--l;case"drag":q=Ve(L||O,k),I=l;break}A.call(N,w,new Xn(N,{sourceEvent:O,subject:x,target:f,identifier:X,active:I,x:q[0]+Q,y:q[1]+U,dx:q[0]-z[0],dy:q[1]-z[1],dispatch:A}),D)}}return f.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Kt(!!w),f):e},f.container=function(w){return arguments.length?(t=typeof w=="function"?w:Kt(w),f):t},f.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Kt(w),f):n},f.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:Kt(!!w),f):o},f.on=function(){var w=a.on.apply(a,arguments);return w===a?f:w},f.clickDistance=function(w){return arguments.length?(p=(w=+w)*w,f):Math.sqrt(p)},f}function lo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function jr(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Zt(){}var Ht=.7,hn=1/Ht,wt="\\s*([+-]?\\d+)\\s*",Lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",He="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xu=/^#([0-9a-f]{3,8})$/,_u=new RegExp(`^rgb\\(${wt},${wt},${wt}\\)$`),wu=new RegExp(`^rgb\\(${He},${He},${He}\\)$`),Eu=new RegExp(`^rgba\\(${wt},${wt},${wt},${Lt}\\)$`),Su=new RegExp(`^rgba\\(${He},${He},${He},${Lt}\\)$`),Nu=new RegExp(`^hsl\\(${Lt},${He},${He}\\)$`),ku=new RegExp(`^hsla\\(${Lt},${He},${He},${Lt}\\)$`),Oo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lo(Zt,Ft,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Po,formatHex:Po,formatHex8:Cu,formatHsl:Mu,formatRgb:Do,toString:Do});function Po(){return this.rgb().formatHex()}function Cu(){return this.rgb().formatHex8()}function Mu(){return Zr(this).formatHsl()}function Do(){return this.rgb().formatRgb()}function Ft(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=xu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$o(t):n===3?new Te(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Jt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Jt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_u.exec(e))?new Te(t[1],t[2],t[3],1):(t=wu.exec(e))?new Te(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Eu.exec(e))?Jt(t[1],t[2],t[3],t[4]):(t=Su.exec(e))?Jt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Nu.exec(e))?zo(t[1],t[2]/100,t[3]/100,1):(t=ku.exec(e))?zo(t[1],t[2]/100,t[3]/100,t[4]):Oo.hasOwnProperty(e)?$o(Oo[e]):e==="transparent"?new Te(NaN,NaN,NaN,0):null}function $o(e){return new Te(e>>16&255,e>>8&255,e&255,1)}function Jt(e,t,n,o){return o<=0&&(e=t=n=NaN),new Te(e,t,n,o)}function Iu(e){return e instanceof Zt||(e=Ft(e)),e?(e=e.rgb(),new Te(e.r,e.g,e.b,e.opacity)):new Te}function Gn(e,t,n,o){return arguments.length===1?Iu(e):new Te(e,t,n,o!=null?o:1)}function Te(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}lo(Te,Gn,jr(Zt,{brighter(e){return e=e==null?hn:Math.pow(hn,e),new Te(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ht:Math.pow(Ht,e),new Te(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Te(ot(this.r),ot(this.g),ot(this.b),pn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ao,formatHex:Ao,formatHex8:Tu,formatRgb:Bo,toString:Bo}));function Ao(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}`}function Tu(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}${tt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bo(){const e=pn(this.opacity);return`${e===1?"rgb(":"rgba("}${ot(this.r)}, ${ot(this.g)}, ${ot(this.b)}${e===1?")":`, ${e})`}`}function pn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ot(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tt(e){return e=ot(e),(e<16?"0":"")+e.toString(16)}function zo(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ae(e,t,n,o)}function Zr(e){if(e instanceof Ae)return new Ae(e.h,e.s,e.l,e.opacity);if(e instanceof Zt||(e=Ft(e)),!e)return new Ae;if(e instanceof Ae)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),a=Math.max(t,n,o),l=NaN,i=a-r,u=(a+r)/2;return i?(t===a?l=(n-o)/i+(n<o)*6:n===a?l=(o-t)/i+2:l=(t-n)/i+4,i/=u<.5?a+r:2-a-r,l*=60):i=u>0&&u<1?0:l,new Ae(l,i,u,e.opacity)}function Ou(e,t,n,o){return arguments.length===1?Zr(e):new Ae(e,t,n,o!=null?o:1)}function Ae(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}lo(Ae,Ou,jr(Zt,{brighter(e){return e=e==null?hn:Math.pow(hn,e),new Ae(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ht:Math.pow(Ht,e),new Ae(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new Te(On(e>=240?e-240:e+120,r,o),On(e,r,o),On(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Ae(Ro(this.h),Qt(this.s),Qt(this.l),pn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=pn(this.opacity);return`${e===1?"hsl(":"hsla("}${Ro(this.h)}, ${Qt(this.s)*100}%, ${Qt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ro(e){return e=(e||0)%360,e<0?e+360:e}function Qt(e){return Math.max(0,Math.min(1,e||0))}function On(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const qr=e=>()=>e;function Pu(e,t){return function(n){return e+n*t}}function Du(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function $u(e){return(e=+e)==1?Wr:function(t,n){return n-t?Du(t,n,e):qr(isNaN(t)?n:t)}}function Wr(e,t){var n=t-e;return n?Pu(e,n):qr(isNaN(e)?t:e)}const Vo=function e(t){var n=$u(t);function o(r,a){var l=n((r=Gn(r)).r,(a=Gn(a)).r),i=n(r.g,a.g),u=n(r.b,a.b),s=Wr(r.opacity,a.opacity);return function(c){return r.r=l(c),r.g=i(c),r.b=u(c),r.opacity=s(c),r+""}}return o.gamma=e,o}(1);function We(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Un=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pn=new RegExp(Un.source,"g");function Au(e){return function(){return e}}function Bu(e){return function(t){return e(t)+""}}function zu(e,t){var n=Un.lastIndex=Pn.lastIndex=0,o,r,a,l=-1,i=[],u=[];for(e=e+"",t=t+"";(o=Un.exec(e))&&(r=Pn.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),i[l]?i[l]+=a:i[++l]=a),(o=o[0])===(r=r[0])?i[l]?i[l]+=r:i[++l]=r:(i[++l]=null,u.push({i:l,x:We(o,r)})),n=Pn.lastIndex;return n<t.length&&(a=t.slice(n),i[l]?i[l]+=a:i[++l]=a),i.length<2?u[0]?Bu(u[0].x):Au(t):(t=u.length,function(s){for(var c=0,p;c<t;++c)i[(p=u[c]).i]=p.x(s);return i.join("")})}var Yo=180/Math.PI,Kr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Jr(e,t,n,o,r,a){var l,i,u;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(i=Math.sqrt(n*n+o*o))&&(n/=i,o/=i,u/=i),e*o<t*n&&(e=-e,t=-t,u=-u,l=-l),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*Yo,skewX:Math.atan(u)*Yo,scaleX:l,scaleY:i}}var en;function Ru(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Kr:Jr(t.a,t.b,t.c,t.d,t.e,t.f)}function Vu(e){return e==null||(en||(en=document.createElementNS("http://www.w3.org/2000/svg","g")),en.setAttribute("transform",e),!(e=en.transform.baseVal.consolidate()))?Kr:(e=e.matrix,Jr(e.a,e.b,e.c,e.d,e.e,e.f))}function Qr(e,t,n,o){function r(s){return s.length?s.pop()+" ":""}function a(s,c,p,f,g,_){if(s!==p||c!==f){var d=g.push("translate(",null,t,null,n);_.push({i:d-4,x:We(s,p)},{i:d-2,x:We(c,f)})}else(p||f)&&g.push("translate("+p+t+f+n)}function l(s,c,p,f){s!==c?(s-c>180?c+=360:c-s>180&&(s+=360),f.push({i:p.push(r(p)+"rotate(",null,o)-2,x:We(s,c)})):c&&p.push(r(p)+"rotate("+c+o)}function i(s,c,p,f){s!==c?f.push({i:p.push(r(p)+"skewX(",null,o)-2,x:We(s,c)}):c&&p.push(r(p)+"skewX("+c+o)}function u(s,c,p,f,g,_){if(s!==p||c!==f){var d=g.push(r(g)+"scale(",null,",",null,")");_.push({i:d-4,x:We(s,p)},{i:d-2,x:We(c,f)})}else(p!==1||f!==1)&&g.push(r(g)+"scale("+p+","+f+")")}return function(s,c){var p=[],f=[];return s=e(s),c=e(c),a(s.translateX,s.translateY,c.translateX,c.translateY,p,f),l(s.rotate,c.rotate,p,f),i(s.skewX,c.skewX,p,f),u(s.scaleX,s.scaleY,c.scaleX,c.scaleY,p,f),s=c=null,function(g){for(var _=-1,d=f.length,m;++_<d;)p[(m=f[_]).i]=m.x(g);return p.join("")}}}var Yu=Qr(Ru,"px, ","px)","deg)"),Hu=Qr(Vu,", ",")",")"),Lu=1e-12;function Ho(e){return((e=Math.exp(e))+1/e)/2}function Fu(e){return((e=Math.exp(e))-1/e)/2}function Xu(e){return((e=Math.exp(2*e))-1)/(e+1)}const Gu=function e(t,n,o){function r(a,l){var i=a[0],u=a[1],s=a[2],c=l[0],p=l[1],f=l[2],g=c-i,_=p-u,d=g*g+_*_,m,h;if(d<Lu)h=Math.log(f/s)/t,m=function(D){return[i+D*g,u+D*_,s*Math.exp(t*D*h)]};else{var v=Math.sqrt(d),E=(f*f-s*s+o*d)/(2*s*n*v),w=(f*f-s*s-o*d)/(2*f*n*v),k=Math.log(Math.sqrt(E*E+1)-E),y=Math.log(Math.sqrt(w*w+1)-w);h=(y-k)/t,m=function(D){var X=D*h,H=Ho(k),A=s/(n*v)*(H*Xu(t*X+k)-Fu(k));return[i+A*g,u+A*_,s*H/Ho(t*X+k)]}}return m.duration=h*1e3*t/Math.SQRT2,m}return r.rho=function(a){var l=Math.max(.001,+a),i=l*l,u=i*i;return e(l,i,u)},r}(Math.SQRT2,2,4);var kt=0,At=0,Dt=0,ea=1e3,gn,Bt,vn=0,st=0,wn=0,Xt=typeof performance=="object"&&performance.now?performance:Date,ta=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function io(){return st||(ta(Uu),st=Xt.now()+wn)}function Uu(){st=0}function mn(){this._call=this._time=this._next=null}mn.prototype=na.prototype={constructor:mn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?io():+n)+(t==null?0:+t),!this._next&&Bt!==this&&(Bt?Bt._next=this:gn=this,Bt=this),this._call=e,this._time=n,jn()},stop:function(){this._call&&(this._call=null,this._time=1/0,jn())}};function na(e,t,n){var o=new mn;return o.restart(e,t,n),o}function ju(){io(),++kt;for(var e=gn,t;e;)(t=st-e._time)>=0&&e._call.call(void 0,t),e=e._next;--kt}function Lo(){st=(vn=Xt.now())+wn,kt=At=0;try{ju()}finally{kt=0,qu(),st=0}}function Zu(){var e=Xt.now(),t=e-vn;t>ea&&(wn-=t,vn=e)}function qu(){for(var e,t=gn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:gn=n);Bt=e,jn(o)}function jn(e){if(!kt){At&&(At=clearTimeout(At));var t=e-st;t>24?(e<1/0&&(At=setTimeout(Lo,e-Xt.now()-wn)),Dt&&(Dt=clearInterval(Dt))):(Dt||(vn=Xt.now(),Dt=setInterval(Zu,ea)),kt=1,ta(Lo))}}function Fo(e,t,n){var o=new mn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Wu=xn("start","end","cancel","interrupt"),Ku=[],oa=0,Xo=1,Zn=2,ln=3,Go=4,qn=5,un=6;function En(e,t,n,o,r,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Ju(e,n,{name:t,index:o,group:r,on:Wu,tween:Ku,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:oa})}function uo(e,t){var n=Re(e,t);if(n.state>oa)throw new Error("too late; already scheduled");return n}function Fe(e,t){var n=Re(e,t);if(n.state>ln)throw new Error("too late; already running");return n}function Re(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ju(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=na(a,0,n.time);function a(s){n.state=Xo,n.timer.restart(l,n.delay,n.time),n.delay<=s&&l(s-n.delay)}function l(s){var c,p,f,g;if(n.state!==Xo)return u();for(c in o)if(g=o[c],g.name===n.name){if(g.state===ln)return Fo(l);g.state===Go?(g.state=un,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete o[c]):+c<t&&(g.state=un,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete o[c])}if(Fo(function(){n.state===ln&&(n.state=Go,n.timer.restart(i,n.delay,n.time),i(s))}),n.state=Zn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Zn){for(n.state=ln,r=new Array(f=n.tween.length),c=0,p=-1;c<f;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++p]=g);r.length=p+1}}function i(s){for(var c=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(u),n.state=qn,1),p=-1,f=r.length;++p<f;)r[p].call(e,c);n.state===qn&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=un,n.timer.stop(),delete o[t];for(var s in o)return;delete e.__transition}}function sn(e,t){var n=e.__transition,o,r,a=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((o=n[l]).name!==t){a=!1;continue}r=o.state>Zn&&o.state<qn,o.state=un,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[l]}a&&delete e.__transition}}function Qu(e){return this.each(function(){sn(this,e)})}function es(e,t){var n,o;return function(){var r=Fe(this,e),a=r.tween;if(a!==n){o=n=a;for(var l=0,i=o.length;l<i;++l)if(o[l].name===t){o=o.slice(),o.splice(l,1);break}}r.tween=o}}function ts(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var a=Fe(this,e),l=a.tween;if(l!==o){r=(o=l).slice();for(var i={name:t,value:n},u=0,s=r.length;u<s;++u)if(r[u].name===t){r[u]=i;break}u===s&&r.push(i)}a.tween=r}}function ns(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Re(this.node(),n).tween,r=0,a=o.length,l;r<a;++r)if((l=o[r]).name===e)return l.value;return null}return this.each((t==null?es:ts)(n,e,t))}function so(e,t,n){var o=e._id;return e.each(function(){var r=Fe(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Re(r,o).value[t]}}function ra(e,t){var n;return(typeof t=="number"?We:t instanceof Ft?Vo:(n=Ft(t))?(t=n,Vo):zu)(e,t)}function os(e){return function(){this.removeAttribute(e)}}function rs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function as(e,t,n){var o,r=n+"",a;return function(){var l=this.getAttribute(e);return l===r?null:l===o?a:a=t(o=l,n)}}function ls(e,t,n){var o,r=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===r?null:l===o?a:a=t(o=l,n)}}function is(e,t,n){var o,r,a;return function(){var l,i=n(this),u;return i==null?void this.removeAttribute(e):(l=this.getAttribute(e),u=i+"",l===u?null:l===o&&u===r?a:(r=u,a=t(o=l,i)))}}function us(e,t,n){var o,r,a;return function(){var l,i=n(this),u;return i==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),u=i+"",l===u?null:l===o&&u===r?a:(r=u,a=t(o=l,i)))}}function ss(e,t){var n=_n(e),o=n==="transform"?Hu:ra;return this.attrTween(e,typeof t=="function"?(n.local?us:is)(n,o,so(this,"attr."+e,t)):t==null?(n.local?rs:os)(n):(n.local?ls:as)(n,o,t))}function cs(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ds(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function fs(e,t){var n,o;function r(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&ds(e,a)),n}return r._value=t,r}function hs(e,t){var n,o;function r(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&cs(e,a)),n}return r._value=t,r}function ps(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=_n(e);return this.tween(n,(o.local?fs:hs)(o,t))}function gs(e,t){return function(){uo(this,e).delay=+t.apply(this,arguments)}}function vs(e,t){return t=+t,function(){uo(this,e).delay=t}}function ms(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gs:vs)(t,e)):Re(this.node(),t).delay}function ys(e,t){return function(){Fe(this,e).duration=+t.apply(this,arguments)}}function bs(e,t){return t=+t,function(){Fe(this,e).duration=t}}function xs(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ys:bs)(t,e)):Re(this.node(),t).duration}function _s(e,t){if(typeof t!="function")throw new Error;return function(){Fe(this,e).ease=t}}function ws(e){var t=this._id;return arguments.length?this.each(_s(t,e)):Re(this.node(),t).ease}function Es(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Fe(this,e).ease=n}}function Ss(e){if(typeof e!="function")throw new Error;return this.each(Es(this._id,e))}function Ns(e){typeof e!="function"&&(e=Ar(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var a=t[r],l=a.length,i=o[r]=[],u,s=0;s<l;++s)(u=a[s])&&e.call(u,u.__data__,s,a)&&i.push(u);return new Ze(o,this._parents,this._name,this._id)}function ks(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,a=Math.min(o,r),l=new Array(o),i=0;i<a;++i)for(var u=t[i],s=n[i],c=u.length,p=l[i]=new Array(c),f,g=0;g<c;++g)(f=u[g]||s[g])&&(p[g]=f);for(;i<o;++i)l[i]=t[i];return new Ze(l,this._parents,this._name,this._id)}function Cs(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ms(e,t,n){var o,r,a=Cs(t)?uo:Fe;return function(){var l=a(this,e),i=l.on;i!==o&&(r=(o=i).copy()).on(t,n),l.on=r}}function Is(e,t){var n=this._id;return arguments.length<2?Re(this.node(),n).on.on(e):this.each(Ms(n,e,t))}function Ts(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Os(){return this.on("end.remove",Ts(this._id))}function Ps(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ro(e));for(var o=this._groups,r=o.length,a=new Array(r),l=0;l<r;++l)for(var i=o[l],u=i.length,s=a[l]=new Array(u),c,p,f=0;f<u;++f)(c=i[f])&&(p=e.call(c,c.__data__,f,i))&&("__data__"in c&&(p.__data__=c.__data__),s[f]=p,En(s[f],t,n,f,s,Re(c,n)));return new Ze(a,this._parents,t,n)}function Ds(e){var t=this._name,n=this._id;typeof e!="function"&&(e=$r(e));for(var o=this._groups,r=o.length,a=[],l=[],i=0;i<r;++i)for(var u=o[i],s=u.length,c,p=0;p<s;++p)if(c=u[p]){for(var f=e.call(c,c.__data__,p,u),g,_=Re(c,n),d=0,m=f.length;d<m;++d)(g=f[d])&&En(g,t,n,d,f,_);a.push(f),l.push(c)}return new Ze(a,l,t,n)}var $s=jt.prototype.constructor;function As(){return new $s(this._groups,this._parents)}function Bs(e,t){var n,o,r;return function(){var a=Nt(this,e),l=(this.style.removeProperty(e),Nt(this,e));return a===l?null:a===n&&l===o?r:r=t(n=a,o=l)}}function aa(e){return function(){this.style.removeProperty(e)}}function zs(e,t,n){var o,r=n+"",a;return function(){var l=Nt(this,e);return l===r?null:l===o?a:a=t(o=l,n)}}function Rs(e,t,n){var o,r,a;return function(){var l=Nt(this,e),i=n(this),u=i+"";return i==null&&(u=i=(this.style.removeProperty(e),Nt(this,e))),l===u?null:l===o&&u===r?a:(r=u,a=t(o=l,i))}}function Vs(e,t){var n,o,r,a="style."+t,l="end."+a,i;return function(){var u=Fe(this,e),s=u.on,c=u.value[a]==null?i||(i=aa(t)):void 0;(s!==n||r!==c)&&(o=(n=s).copy()).on(l,r=c),u.on=o}}function Ys(e,t,n){var o=(e+="")=="transform"?Yu:ra;return t==null?this.styleTween(e,Bs(e,o)).on("end.style."+e,aa(e)):typeof t=="function"?this.styleTween(e,Rs(e,o,so(this,"style."+e,t))).each(Vs(this._id,e)):this.styleTween(e,zs(e,o,t),n).on("end.style."+e,null)}function Hs(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Ls(e,t,n){var o,r;function a(){var l=t.apply(this,arguments);return l!==r&&(o=(r=l)&&Hs(e,l,n)),o}return a._value=t,a}function Fs(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Ls(e,t,n!=null?n:""))}function Xs(e){return function(){this.textContent=e}}function Gs(e){return function(){var t=e(this);this.textContent=t!=null?t:""}}function Us(e){return this.tween("text",typeof e=="function"?Gs(so(this,"text",e)):Xs(e==null?"":e+""))}function js(e){return function(t){this.textContent=e.call(this,t)}}function Zs(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&js(r)),t}return o._value=e,o}function qs(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Zs(e))}function Ws(){for(var e=this._name,t=this._id,n=la(),o=this._groups,r=o.length,a=0;a<r;++a)for(var l=o[a],i=l.length,u,s=0;s<i;++s)if(u=l[s]){var c=Re(u,t);En(u,e,n,s,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ze(o,this._parents,e,n)}function Ks(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(a,l){var i={value:l},u={value:function(){--r===0&&a()}};n.each(function(){var s=Fe(this,o),c=s.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(i),t._.interrupt.push(i),t._.end.push(u)),s.on=t}),r===0&&a()})}var Js=0;function Ze(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function la(){return++Js}var Xe=jt.prototype;Ze.prototype={constructor:Ze,select:Ps,selectAll:Ds,selectChild:Xe.selectChild,selectChildren:Xe.selectChildren,filter:Ns,merge:ks,selection:As,transition:Ws,call:Xe.call,nodes:Xe.nodes,node:Xe.node,size:Xe.size,empty:Xe.empty,each:Xe.each,on:Is,attr:ss,attrTween:ps,style:Ys,styleTween:Fs,text:Us,textTween:qs,remove:Os,tween:ns,delay:ms,duration:xs,ease:ws,easeVarying:Ss,end:Ks,[Symbol.iterator]:Xe[Symbol.iterator]};function Qs(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ec={time:null,delay:0,duration:250,ease:Qs};function tc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function nc(e){var t,n;e instanceof Ze?(t=e._id,e=e._name):(t=la(),(n=ec).time=io(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,a=0;a<r;++a)for(var l=o[a],i=l.length,u,s=0;s<i;++s)(u=l[s])&&En(u,e,t,s,l,n||tc(u,t));return new Ze(o,this._parents,e,t)}jt.prototype.interrupt=Qu;jt.prototype.transition=nc;const tn=e=>()=>e;function oc(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Ue(e,t,n){this.k=e,this.x=t,this.y=n}Ue.prototype={constructor:Ue,scale:function(e){return e===1?this:new Ue(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ue(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ct=new Ue(1,0,0);Ue.prototype;function Dn(e){e.stopImmediatePropagation()}function $t(e){e.preventDefault(),e.stopImmediatePropagation()}function rc(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ac(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Uo(){return this.__zoom||Ct}function lc(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ic(){return navigator.maxTouchPoints||"ontouchstart"in this}function uc(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),l>a?(a+l)/2:Math.min(0,a)||Math.max(0,l))}function sc(){var e=rc,t=ac,n=uc,o=lc,r=ic,a=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],i=250,u=Gu,s=xn("start","zoom","end"),c,p,f,g=500,_=150,d=0,m=10;function h(x){x.property("__zoom",Uo).on("wheel.zoom",X,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",A).filter(r).on("touchstart.zoom",q).on("touchmove.zoom",Q).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}h.transform=function(x,M,N,O){var L=x.selection?x.selection():x;L.property("__zoom",Uo),x!==L?k(x,M,N,O):L.interrupt().each(function(){y(this,arguments).event(O).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},h.scaleBy=function(x,M,N,O){h.scaleTo(x,function(){var L=this.__zoom.k,z=typeof M=="function"?M.apply(this,arguments):M;return L*z},N,O)},h.scaleTo=function(x,M,N,O){h.transform(x,function(){var L=t.apply(this,arguments),z=this.__zoom,I=N==null?w(L):typeof N=="function"?N.apply(this,arguments):N,Z=z.invert(I),te=typeof M=="function"?M.apply(this,arguments):M;return n(E(v(z,te),I,Z),L,l)},N,O)},h.translateBy=function(x,M,N,O){h.transform(x,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),l)},null,O)},h.translateTo=function(x,M,N,O,L){h.transform(x,function(){var z=t.apply(this,arguments),I=this.__zoom,Z=O==null?w(z):typeof O=="function"?O.apply(this,arguments):O;return n(Ct.translate(Z[0],Z[1]).scale(I.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof N=="function"?-N.apply(this,arguments):-N),z,l)},O,L)};function v(x,M){return M=Math.max(a[0],Math.min(a[1],M)),M===x.k?x:new Ue(M,x.x,x.y)}function E(x,M,N){var O=M[0]-N[0]*x.k,L=M[1]-N[1]*x.k;return O===x.x&&L===x.y?x:new Ue(x.k,O,L)}function w(x){return[(+x[0][0]+ +x[1][0])/2,(+x[0][1]+ +x[1][1])/2]}function k(x,M,N,O){x.on("start.zoom",function(){y(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){y(this,arguments).event(O).end()}).tween("zoom",function(){var L=this,z=arguments,I=y(L,z).event(O),Z=t.apply(L,z),te=N==null?w(Z):typeof N=="function"?N.apply(L,z):N,G=Math.max(Z[1][0]-Z[0][0],Z[1][1]-Z[0][1]),J=L.__zoom,C=typeof M=="function"?M.apply(L,z):M,ee=u(J.invert(te).concat(G/J.k),C.invert(te).concat(G/C.k));return function(K){if(K===1)K=C;else{var re=ee(K),ae=G/re[2];K=new Ue(ae,te[0]-re[0]*ae,te[1]-re[1]*ae)}I.zoom(null,K)}})}function y(x,M,N){return!N&&x.__zooming||new D(x,M)}function D(x,M){this.that=x,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(x,M),this.taps=0}D.prototype={event:function(x){return x&&(this.sourceEvent=x),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(x,M){return this.mouse&&x!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&x!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&x!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(x){var M=$e(this.that).datum();s.call(x,this.that,new oc(x,{sourceEvent:this.sourceEvent,target:h,type:x,transform:this.that.__zoom,dispatch:s}),M)}};function X(x,...M){if(!e.apply(this,arguments))return;var N=y(this,M).event(x),O=this.__zoom,L=Math.max(a[0],Math.min(a[1],O.k*Math.pow(2,o.apply(this,arguments)))),z=Ve(x);if(N.wheel)(N.mouse[0][0]!==z[0]||N.mouse[0][1]!==z[1])&&(N.mouse[1]=O.invert(N.mouse[0]=z)),clearTimeout(N.wheel);else{if(O.k===L)return;N.mouse=[z,O.invert(z)],sn(this),N.start()}$t(x),N.wheel=setTimeout(I,_),N.zoom("mouse",n(E(v(O,L),N.mouse[0],N.mouse[1]),N.extent,l));function I(){N.wheel=null,N.end()}}function H(x,...M){if(f||!e.apply(this,arguments))return;var N=x.currentTarget,O=y(this,M,!0).event(x),L=$e(x.view).on("mousemove.zoom",te,!0).on("mouseup.zoom",G,!0),z=Ve(x,N),I=x.clientX,Z=x.clientY;Gr(x.view),Dn(x),O.mouse=[z,this.__zoom.invert(z)],sn(this),O.start();function te(J){if($t(J),!O.moved){var C=J.clientX-I,ee=J.clientY-Z;O.moved=C*C+ee*ee>d}O.event(J).zoom("mouse",n(E(O.that.__zoom,O.mouse[0]=Ve(J,N),O.mouse[1]),O.extent,l))}function G(J){L.on("mousemove.zoom mouseup.zoom",null),Ur(J.view,O.moved),$t(J),O.event(J).end()}}function A(x,...M){if(e.apply(this,arguments)){var N=this.__zoom,O=Ve(x.changedTouches?x.changedTouches[0]:x,this),L=N.invert(O),z=N.k*(x.shiftKey?.5:2),I=n(E(v(N,z),O,L),t.apply(this,M),l);$t(x),i>0?$e(this).transition().duration(i).call(k,I,O,x):$e(this).call(h.transform,I,O,x)}}function q(x,...M){if(e.apply(this,arguments)){var N=x.touches,O=N.length,L=y(this,M,x.changedTouches.length===O).event(x),z,I,Z,te;for(Dn(x),I=0;I<O;++I)Z=N[I],te=Ve(Z,this),te=[te,this.__zoom.invert(te),Z.identifier],L.touch0?!L.touch1&&L.touch0[2]!==te[2]&&(L.touch1=te,L.taps=0):(L.touch0=te,z=!0,L.taps=1+!!c);c&&(c=clearTimeout(c)),z&&(L.taps<2&&(p=te[0],c=setTimeout(function(){c=null},g)),sn(this),L.start())}}function Q(x,...M){if(this.__zooming){var N=y(this,M).event(x),O=x.changedTouches,L=O.length,z,I,Z,te;for($t(x),z=0;z<L;++z)I=O[z],Z=Ve(I,this),N.touch0&&N.touch0[2]===I.identifier?N.touch0[0]=Z:N.touch1&&N.touch1[2]===I.identifier&&(N.touch1[0]=Z);if(I=N.that.__zoom,N.touch1){var G=N.touch0[0],J=N.touch0[1],C=N.touch1[0],ee=N.touch1[1],K=(K=C[0]-G[0])*K+(K=C[1]-G[1])*K,re=(re=ee[0]-J[0])*re+(re=ee[1]-J[1])*re;I=v(I,Math.sqrt(K/re)),Z=[(G[0]+C[0])/2,(G[1]+C[1])/2],te=[(J[0]+ee[0])/2,(J[1]+ee[1])/2]}else if(N.touch0)Z=N.touch0[0],te=N.touch0[1];else return;N.zoom("touch",n(E(I,Z,te),N.extent,l))}}function U(x,...M){if(this.__zooming){var N=y(this,M).event(x),O=x.changedTouches,L=O.length,z,I;for(Dn(x),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),z=0;z<L;++z)I=O[z],N.touch0&&N.touch0[2]===I.identifier?delete N.touch0:N.touch1&&N.touch1[2]===I.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(I=Ve(I,this),Math.hypot(p[0]-I[0],p[1]-I[1])<m)){var Z=$e(this).on("dblclick.zoom");Z&&Z.apply(this,arguments)}}}return h.wheelDelta=function(x){return arguments.length?(o=typeof x=="function"?x:tn(+x),h):o},h.filter=function(x){return arguments.length?(e=typeof x=="function"?x:tn(!!x),h):e},h.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:tn(!!x),h):r},h.extent=function(x){return arguments.length?(t=typeof x=="function"?x:tn([[+x[0][0],+x[0][1]],[+x[1][0],+x[1][1]]]),h):t},h.scaleExtent=function(x){return arguments.length?(a[0]=+x[0],a[1]=+x[1],h):[a[0],a[1]]},h.translateExtent=function(x){return arguments.length?(l[0][0]=+x[0][0],l[1][0]=+x[1][0],l[0][1]=+x[0][1],l[1][1]=+x[1][1],h):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},h.constrain=function(x){return arguments.length?(n=x,h):n},h.duration=function(x){return arguments.length?(i=+x,h):i},h.interpolate=function(x){return arguments.length?(u=x,h):u},h.on=function(){var x=s.on.apply(s,arguments);return x===s?h:x},h.clickDistance=function(x){return arguments.length?(d=(x=+x)*x,h):Math.sqrt(d)},h.tapDistance=function(x){return arguments.length?(m=+x,h):m},h}var W=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(W||{}),co=(e=>(e.Partial="partial",e.Full="full",e))(co||{}),mt=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(mt||{}),ct=(e=>(e.Strict="strict",e.Loose="loose",e))(ct||{}),Gt=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Gt||{}),Rt=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Rt||{});const ia="vue-flow__node-desc",ua="vue-flow__edge-desc",cc="vue-flow__aria-live",sa=["Enter"," ","Escape"],Et={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function jo(e){return fe(B({},e.computedPosition||{x:0,y:0}),{width:e.dimensions.width||0,height:e.dimensions.height||0})}function Wn(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Sn(e){return{width:e.offsetWidth,height:e.offsetHeight}}function dt(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function ca(e,t){return{x:dt(e.x,t[0][0],t[1][0]),y:dt(e.y,t[0][1],t[1][1])}}function Zo(e){const t=e.getRootNode(),n=mo();return"elementFromPoint"in t?t:n.document}function et(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function dc(e){return et(e)&&"sourceNode"in e&&"targetNode"in e}function rt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!et(e)}function yt(e){return rt(e)&&"computedPosition"in e}function fc(e){return!!e.width&&!!e.height&&!!e.x&&!!e.y}function hc(e,t={}){var o,r;let n=t;return yt(e)||(n=fe(B({type:(r=(o=e.type)!=null?o:t.type)!=null?r:"default",dimensions:xt({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:xt(B({z:0},e.position)),draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1},t),{data:me(e.data)?e.data:{},events:xt(me(e.events)?e.events:{})})),Object.assign({},n,e,{id:e.id.toString()})}function da(e,t={}){var r,a,l,i,u;const n=me(e.events)?e.events:t.events&&me(t.events)?t.events:{},o=me(e.data)?e.data:t.data&&me(t.data)?t.data:{};return t=dc(e)?t:fe(B({},t),{sourceHandle:(e.sourceHandle?e.sourceHandle.toString():void 0)||t.sourceHandle,targetHandle:(e.targetHandle?e.targetHandle.toString():void 0)||t.targetHandle,type:(a=(r=e.type)!=null?r:t.type)!=null?a:"default",source:e.source.toString()||t.source,target:e.target.toString()||t.target,updatable:(l=e.updatable)!=null?l:t.updatable,selectable:(i=e.selectable)!=null?i:t.selectable,focusable:(u=e.focusable)!=null?u:t.focusable,data:o,events:xt(n),label:(e.label&&!De(e.label)?xt(e.label):e.label)||t.label,interactionWidth:e.interactionWidth||t.interactionWidth}),Object.assign({},t,e,{id:e.id.toString()})}function fa(e,t,n,o){const r=De(e)?e:e.id,a=new Set,l=o==="source"?"target":"source";return n.forEach(i=>{i[l]===r&&a.add(i[o])}),t.filter(i=>a.has(i.id))}function pc(...e){if(e.length===3){const[r,a,l]=e;return fa(r,a,l,"target")}const[t,n]=e,o=De(t)?{id:t}:t;return n.filter(r=>et(r)&&r.source===o.id).map(r=>n.find(a=>rt(a)&&a.id===r.target))}function gc(...e){if(e.length===3){const[r,a,l]=e;return fa(r,a,l,"source")}const[t,n]=e,o=De(t)?{id:t}:t;return n.filter(r=>et(r)&&r.target===o.id).map(r=>n.find(a=>rt(a)&&a.id===r.source))}function ha({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t!=null?t:""}-${n}${o!=null?o:""}`}function vc(e,t){return t.some(n=>et(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function pa({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function Kn({x:e,y:t},{x:n,y:o,zoom:r},a,[l,i]){const u={x:(e-n)/r,y:(t-o)/r};return a?{x:l*Math.round(u.x/l),y:i*Math.round(u.y/i)}:u}function mc(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function ga({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function yc({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function va(e){const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:r={width:0,height:0}}={})=>mc(n,ga(B(B({},o),r))),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return yc(t)}function ma(e,t,{x:n,y:o,zoom:r}={x:0,y:0,zoom:1},a=!1,l=!1){const i={x:(t.x-n)/r,y:(t.y-o)/r,width:t.width/r,height:t.height/r};return e.filter(u=>{const{computedPosition:s={x:0,y:0},dimensions:c={width:0,height:0},selectable:p}=u;if(l&&!p)return!1;const f=fe(B({},s),{width:c.width||0,height:c.height||0}),g=Wn(i,f),_=typeof c.width>"u"||typeof c.height>"u"||c.width===0||c.height===0,d=a&&g>0,m=c.width*c.height;return _||d||g>=m})}function Nn(e,t){const n=new Set;return De(e)?n.add(e):e.length>=1&&e.forEach(o=>n.add(o.id)),t.filter(o=>n.has(o.source)||n.has(o.target))}function qo(e,t,n,o,r,a=.1,l={x:0,y:0}){var d,m;const i=t/(e.width*(1+a)),u=n/(e.height*(1+a)),s=Math.min(i,u),c=dt(s,o,r),p=e.x+e.width/2,f=e.y+e.height/2,g=t/2-p*c+((d=l.x)!=null?d:0),_=n/2-f*c+((m=l.y)!=null?m:0);return{x:g,y:_,zoom:c}}function bc(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function ya(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:ya(n,t):!1}function nt(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`}function Wo(e,t,n){return e<t?dt(Math.abs(e-t),1,50)/50:e>n?-dt(Math.abs(e-n),1,50)/50:0}function ba(e,t){const n=Wo(e.x,35,t.width-35)*20,o=Wo(e.y,35,t.height-35)*20;return[n,o]}function $n(e,t){var n,o;if(t){const r=e.position.x+e.dimensions.width-t.dimensions.width,a=e.position.y+e.dimensions.height-t.dimensions.height;if(r>0||a>0||e.position.x<0||e.position.y<0){let l={};if(Mt(t.style)?l=B({},t.style(t)):t.style&&(l=B({},t.style)),l.width=(n=l.width)!=null?n:`${t.dimensions.width}px`,l.height=(o=l.height)!=null?o:`${t.dimensions.height}px`,r>0)if(De(l.width)){const i=Number(l.width.replace("px",""));l.width=`${i+r}px`}else l.width+=r;if(a>0)if(De(l.height)){const i=Number(l.height.replace("px",""));l.height=`${i+a}px`}else l.height+=a;if(e.position.x<0){const i=Math.abs(e.position.x);if(t.position.x=t.position.x-i,De(l.width)){const u=Number(l.width.replace("px",""));l.width=`${u+i}px`}else l.width+=i;e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);if(t.position.y=t.position.y-i,De(l.height)){const u=Number(l.height.replace("px",""));l.height=`${u+i}px`}else l.height+=i;e.position.y=0}t.dimensions.width=Number(l.width.toString().replace("px","")),t.dimensions.height=Number(l.height.toString().replace("px","")),Mt(t.style)?t.style=i=>{const u=t.style;return B(B({},u(i)),l)}:t.style=B(B({},t.style),l)}}}function Ko(e,t){e.filter(o=>o.type==="add"||o.type==="remove").forEach(o=>{if(o.type==="add")t.findIndex(r=>r.id===o.item.id)===-1&&t.push(o.item);else if(o.type==="remove"){const r=t.findIndex(a=>a.id===o.id);r!==-1&&t.splice(r,1)}});const n=t.map(o=>o.id);return t.forEach(o=>{var r,a;const l=e.filter(i=>i.id===o.id);for(const i of l)switch(i.type){case"select":o.selected=i.selected;break;case"position":if(yt(o)&&(typeof i.position<"u"&&(o.position=i.position),typeof i.dragging<"u"&&(o.dragging=i.dragging),o.expandParent&&o.parentNode)){const u=t[n.indexOf(o.parentNode)];u&&yt(u)&&$n(o,u)}break;case"dimensions":if(yt(o)){if(typeof i.dimensions<"u"&&(o.dimensions=i.dimensions),typeof i.updateStyle<"u"&&(o.style=fe(B({},o.style||{}),{width:`${(r=i.dimensions)==null?void 0:r.width}px`,height:`${(a=i.dimensions)==null?void 0:a.height}px`})),typeof i.resizing<"u"&&(o.resizing=i.resizing),o.expandParent&&o.parentNode){const u=t[n.indexOf(o.parentNode)];u&&yt(u)&&(u.initialized?$n(o,u):Ke(()=>{$n(o,u)}))}o.initialized||(o.initialized=!0)}break}}),t}function Ge(e,t){return{id:e,type:"select",selected:t}}function Jo(e){return{item:e,type:"add"}}function Qo(e){return{id:e,type:"remove"}}function er(e,t,n){return{id:e,source:t,target:n,type:"remove"}}function An(e,t){return e.reduce((n,o)=>{let r=t.includes(o.id);me(o.selectable)&&!o.selectable&&(r=!1);const a=yt(o)?"changedNodes":"changedEdges";return!o.selected&&r?n[a].push(Ge(o.id,!0)):o.selected&&!r&&n[a].push(Ge(o.id,!1)),n},{changedNodes:[],changedEdges:[]})}function F(e=()=>{}){const t=new Set,n=()=>t.size>0;e&&t.add(e);const o=r=>{t.delete(r)};return{on:r=>{t.has(e)&&t.delete(e),t.add(r);const a=()=>o(r);return Ut(a),{off:a}},off:o,trigger:r=>Promise.all(Array.from(t).map(a=>a(r))),hasListeners:n}}function tr(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function xc(e,t,n,o,r){return e.filter(a=>(a.selected||a.id===r)&&(!a.parentNode||!ya(a,o))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var l,i;return xt({id:a.id,position:a.position||{x:0,y:0},distance:{x:n.x-((l=a.computedPosition)==null?void 0:l.x)||0,y:n.y-((i=a.computedPosition)==null?void 0:i.y)||0},from:a.computedPosition,extent:a.extent,parentNode:a.parentNode,dimensions:a.dimensions,expandParent:a.expandParent})})}function Bn({id:e,dragItems:t,findNode:n}){const o=t.reduce((r,a)=>{const l=n(a.id);return l&&r.push(l),r},[]);return[e?o.find(r=>r.id===e):o[0],o]}function xa(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function _c(e,t,n){const[o,r,a,l]=typeof e!="string"?xa(e.padding):[0,0,0,0];return n&&Ye(n.computedPosition.x)&&Ye(n.computedPosition.y)&&Ye(n.dimensions.width)&&Ye(n.dimensions.height)?[[n.computedPosition.x+l,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-r,n.computedPosition.y+n.dimensions.height-a]]:!1}function wc(e,t,n,o){let r=e.extent||n;if((r==="parent"||!Array.isArray(r)&&(r==null?void 0:r.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const a=_c(r,e,o);a&&(r=a)}else t(new Ne(Se.NODE_EXTENT_INVALID,e.id)),r=n;else if(Array.isArray(r)){const a=(o==null?void 0:o.computedPosition.x)||0,l=(o==null?void 0:o.computedPosition.y)||0;r=[[r[0][0]+a,r[0][1]+l],[r[1][0]+a,r[1][1]+l]]}else if(r!=="parent"&&r!=null&&r.range&&Array.isArray(r.range)){const[a,l,i,u]=xa(r.padding),s=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;r=[[r.range[0][0]+s+u,r.range[0][1]+c+a],[r.range[1][0]+s-l,r.range[1][1]+c-i]]}return r==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:r}function Ec({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function fo(e,t,n,o,r){const a=Ec(e.dimensions,wc(e,n,o,r)),l=ca(t,a);return{position:{x:l.x-((r==null?void 0:r.computedPosition.x)||0),y:l.y-((r==null?void 0:r.computedPosition.y)||0)},computedPosition:l}}function Jn(e,t,n){var i,u,s,c;const o=((i=n==null?void 0:n.x)!=null?i:0)+t.x,r=((u=n==null?void 0:n.y)!=null?u:0)+t.y,a=(s=n==null?void 0:n.width)!=null?s:t.width,l=(c=n==null?void 0:n.height)!=null?c:t.height;switch(e){case W.Top:return{x:o+a/2,y:r};case W.Right:return{x:o+a,y:r+l/2};case W.Bottom:return{x:o+a/2,y:r+l};case W.Left:return{x:o,y:r+l/2}}}function nr(e=[],t){return e.length?!t||e.length===1?e[0]:t&&e.find(n=>n.id===t)||null:null}function Sc(e,t,n,o,r,a){const l=Jn(n,B(B({},e.dimensions),e.computedPosition),t),i=Jn(a,B(B({},o.dimensions),o.computedPosition),r);return{sourceX:l.x,sourceY:l.y,targetX:i.x,targetY:i.y}}function Nc({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:a,width:l,height:i,viewport:u}){const s={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+a)};s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const c=ga({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:l/u.zoom,height:i/u.zoom}),p=Math.max(0,Math.min(c.x2,s.x2)-Math.max(c.x,s.x)),f=Math.max(0,Math.min(c.y2,s.y2)-Math.max(c.y,s.y));return Math.ceil(p*f)>0}function kc(e,t,n=!1){const o=Ye(e.zIndex);let r=o?e.zIndex:0;const a=t(e.source),l=t(e.target);return!a||!l?0:(n&&(r=o?e.zIndex:Math.max(a.computedPosition.z||0,l.computedPosition.z||0)),r)}var Se=(e=>(e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e))(Se||{});const or={MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`};class Ne extends Error{constructor(t,...n){var o;super((o=or[t])==null?void 0:o.call(or,...n)),this.code=t}}function ho(e){return"clientX"in e}function at(e,t){var i,u;var n,o;const r=ho(e),a=r?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,l=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:a-((i=t==null?void 0:t.left)!=null?i:0),y:l-((u=t==null?void 0:t.top)!=null?u:0)}}function De(e){return typeof e=="string"}function Mt(e){return typeof e=="function"}function zn(e){return typeof e=="boolean"}function Ye(e){return typeof e=="number"}const yn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function _a(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function Rn(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function rr(e,t,n,o){return(t[n]||[]).reduce((r,a)=>{var u,s;var l,i;return`${e.id}-${a.id}-${n}`!==o&&r.push({id:a.id||null,type:n,nodeId:e.id,x:((u=(l=e.computedPosition)==null?void 0:l.x)!=null?u:0)+a.x+a.width/2,y:((s=(i=e.computedPosition)==null?void 0:i.y)!=null?s:0)+a.y+a.height/2,width:a.width,height:a.height}),r},[])}function Cc(e,t,n,o,r,a){const{x:l,y:i}=at(e),u=t.elementsFromPoint(l,i).find(g=>g.classList.contains("vue-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const _=po(void 0,u),d=u.getAttribute("data-handleid"),m=a({nodeId:g,id:d,type:_});if(m)return{handle:{id:d,type:_,nodeId:g,x:n.x,y:n.y},validHandleResult:m}}}let s=[],c=1/0;if(r.forEach(g=>{const _=Math.sqrt(pt(g.x-n.x,2)+pt(g.y-n.y,2));if(_<=o){const d=a(g);_<=c&&(_<c?s=[{handle:g,validHandleResult:d}]:_===c&&s.push({handle:g,validHandleResult:d}),c=_)}}),!s.length)return{handle:null,validHandleResult:_a()};if(s.length===1)return s[0];const p=s.some(({validHandleResult:g})=>g.isValid),f=s.some(({handle:g})=>g.type==="target");return s.find(({handle:g,validHandleResult:_})=>f?g.type==="target":p?_.isValid:!0)||s[0]}function ar(e,t,n,o,r,a,l,i,u,s){const c=a==="target",p=i.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:f,y:g}=at(e),_=i.elementFromPoint(f,g),d=_!=null&&_.classList.contains("vue-flow__handle")?_:p,m=_a();if(d){m.handleDomNode=d;const h=po(void 0,d),v=d.getAttribute("data-nodeid"),E=d.getAttribute("data-handleid"),w=d.classList.contains("connectable"),k=d.classList.contains("connectableend"),y={source:c?v:o,sourceHandle:c?E:r,target:c?o:v,targetHandle:c?r:E};m.connection=y;const D=w&&k&&(n===ct.Strict?c&&h==="source"||!c&&h==="target":v!==o||E!==r);m.endHandle={nodeId:v,handleId:E,type:h},D&&(m.isValid=l(y,{edges:u,sourceNode:s(y.source),targetNode:s(y.target)}))}return m}function Mc({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((r,a)=>{const{handleBounds:l}=a;let i=[],u=[];return l&&(i=rr(a,l,"source",`${t}-${n}-${o}`),u=rr(a,l,"target",`${t}-${n}-${o}`)),r.push(...i,...u),r},[])}function po(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Ic(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const Tc=["production","prod"];function wa(e,...t){Tc.includes("production")||console.warn(`[Vue Flow]: ${e}`,...t)}function lr(e,t,n){const o=t.querySelectorAll(`.vue-flow__handle${e}`);if(!o||!o.length)return;const r=Array.from(o),a=t.getBoundingClientRect();return r.map(l=>{const i=l.getBoundingClientRect();return B({id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(i.left-a.left)/n,y:(i.top-a.top)/n},Sn(l))})}function Qn(e,t,n,o,r,a=!1,l){r.value=!1,e.selected?(a||e.selected&&t)&&(o([e]),Ke(()=>{l.blur()})):n([e])}function me(e){return typeof T(e)<"u"}function Oc(e,t,n){if(!e.source||!e.target)return n(new Ne(Se.EDGE_INVALID,e.id)),!1;let o;return et(e)?o=e:o=fe(B({},e),{id:ha(e)}),o=da(o),vc(o,t)?!1:o}function Pc(e,t,n,o,r,a){if(!t.source||!t.target)return a(new Ne(Se.EDGE_INVALID,e.id)),!1;const l=o(e.id);if(!l)return a(new Ne(Se.EDGE_NOT_FOUND,e.id)),!1;const c=e,{id:i}=c,u=Pt(c,["id"]),s=fe(B({},u),{id:r?ha(t):i,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle});return n.splice(n.indexOf(l),1,s),s}function ir(e,t,n,o){const r={},a=e.reduce((i,u)=>{if(!rt(u))return o(new Ne(Se.NODE_INVALID)),i;const s=hc(u,fe(B({},n(u.id)),{parentNode:u.parentNode}));return u.parentNode&&(r[u.parentNode]=!0),i.concat(s)},[]),l=[...a,...t];for(const i of a){const u=l.find(s=>s.id===i.parentNode);i.parentNode&&!u&&o(new Ne(Se.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||r[i.id])&&(r[i.id]&&(i.isParent=!0),u&&(u.isParent=!0))}return a}function Ea(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:r,nodes:a,nodeExtent:l,nodeDragThreshold:i,viewport:u,autoPanOnNodeDrag:s,nodesDraggable:c,panBy:p,findNode:f,multiSelectionActive:g,nodesSelectionActive:_,selectNodesOnDrag:d,removeSelectedElements:m,addSelectedNodes:h,updateNodePositions:v,emits:E}=Ee(),{onStart:w,onDrag:k,onStop:y,el:D,disabled:X,id:H,selectable:A,dragHandle:q}=e,Q=pe(!1);let U=[],x,M=null,N={x:void 0,y:void 0},O={x:0,y:0},L=null,z=!1,I=0,Z=!1;const te=Dd(),G=({x:C,y:ee})=>{N={x:C,y:ee};let K=!1;if(U=U.map(re=>{const ae={x:C-re.distance.x,y:ee-re.distance.y};n.value&&(ae.x=o.value[0]*Math.round(ae.x/o.value[0]),ae.y=o.value[1]*Math.round(ae.y/o.value[1]));const{computedPosition:j}=fo(re,ae,E.error,l.value,re.parentNode?f(re.parentNode):void 0);return K=K||re.position.x!==j.x||re.position.y!==j.y,re.position=j,re}),!!K&&(v(U,!0,!0),Q.value=!0,L)){const[re,ae]=Bn({id:H,dragItems:U,findNode:f});k({event:L,node:re,nodes:ae})}},J=()=>{var K,re;if(!M)return;const[C,ee]=ba(O,M);if(C!==0||ee!==0){const ae={x:((K=N.x)!=null?K:0)-C/u.value.zoom,y:((re=N.y)!=null?re:0)-ee/u.value.zoom};p({x:C,y:ee})&&G(ae)}I=requestAnimationFrame(J)};return ye([()=>he(X),D],([C,ee])=>{if(ee){const K=$e(ee);if(C)K.on(".drag",null);else{const re=ae=>{z=!0;const j=f(H);!d.value&&!g.value&&j&&(j.selected||m()),j&&he(A)&&d.value&&Qn(j,g.value,h,m,_,!1,ee);const ie=te(ae);if(N=ie,U=xc(a.value,c.value,ie,f,H),U.length){const[ve,b]=Bn({id:H,dragItems:U,findNode:f});w({event:ae.sourceEvent,node:ve,nodes:b})}};x=bu().on("start",ae=>{var j;i.value===0&&re(ae),N=te(ae),M=((j=t.value)==null?void 0:j.getBoundingClientRect())||null,O=at(ae.sourceEvent,M)}).on("drag",ae=>{var ie,ve;const j=te(ae);if(!Z&&z&&s.value&&(Z=!0,J()),!z){const b=j.xSnapped-((ie=N.x)!=null?ie:0),S=j.ySnapped-((ve=N.y)!=null?ve:0);Math.sqrt(b*b+S*S)>i.value&&re(ae)}(N.x!==j.xSnapped||N.y!==j.ySnapped)&&U.length&&z&&(L=ae.sourceEvent,O=at(ae.sourceEvent,M),G(j))}).on("end",ae=>{if(z&&(Q.value=!1,Z=!1,z=!1,cancelAnimationFrame(I),U.length)){v(U,!1,!1);const[j,ie]=Bn({id:H,dragItems:U,findNode:f});y({event:ae.sourceEvent,node:j,nodes:ie})}}).filter(ae=>{const j=ae.target,ie=he(q);return!ae.button&&(!r.value||!tr(j,`.${r.value}`,ee)&&(!ie||tr(j,ie,ee)))}),K.call(x)}}}),Q}function Dc(){return{edgesChange:F(),nodesChange:F(),nodeDoubleClick:F(),nodeClick:F(),nodeMouseEnter:F(),nodeMouseMove:F(),nodeMouseLeave:F(),nodeContextMenu:F(),nodeDragStart:F(),nodeDrag:F(),nodeDragStop:F(),nodesInitialized:F(),miniMapNodeClick:F(),miniMapNodeDoubleClick:F(),miniMapNodeMouseEnter:F(),miniMapNodeMouseMove:F(),miniMapNodeMouseLeave:F(),connect:F(),connectStart:F(),connectEnd:F(),clickConnectStart:F(),clickConnectEnd:F(),paneReady:F(),move:F(),moveStart:F(),moveEnd:F(),selectionDragStart:F(),selectionDrag:F(),selectionDragStop:F(),selectionContextMenu:F(),selectionStart:F(),selectionEnd:F(),viewportChangeStart:F(),viewportChange:F(),viewportChangeEnd:F(),paneScroll:F(),paneClick:F(),paneContextMenu:F(),paneMouseEnter:F(),paneMouseMove:F(),paneMouseLeave:F(),edgeContextMenu:F(),edgeMouseEnter:F(),edgeMouseMove:F(),edgeMouseLeave:F(),edgeDoubleClick:F(),edgeClick:F(),edgeUpdateStart:F(),edgeUpdate:F(),edgeUpdateEnd:F(),updateNodeInternals:F(),error:F(e=>wa(e.message))}}function $c(e,t){Ua(()=>{for(const[n,o]of Object.entries(t.value)){const r=a=>{e(n,a)};o.on(r),Ut(()=>{o.off(r)})}})}function Sa(e,t){const n={};for(const o in e)t.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>e[o]});return n}const Ac=["data-id","data-handleid","data-nodeid","data-handlepos"],Bc={name:"Handle",compatConfig:{MODE:3}},It=xe(fe(B({},Bc),{props:{id:null,type:null,position:{default:W.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e){const t=Sa(e,["position","connectable","connectableStart","connectableEnd","id"]),n=cn(t,"type","source"),o=cn(t,"isValidConnection",void 0),{connectionStartHandle:r,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:i,nodesConnectable:u,noDragClassName:s,noPanClassName:c}=Ee(),{id:p,node:f,nodeEl:g,connectedEdges:_}=Bd(),d=pe(),m=se(()=>{var A;return(A=e.id)!=null?A:`${p}__handle-${e.position}`}),h=se(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),v=se(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),{handlePointerDown:E,handleClick:w}=Pa({nodeId:p,handleId:m,isValidConnection:o,type:n}),k=se(()=>De(e.connectable)&&e.connectable==="single"?!_.value.some(A=>{const q=A[`${n.value}Handle`];return A[n.value]!==p?!1:q?q===m.value:!0}):Ye(e.connectable)?_.value.filter(A=>{const q=A[`${n.value}Handle`];return A[n.value]!==p?!1:q?q===m.value:!0}).length<e.connectable:Mt(e.connectable)?e.connectable(f,_.value):me(e.connectable)?e.connectable:u.value),y=se(()=>{var A,q,Q,U,x,M;return((A=r.value)==null?void 0:A.nodeId)===p&&((q=r.value)==null?void 0:q.handleId)===m.value&&((Q=r.value)==null?void 0:Q.type)===n.value||((U=l.value)==null?void 0:U.nodeId)===p&&((x=l.value)==null?void 0:x.handleId)===m.value&&((M=l.value)==null?void 0:M.type)===n.value}),D=se(()=>{var A,q,Q;return((A=a.value)==null?void 0:A.nodeId)===p&&((q=a.value)==null?void 0:q.handleId)===m.value&&((Q=a.value)==null?void 0:Q.type)===n.value});Je(()=>f.initialized).toBe(!0,{flush:"post"}).then(()=>{var L;var A;const q=(A=f.handleBounds[n.value])==null?void 0:A.find(z=>z.id===m.value);if(!i.value||q)return;const Q=i.value.querySelector(".vue-flow__transformationpane");if(!g.value||!d.value||!Q||!m.value)return;const U=g.value.getBoundingClientRect(),x=d.value.getBoundingClientRect(),M=window.getComputedStyle(Q),{m22:N}=new window.DOMMatrixReadOnly(M.transform),O=B({id:m.value,position:e.position,x:(x.left-U.left)/N,y:(x.top-U.top)/N},Sn(d.value));f.handleBounds[n.value]=[...(L=f.handleBounds[n.value])!=null?L:[],O]}),vr(()=>{const A=f.handleBounds[n.value];A&&(f.handleBounds[n.value]=A.filter(q=>q.id!==m.value))});function X(A){const q=ho(A);k.value&&h.value&&(q&&A.button===0||!q)&&E(A)}function H(A){!p||!a.value&&!h.value||k.value&&w(A)}return(A,q)=>(oe(),ce("div",{ref_key:"handle",ref:d,"data-id":`${T(p)}-${T(m)}-${T(n)}`,"data-handleid":T(m),"data-nodeid":T(p),"data-handlepos":e.position,class:lt(["vue-flow__handle",[`vue-flow__handle-${e.position}`,`vue-flow__handle-${T(m)}`,T(s),T(c),T(n),{connectable:T(k),connecting:T(D),connectablestart:T(h),connectableend:T(v),connectionindicator:T(k)&&(T(h)&&!T(y)||T(v)&&T(y))}]]),onMousedown:X,onTouchstartPassive:X,onClick:H},[Pe(A.$slots,"default",{id:e.id})],42,Ac))}})),kn=function({sourcePosition:e=W.Bottom,targetPosition:t=W.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:a}){return[ge(It,{type:"target",position:t,connectable:o,isValidConnection:r}),typeof n!="string"&&n?ge(n):ge("div",{innerHTML:n}),ge(It,{type:"source",position:e,connectable:o,isValidConnection:a})]};kn.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"];kn.inheritAttrs=!1;kn.compatConfig={MODE:3};const zc=kn,Cn=function({sourcePosition:e=W.Bottom,label:t,connectable:n=!0,isValidSourcePos:o}){return[typeof t!="string"&&t?ge(t):ge("div",{innerHTML:t}),ge(It,{type:"source",position:e,connectable:n,isValidConnection:o})]};Cn.props=["sourcePosition","label","isValidSourcePos","connectable"];Cn.inheritAttrs=!1;Cn.compatConfig={MODE:3};const Rc=Cn,Mn=function({targetPosition:e=W.Top,label:t,connectable:n=!0,isValidTargetPos:o}){return[ge(It,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof t!="string"&&t?ge(t):ge("div",{innerHTML:t})]};Mn.props=["targetPosition","label","isValidTargetPos","connectable"];Mn.inheritAttrs=!1;Mn.compatConfig={MODE:3};const Vc=Mn,ur=Symbol("vueFlow"),Na=Symbol("nodeId"),ka=Symbol("nodeRef"),Yc=Symbol("edgeId"),Hc=Symbol("edgeRef"),In=Symbol("slots"),Lc=xe({name:"Node",compatConfig:{MODE:3},props:["name","type","id","draggable","selectable","focusable","connectable","node","resizeObserver"],setup(e){je(Na,e.id);const{id:t,edges:n,noPanClassName:o,selectNodesOnDrag:r,nodesSelectionActive:a,multiSelectionActive:l,emits:i,findNode:u,removeSelectedNodes:s,addSelectedNodes:c,updateNodeDimensions:p,onUpdateNodeInternals:f,getIntersectingNodes:g,getNodeTypes:_,nodeExtent:d,elevateNodesOnSelect:m,disableKeyboardA11y:h,ariaLiveMessage:v,snapToGrid:E,snapGrid:w}=Ee(),k=Da(),y=zt(e,"node"),D=se(()=>u(y.value.parentNode)),X=se(()=>Nn([y.value],n.value)),H=pe(null);je(ka,H);const{emit:A,on:q}=Rd(y.value,i),Q=Ea({id:e.id,el:H,disabled:()=>!e.draggable,selectable:()=>e.selectable,dragHandle:()=>y.value.dragHandle,onStart(C){A.dragStart(fe(B({},C),{intersections:g(y.value)}))},onDrag(C){A.drag(fe(B({},C),{intersections:g(y.value)}))},onStop(C){A.dragStop(fe(B({},C),{intersections:g(y.value)}))}}),U=se(()=>y.value.class instanceof Function?y.value.class(y.value):y.value.class),x=se(()=>{const C=(y.value.style instanceof Function?y.value.style(y.value):y.value.style)||{},ee=y.value.width instanceof Function?y.value.width(y.value):y.value.width,K=y.value.height instanceof Function?y.value.height(y.value):y.value.height;return ee&&(C.width=typeof ee=="string"?ee:`${ee}px`),K&&(C.height=typeof K=="string"?K:`${K}px`),C}),M=()=>{var C,ee;return Number((ee=(C=y.value.zIndex)!=null?C:x.value.zIndex)!=null?ee:0)};return f(C=>{C.includes(e.id)&&O()}),Qe(()=>{e.resizeObserver.observe(H.value)}),Nr(()=>{e.resizeObserver.unobserve(H.value)}),ye([()=>y.value.type,()=>y.value.sourcePosition,()=>y.value.targetPosition],()=>{p([{id:e.id,nodeElement:H.value,forceUpdate:!0}])},{flush:"pre"}),ye([()=>y.value.position.x,()=>y.value.position.y,()=>{var C;return(C=D.value)==null?void 0:C.computedPosition.x},()=>{var C;return(C=D.value)==null?void 0:C.computedPosition.y},()=>{var C;return(C=D.value)==null?void 0:C.computedPosition.z},()=>M(),()=>y.value.selected,()=>y.value.dimensions.height,()=>y.value.dimensions.width,()=>{var C;return(C=D.value)==null?void 0:C.dimensions.height},()=>{var C;return(C=D.value)==null?void 0:C.dimensions.width}],([C,ee,K,re,ae,j])=>{const ie={x:C,y:ee,z:j+(m.value&&y.value.selected?1e3:0)};Ye(K)&&Ye(re)?y.value.computedPosition=bc({x:K,y:re,z:ae},ie):y.value.computedPosition=ie},{flush:"post",immediate:!0}),ye([()=>y.value.extent,d],([C,ee],[K,re])=>{(C!==K||ee!==re)&&N()}),y.value.extent==="parent"||typeof y.value.extent=="object"&&"range"in y.value.extent&&y.value.extent.range==="parent"?Je(()=>y.value.initialized).toBe(!0).then(N):N(),()=>{var C;return ge("div",{ref:H,"data-id":y.value.id,class:["vue-flow__node",`vue-flow__node-${e.type===!1?"default":e.name}`,{[o.value]:e.draggable,dragging:Q==null?void 0:Q.value,selected:y.value.selected,selectable:e.selectable,parent:y.value.isParent},U.value],style:B({zIndex:(C=y.value.computedPosition.z)!=null?C:M(),transform:`translate(${y.value.computedPosition.x}px,${y.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",visibility:y.value.initialized?"visible":"hidden"},x.value),tabIndex:e.focusable?0:void 0,role:e.focusable?"button":void 0,"aria-describedby":h.value?void 0:`${ia}-${t}`,"aria-label":y.value.ariaLabel,onMouseenter:L,onMousemove:z,onMouseleave:I,onContextmenu:Z,onClick:G,onDblclick:te,onKeydown:J},[ge(e.type===!1?_.value.default:e.type,{id:y.value.id,type:y.value.type,data:y.value.data,events:B(B({},y.value.events),q),selected:!!y.value.selected,resizing:!!y.value.resizing,dragging:Q.value,connectable:e.connectable,position:y.value.position,dimensions:y.value.dimensions,isValidTargetPos:y.value.isValidTargetPos,isValidSourcePos:y.value.isValidSourcePos,parent:y.value.parentNode,zIndex:y.value.computedPosition.z,targetPosition:y.value.targetPosition,sourcePosition:y.value.sourcePosition,label:y.value.label,dragHandle:y.value.dragHandle,onUpdateNodeInternals:O})])};function N(){const C=y.value.computedPosition;E.value&&(C.x=w.value[0]*Math.round(C.x/w.value[0]),C.y=w.value[1]*Math.round(C.y/w.value[1]));const{computedPosition:ee,position:K}=fo(y.value,C,i.error,d.value,D.value);(y.value.computedPosition.x!==ee.x||y.value.computedPosition.y!==ee.y)&&(y.value.computedPosition=B(B({},y.value.computedPosition),ee)),(y.value.position.x!==K.x||y.value.position.y!==K.y)&&(y.value.position=K)}function O(){H.value&&p([{id:e.id,nodeElement:H.value,forceUpdate:!0}])}function L(C){Q!=null&&Q.value||A.mouseEnter({event:C,node:y.value,connectedEdges:X.value})}function z(C){Q!=null&&Q.value||A.mouseMove({event:C,node:y.value,connectedEdges:X.value})}function I(C){Q!=null&&Q.value||A.mouseLeave({event:C,node:y.value,connectedEdges:X.value})}function Z(C){return A.contextMenu({event:C,node:y.value,connectedEdges:X.value})}function te(C){return A.doubleClick({event:C,node:y.value,connectedEdges:X.value})}function G(C){e.selectable&&(!r.value||!e.draggable)&&Qn(y.value,l.value,c,s,a,!1,H.value),A.click({event:C,node:y.value,connectedEdges:X.value})}function J(C){if(!to(C))if(sa.includes(C.key)&&e.selectable){const ee=C.key==="Escape";Qn(y.value,l.value,c,s,a,ee,H.value)}else!h.value&&e.draggable&&y.value.selected&&Et[C.key]&&(v.value=`Moved selected node ${C.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~y.value.position.x}, y: ${~~y.value.position.y}`,k({x:Et[C.key].x,y:Et[C.key].y},C.shiftKey))}}}),Fc=Lc,Xc=["transform"],Gc=["width","height","x","y","rx","ry"],Uc=["y"],jc={name:"EdgeText",compatConfig:{MODE:3}},Zc=xe(fe(B({},jc),{props:{"aria-activedescendant":null,"aria-atomic":{type:[Boolean,String]},"aria-autocomplete":null,"aria-busy":{type:[Boolean,String]},"aria-checked":{type:[Boolean,String]},"aria-colcount":null,"aria-colindex":null,"aria-colspan":null,"aria-controls":null,"aria-current":{type:[Boolean,String]},"aria-describedby":null,"aria-details":null,"aria-disabled":{type:[Boolean,String]},"aria-dropeffect":null,"aria-errormessage":null,"aria-expanded":{type:[Boolean,String]},"aria-flowto":null,"aria-grabbed":{type:[Boolean,String]},"aria-haspopup":{type:[Boolean,String]},"aria-hidden":{type:[Boolean,String]},"aria-invalid":{type:[Boolean,String]},"aria-keyshortcuts":null,"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":null,"aria-modal":{type:[Boolean,String]},"aria-multiline":{type:[Boolean,String]},"aria-multiselectable":{type:[Boolean,String]},"aria-orientation":null,"aria-owns":null,"aria-placeholder":null,"aria-posinset":null,"aria-pressed":{type:[Boolean,String]},"aria-readonly":{type:[Boolean,String]},"aria-relevant":null,"aria-required":{type:[Boolean,String]},"aria-roledescription":null,"aria-rowcount":null,"aria-rowindex":null,"aria-rowspan":null,"aria-selected":{type:[Boolean,String]},"aria-setsize":null,"aria-sort":null,"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null,innerHTML:null,class:null,style:null,color:null,height:null,id:null,lang:null,max:null,media:null,method:null,min:null,name:null,target:null,type:null,width:null,role:null,tabindex:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,allowReorder:null,alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,attributeName:null,attributeType:null,autoReverse:null,azimuth:null,baseFrequency:null,"baseline-shift":null,baseProfile:null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,clip:null,"clip-path":null,clipPathUnits:null,"clip-rule":null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,contentScriptType:null,contentStyleType:null,cursor:null,cx:null,cy:null,d:null,decelerate:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,elevation:null,"enable-background":null,end:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,focusable:null,"font-family":null,"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,hanging:null,"horiz-adv-x":null,"horiz-origin-x":null,href:null,ideographic:null,"image-rendering":null,in2:null,in:null,intercept:null,k1:null,k2:null,k3:null,k4:null,k:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,markerHeight:null,"marker-mid":null,"marker-start":null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,mode:null,numOctaves:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,"overline-position":null,"overline-thickness":null,"paint-order":null,"panose-1":null,pathLength:null,patternContentUnits:null,patternTransform:null,patternUnits:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,r:null,radius:null,refX:null,refY:null,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,spacing:null,specularConstant:null,specularExponent:null,speed:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,"stroke-opacity":null,"stroke-width":null,surfaceScale:null,systemLanguage:null,tableValues:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,textLength:null,"text-rendering":null,to:null,transform:null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,"unicode-bidi":null,"unicode-range":null,"unitsPer-em":null,"v-alphabetic":null,values:null,"vector-effect":null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,"v-hanging":null,"v-ideographic":null,viewBox:null,viewTarget:null,visibility:null,"v-mathematical":null,widths:null,"word-spacing":null,"writing-mode":null,x1:null,x2:null,x:null,xChannelSelector:null,"x-height":null,xlinkActuate:null,xlinkArcrole:null,xlinkHref:null,xlinkRole:null,xlinkShow:null,xlinkTitle:null,xlinkType:null,xmlns:null,y1:null,y2:null,y:null,yChannelSelector:null,z:null,zoomAndPan:null,label:null,labelStyle:{default:{}},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:{}},labelBgPadding:{default:[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=pe({x:0,y:0,width:0,height:0}),n=pe(null),o=se(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);Qe(r),ye([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const a=n.value.getBBox();(a.width!==t.value.width||a.height!==t.value.height)&&(t.value=a)}return(a,l)=>(oe(),ce("g",{transform:T(o),class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(oe(),ce("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*e.labelBgPadding[0]}px`,height:`${t.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:ze(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,Gc)):ke("",!0),be("text",Wa(a.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:e.labelStyle}),[Pe(a.$slots,"default",{},()=>[T(De)(e.label)?(oe(),ce(Me,{key:1},[Er(ut(e.label),1)],64)):(oe(),Le(Sr(e.label),{key:0}))])],16,Uc)],8,Xc))}})),qc=["id","d","marker-end","marker-start"],Wc=["d","stroke-width"],Kc={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},qt=xe(fe(B({},Kc),{props:{labelStyle:null,labelShowBg:{type:Boolean,default:!0},labelBgStyle:null,labelBgPadding:null,labelBgBorderRadius:null,id:null,labelX:null,labelY:null,path:null,label:null,markerStart:null,markerEnd:null,interactionWidth:{default:20},style:null,ref:null},setup(e,{expose:t}){const n=Sa(e,["interactionWidth","labelShowBg"]),o=pe(null),r=pe(null),a=pe(null),l=ja();return t({pathEl:o,interactionEl:r,labelEl:a}),(i,u)=>(oe(),ce(Me,null,[be("path",{id:e.id,ref_key:"pathEl",ref:o,d:e.path,style:ze(T(n).style),class:lt(["vue-flow__edge-path",T(l).class]),"marker-end":e.markerEnd,"marker-start":e.markerStart},null,14,qc),e.interactionWidth?(oe(),ce("path",{key:0,ref_key:"interactionEl",ref:r,fill:"none",d:e.path,"stroke-width":e.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,Wc)):ke("",!0),e.label&&T(Ye)(e.labelX)&&T(Ye)(e.labelY)?(oe(),Le(Zc,{key:1,ref_key:"labelEl",ref:a,x:e.labelX,y:e.labelY,label:e.label,"label-show-bg":e.labelShowBg,"label-bg-style":e.labelBgStyle,"label-bg-padding":e.labelBgPadding,"label-bg-border-radius":e.labelBgBorderRadius,"label-style":e.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):ke("",!0)],64))}}));function Ca({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,a=n<e?n+r:n-r,l=Math.abs(o-t)/2,i=o<t?o+l:o-l;return[a,i,r,l]}function Ma({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:a,targetControlX:l,targetControlY:i}){const u=e*.125+r*.375+l*.375+n*.125,s=t*.125+a*.375+i*.375+o*.125,c=Math.abs(u-e),p=Math.abs(s-t);return[u,s,c,p]}function nn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function sr({pos:e,x1:t,y1:n,x2:o,y2:r,c:a}){let l,i;switch(e){case W.Left:l=t-nn(t-o,a),i=n;break;case W.Right:l=t+nn(o-t,a),i=n;break;case W.Top:l=t,i=n-nn(n-r,a);break;case W.Bottom:l=t,i=n+nn(r-n,a);break}return[l,i]}function go({sourceX:e,sourceY:t,sourcePosition:n=W.Bottom,targetX:o,targetY:r,targetPosition:a=W.Top,curvature:l=.25}){const[i,u]=sr({pos:n,x1:e,y1:t,x2:o,y2:r,c:l}),[s,c]=sr({pos:a,x1:o,y1:r,x2:e,y2:t,c:l}),[p,f,g,_]=Ma({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:i,sourceControlY:u,targetControlX:s,targetControlY:c});return[`M${e},${t} C${i},${u} ${s},${c} ${o},${r}`,p,f,g,_]}function cr({pos:e,x1:t,y1:n,x2:o,y2:r}){let a,l;switch(e){case W.Left:case W.Right:a=.5*(t+o),l=n;break;case W.Top:case W.Bottom:a=t,l=.5*(n+r);break}return[a,l]}function Ia({sourceX:e,sourceY:t,sourcePosition:n=W.Bottom,targetX:o,targetY:r,targetPosition:a=W.Top}){const[l,i]=cr({pos:n,x1:e,y1:t,x2:o,y2:r}),[u,s]=cr({pos:a,x1:o,y1:r,x2:e,y2:t}),[c,p,f,g]=Ma({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:l,sourceControlY:i,targetControlX:u,targetControlY:s});return[`M${e},${t} C${l},${i} ${u},${s} ${o},${r}`,c,p,f,g]}const dr={[W.Left]:{x:-1,y:0},[W.Right]:{x:1,y:0},[W.Top]:{x:0,y:-1},[W.Bottom]:{x:0,y:1}};function Jc({source:e,sourcePosition:t=W.Bottom,target:n}){return t===W.Left||t===W.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function fr(e,t){return Math.sqrt(pt(t.x-e.x,2)+pt(t.y-e.y,2))}function Qc({source:e,sourcePosition:t=W.Bottom,target:n,targetPosition:o=W.Top,center:r,offset:a}){const l=dr[t],i=dr[o],u={x:e.x+l.x*a,y:e.y+l.y*a},s={x:n.x+i.x*a,y:n.y+i.y*a},c=Jc({source:u,sourcePosition:t,target:s}),p=c.x!==0?"x":"y",f=c[p];let g,_,d;const m={x:0,y:0},h={x:0,y:0},[v,E,w,k]=Ca({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[p]*i[p]===-1){_=r.x||v,d=r.y||E;const y=[{x:_,y:u.y},{x:_,y:s.y}],D=[{x:u.x,y:d},{x:s.x,y:d}];l[p]===f?g=p==="x"?y:D:g=p==="x"?D:y}else{const y=[{x:u.x,y:s.y}],D=[{x:s.x,y:u.y}];if(p==="x"?g=l.x===f?D:y:g=l.y===f?y:D,t===o){const Q=Math.abs(e[p]-n[p]);if(Q<=a){const U=Math.min(a-1,a-Q);l[p]===f?m[p]=U:h[p]=U}}if(t!==o){const Q=p==="x"?"y":"x",U=l[p]===i[Q],x=u[Q]>s[Q],M=u[Q]<s[Q];(l[p]===1&&(!U&&x||U&&M)||l[p]!==1&&(!U&&M||U&&x))&&(g=p==="x"?y:D)}const X={x:u.x-m.x,y:u.y-m.y},H={x:s.x-h.x,y:s.y-h.y},A=Math.max(Math.abs(X.x-g[0].x),Math.abs(H.x-g[0].x)),q=Math.max(Math.abs(X.y-g[0].y),Math.abs(H.y-g[0].y));A>=q?(_=(X.x+H.x)/2,d=g[0].y):(_=g[0].x,d=(X.y+H.y)/2)}return[[e,{x:u.x-m.x,y:u.y-m.y},...g,{x:s.x-h.x,y:s.y-h.y},n],_,d,w,k]}function ed(e,t,n,o){const r=Math.min(fr(e,t)/2,fr(t,n)/2,o),{x:a,y:l}=t;if(e.x===a&&a===n.x||e.y===l&&l===n.y)return`L${a} ${l}`;if(e.y===l){const s=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${a+r*s},${l}Q ${a},${l} ${a},${l+r*c}`}const i=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${a},${l+r*u}Q ${a},${l} ${a+r*i},${l}`}function eo({sourceX:e,sourceY:t,sourcePosition:n=W.Bottom,targetX:o,targetY:r,targetPosition:a=W.Top,borderRadius:l=5,centerX:i,centerY:u,offset:s=20}){const[c,p,f,g,_]=Qc({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:a,center:{x:i,y:u},offset:s});return[c.reduce((d,m,h)=>{let v;return h>0&&h<c.length-1?v=ed(c[h-1],m,c[h+1],l):v=`${h===0?"M":"L"}${m.x} ${m.y}`,d+=v,d},""),p,f,g,_]}function td({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,a,l,i]=Ca({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,a,l,i]}const nd=xe({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{var a,l;const[n,o,r]=go(fe(B({},e),{sourcePosition:(a=e.sourcePosition)!=null?a:W.Bottom,targetPosition:(l=e.targetPosition)!=null?l:W.Top}));return ge(qt,B(B({path:n,labelX:o,labelY:r},t),e))}}}),od=nd,rd=xe({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{var a,l;const[n,o,r]=Ia(fe(B({},e),{sourcePosition:(a=e.sourcePosition)!=null?a:W.Bottom,targetPosition:(l=e.targetPosition)!=null?l:W.Top}));return ge(qt,B(B({path:n,labelX:o,labelY:r},t),e))}}}),ad=rd,ld=xe({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{var a,l;const[n,o,r]=eo(fe(B({},e),{sourcePosition:(a=e.sourcePosition)!=null?a:W.Bottom,targetPosition:(l=e.targetPosition)!=null?l:W.Top}));return ge(qt,B(B({path:n,labelX:o,labelY:r},t),e))}}}),Ta=ld,id=xe({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>ge(Ta,fe(B(B({},e),t),{borderRadius:0}))}}),ud=id,sd=xe({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=td(e);return ge(qt,B(B({path:n,labelX:o,labelY:r},t),e))}}}),cd=sd;function dd(e,t,n){return n===W.Left?e-t:n===W.Right?e+t:e}function fd(e,t,n){return n===W.Top?e-t:n===W.Bottom?e+t:e}const vo=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=W.Top,type:r}){return ge("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:dd(t,e,o),cy:fd(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};vo.props=["radius","centerX","centerY","position","type"];vo.compatConfig={MODE:3};const hr=vo,hd=xe({name:"Edge",compatConfig:{MODE:3},props:["name","type","id","updatable","selectable","focusable","edge"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:r,emits:a,nodesSelectionActive:l,noPanClassName:i,getEdgeTypes:u,removeSelectedEdges:s,findEdge:c,findNode:p,isValidConnection:f,multiSelectionActive:g}=Ee(),_=Pd(e.edge,a),d=zt(e,"edge"),m=pe(!1),h=pe(!1),v=pe(""),E=pe(null),w=pe("source"),k=pe(null);je(Yc,e.id),je(Hc,k);const y=se(()=>d.value.class instanceof Function?d.value.class(d.value):d.value.class),D=se(()=>d.value.style instanceof Function?d.value.style(d.value):d.value.style),{handlePointerDown:X}=Pa({nodeId:v,handleId:E,type:w,isValidConnection:f,edgeUpdaterType:w,onEdgeUpdate:q,onEdgeUpdateEnd:Q});return()=>{const G=p(d.value.source),J=p(d.value.target);if(!G||!J||!d.value||G.hidden||J.hidden)return null;let C;o.value===ct.Strict?C=G.handleBounds.source:C=[...G.handleBounds.source||[],...G.handleBounds.target||[]];const ee=nr(C,d.value.sourceHandle);let K;o.value===ct.Strict?K=J.handleBounds.target:K=[...J.handleBounds.target||[],...J.handleBounds.source||[]];const re=nr(K,d.value.targetHandle),ae=ee?ee.position:W.Bottom,j=re?re.position:W.Top,{sourceX:ie,sourceY:ve,targetY:b,targetX:S}=Sc(G,ee,ae,J,re,j);return d.value.sourceX=ie,d.value.sourceY=ve,d.value.targetX=S,d.value.targetY=b,ge("g",{ref:k,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.type===!1?"default":e.name}`,i.value,y.value,{updating:m.value,selected:d.value.selected,animated:d.value.animated,inactive:!e.selectable}],onClick:x,onContextmenu:M,onDblclick:N,onMouseenter:O,onMousemove:L,onMouseleave:z,onKeyDown:e.focusable?te:void 0,tabIndex:e.focusable?0:void 0,"aria-label":d.value.ariaLabel===null?void 0:d.value.ariaLabel||`Edge from ${d.value.source} to ${d.value.target}`,"aria-describedby":e.focusable?`${ua}-${t}`:void 0,role:e.focusable?"button":"img"},[h.value?null:ge(e.type===!1?u.value.default:e.type,{id:e.id,sourceNode:G,targetNode:J,source:d.value.source,target:d.value.target,type:d.value.type,updatable:e.updatable,selected:d.value.selected,animated:d.value.animated,label:d.value.label,labelStyle:d.value.labelStyle,labelShowBg:d.value.labelShowBg,labelBgStyle:d.value.labelBgStyle,labelBgPadding:d.value.labelBgPadding,labelBgBorderRadius:d.value.labelBgBorderRadius,data:d.value.data,events:B(B({},d.value.events),_.on),style:D.value,markerStart:`url(#${nt(d.value.markerStart,t)})`,markerEnd:`url(#${nt(d.value.markerEnd,t)})`,sourcePosition:ae,targetPosition:j,sourceX:ie,sourceY:ve,targetX:S,targetY:b,sourceHandleId:d.value.sourceHandle,targetHandleId:d.value.targetHandle,interactionWidth:d.value.interactionWidth}),[e.updatable==="source"||e.updatable===!0?[ge("g",{onMousedown:I,onMouseenter:H,onMouseout:A},ge(hr,{position:ae,centerX:ie,centerY:ve,radius:r.value,type:"source","data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[ge("g",{onMousedown:Z,onMouseenter:H,onMouseout:A},ge(hr,{position:j,centerX:S,centerY:b,radius:r.value,type:"target","data-type":"target"}))]:null]])};function H(){m.value=!0}function A(){m.value=!1}function q(G,J){_.emit.update({event:G,edge:d.value,connection:J})}function Q(G){_.emit.updateEnd({event:G,edge:d.value}),h.value=!1}function U(G,J){var C;G.button===0&&(h.value=!0,v.value=J?d.value.target:d.value.source,E.value=(C=J?d.value.targetHandle:d.value.sourceHandle)!=null?C:"",w.value=J?"target":"source",_.emit.updateStart({event:G,edge:d.value}),X(G))}function x(G){var J;const C={event:G,edge:d.value};e.selectable&&(l.value=!1,d.value.selected&&g.value?(s([d.value]),(J=k.value)==null||J.blur()):n([d.value])),_.emit.click(C)}function M(G){_.emit.contextMenu({event:G,edge:d.value})}function N(G){_.emit.doubleClick({event:G,edge:d.value})}function O(G){_.emit.mouseEnter({event:G,edge:d.value})}function L(G){_.emit.mouseMove({event:G,edge:d.value})}function z(G){_.emit.mouseLeave({event:G,edge:d.value})}function I(G){U(G,!0)}function Z(G){U(G,!1)}function te(G){var J;sa.includes(G.key)&&e.selectable&&(G.key==="Escape"?((J=k.value)==null||J.blur(),s([c(e.id)])):n([c(e.id)]))}}}),pd=hd,gd={height:"0",width:"0"},vd={name:"EdgeLabelRenderer",compatConfig:{MODE:3}},md=xe(fe(B({},vd),{setup(e){const{viewportRef:t}=Ee(),n=cn(()=>t.value.getElementsByClassName("vue-flow__edge-labels")[0]);return(o,r)=>(oe(),ce("svg",null,[(oe(),ce("foreignObject",gd,[(oe(),Le(Za,{to:T(n),disabled:!T(n)},[Pe(o.$slots,"default")],8,["to","disabled"]))]))]))}})),yd={[W.Left]:W.Right,[W.Right]:W.Left,[W.Top]:W.Bottom,[W.Bottom]:W.Top},bd=xe({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{connectionMode:t,connectionStartHandle:n,connectionEndHandle:o,connectionPosition:r,connectionLineType:a,connectionLineStyle:l,connectionLineOptions:i,connectionStatus:u,viewport:s,findNode:c}=Ee(),p=(e=Be(In))==null?void 0:e["connection-line"];return()=>{var O,L;var f,g,_,d;if(!n.value)return null;const m=c(n.value.nodeId);if(!m)return null;const h=n.value.handleId,v=n.value.type,E=((f=o.value)==null?void 0:f.handleId)&&c(o.value.nodeId)||null,w=(r.value.x-s.value.x)/s.value.zoom,k=(r.value.y-s.value.y)/s.value.zoom,y=m.handleBounds;let D=y==null?void 0:y[v];if(t.value===ct.Loose&&(D=D||(y==null?void 0:y[v==="source"?"target":"source"])),!D)return null;const X=(O=h?D.find(z=>z.id===h):D[0])!=null?O:null,H=(X==null?void 0:X.position)||W.Top,{x:A,y:q}=Jn(H,B(B({},m.dimensions),m.computedPosition),X),Q=E&&((g=o.value)==null?void 0:g.handleId)&&((t.value===ct.Strict?(_=E.handleBounds[v==="source"?"target":"source"])==null?void 0:_.find(z=>{var I;return z.id===((I=o.value)==null?void 0:I.handleId)}):[...E.handleBounds.source||[],...E.handleBounds.target||[]].find(z=>{var I;return z.id===((I=o.value)==null?void 0:I.handleId)}))||((d=E.handleBounds[v!=null?v:"target"])==null?void 0:d[0]))||null,U=H?yd[H]:null;if(!H||!U)return null;const x=(L=a.value)!=null?L:i.value.type;let M="";const N={sourceX:A,sourceY:q,sourcePosition:H,targetX:w,targetY:k,targetPosition:U};return x===mt.Bezier?[M]=go(N):x===mt.Step?[M]=eo(fe(B({},N),{borderRadius:0})):x===mt.SmoothStep?[M]=eo(N):x===mt.SimpleBezier?[M]=Ia(N):M=`M${A},${q} ${w},${k}`,ge("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},ge("g",{class:"vue-flow__connection"},p?ge(p,{sourceX:A,sourceY:q,sourcePosition:H,targetX:w,targetY:k,targetPosition:U,sourceNode:m,sourceHandle:X,targetNode:E,targetHandle:Q,markerEnd:`url(#${nt(i.value.markerEnd)})`,markerStart:`url(#${nt(i.value.markerStart)})`,connectionStatus:u.value}):ge("path",{d:M,class:[i.value.class,u,"vue-flow__connection-path"],style:l.value||i.value.style,"marker-end":`url(#${nt(i.value.markerEnd)})`,"marker-start":`url(#${nt(i.value.markerStart)})`})))}}}),xd=bd,_d=["tabIndex"],wd={name:"NodesSelection",compatConfig:{MODE:3}},Ed=xe(fe(B({},wd),{setup(e){const t=Ee(),n=_e(t,"emits"),o=_e(t,"viewport"),r=_e(t,"getSelectedNodes"),a=_e(t,"noPanClassName"),l=_e(t,"disableKeyboardA11y"),i=_e(t,"userSelectionActive"),u=Da(),s=pe(null),c=Ea({el:s,onStart(d){n.value.selectionDragStart(d)},onDrag(d){n.value.selectionDrag(d)},onStop(d){n.value.selectionDragStop(d)}});Qe(()=>{var d;l.value||(d=s.value)==null||d.focus({preventScroll:!0})});const p=se(()=>va(r.value)),f=se(()=>({width:`${p.value.width}px`,height:`${p.value.height}px`,top:`${p.value.y}px`,left:`${p.value.x}px`}));function g(d){n.value.selectionContextMenu({event:d,nodes:r.value})}function _(d){l.value||Et[d.key]&&u({x:Et[d.key].x,y:Et[d.key].y},d.shiftKey)}return(d,m)=>!T(i)&&T(p).width&&T(p).height?(oe(),ce("div",{key:0,class:lt(["vue-flow__nodesselection vue-flow__container",T(a)]),style:ze({transform:`translate(${T(o).x}px,${T(o).y}px) scale(${T(o).zoom})`})},[be("div",{ref_key:"el",ref:s,class:lt([{dragging:T(c)},"vue-flow__nodesselection-rect"]),style:ze(T(f)),tabIndex:T(l)?void 0:-1,onContextmenu:g,onKeydown:_},null,46,_d)],6)):ke("",!0)}})),Sd={name:"UserSelection",compatConfig:{MODE:3}},Nd=xe(fe(B({},Sd),{props:{userSelectionRect:null},setup(e){return(t,n)=>(oe(),ce("div",{class:"vue-flow__selection vue-flow__container",style:ze({width:`${e.userSelectionRect.width}px`,height:`${e.userSelectionRect.height}px`,transform:`translate(${e.userSelectionRect.x}px, ${e.userSelectionRect.y}px)`})},null,4))}})),kd={input:Rc,default:zc,output:Vc},Cd={default:od,straight:cd,step:ud,smoothstep:Ta,simplebezier:ad};function Md(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:co.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Rt.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:mt.Bezier,style:{}},connectionMode:ct.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:yn()?"Meta":"Control",zoomActivationKeyCode:yn()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Dc(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,disableKeyboardA11y:!1,ariaLiveMessage:"",__experimentalFeatures:{nestedFlow:!1}}}function Oa(e){const t=Md();return e&&Object.keys(e).forEach(n=>{const o=e[n];me(o)&&(t[n]=o)}),t}function Id(e,t,n,o,r,a,l){const i=Yd(o,r),u=b=>{var R;const S=(R=b!=null?b:a.value)!=null?R:[];o.hooks.updateNodeInternals.trigger(S)},s=b=>gc(b,o.nodes,o.edges),c=b=>pc(b,o.nodes,o.edges),p=b=>Nn(b,o.edges),f=b=>{if(b)return o.nodes&&!a.value.length?o.nodes.find(S=>S.id===b):o.nodes[a.value.indexOf(b)]},g=b=>{if(b)return o.edges&&!l.value.length?o.edges.find(S=>S.id===b):o.edges[l.value.indexOf(b)]},_=(b,S,R)=>{const $=[];b.forEach(Y=>{var ue,P;var V,ne;const le={id:Y.id,type:"position",dragging:R,from:Y.from};if(S&&(le.position=Y.position,Y.parentNode)){const de=f(Y.parentNode);le.position={x:le.position.x-((ue=(V=de==null?void 0:de.computedPosition)==null?void 0:V.x)!=null?ue:0),y:le.position.y-((P=(ne=de==null?void 0:de.computedPosition)==null?void 0:ne.y)!=null?P:0)}}$.push(le)}),$!=null&&$.length&&o.hooks.nodesChange.trigger($)},d=b=>{var S;if(!o.vueFlowRef)return;const R=o.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!R)return;let $;if((S=o.__experimentalFeatures)!=null&&S.nestedFlow){let V=[R],ne=R,le;for(;!le&&ne;)ne=ne.parentElement,le=ne==null?void 0:ne.classList.contains("vue-flow__transformationpane"),le&&(V=[ne,...V]);V.forEach(ue=>{const P=window.getComputedStyle(ue),{m22:de}=new window.DOMMatrixReadOnly(P.transform);$?$*=de:$=de})}else{const V=window.getComputedStyle(R),{m22:ne}=new window.DOMMatrixReadOnly(V.transform);$=ne}const Y=b.reduce((V,ne)=>{const le=f(ne.id);if(le){const ue=Sn(ne.nodeElement);ue.width&&ue.height&&(le.dimensions.width!==ue.width||le.dimensions.height!==ue.height||ne.forceUpdate)&&(le.handleBounds.source=lr(".source",ne.nodeElement,$),le.handleBounds.target=lr(".target",ne.nodeElement,$),le.dimensions=ue,le.initialized=!0,V.push({id:le.id,type:"dimensions",dimensions:ue}))}return V},[]);Y.length&&o.hooks.nodesChange.trigger(Y)},m=(b,S)=>{const R=b.map(V=>V.id);let $,Y=[];if(o.multiSelectionActive)$=R.map(V=>Ge(V,S));else{const V=An([...o.nodes,...o.edges],R);$=V.changedNodes,Y=V.changedEdges}$.length&&o.hooks.nodesChange.trigger($),Y.length&&o.hooks.edgesChange.trigger(Y)},h=(b,S)=>{const R=b.map(V=>V.id);let $=[],Y;if(o.multiSelectionActive)Y=R.map(V=>Ge(V,S));else{const V=An([...o.nodes,...o.edges],R);$=V.changedNodes,Y=V.changedEdges}$.length&&o.hooks.nodesChange.trigger($),Y.length&&o.hooks.edgesChange.trigger(Y)},v=(b,S)=>{const R=b.filter(rt).map(ne=>ne.id),$=b.filter(et).map(ne=>ne.id);let{changedNodes:Y,changedEdges:V}=An([...o.nodes,...o.edges],[...R,...$]);o.multiSelectionActive&&(Y=R.map(ne=>Ge(ne,S)),V=$.map(ne=>Ge(ne,S))),Y.length&&o.hooks.nodesChange.trigger(Y),V.length&&o.hooks.edgesChange.trigger(V)},E=b=>{m(b,!0)},w=b=>{h(b,!0)},k=b=>{v(b,!0)},y=b=>{if(!b.length)return m(b,!1);const S=b.map(R=>R.id).map(R=>Ge(R,!1));S.length&&o.hooks.nodesChange.trigger(S)},D=b=>{if(!b.length)return h(b,!1);const S=b.map(R=>R.id).map(R=>Ge(R,!1));S.length&&o.hooks.edgesChange.trigger(S)},X=b=>{if(!b||!b.length)return v([],!1);const S=b.reduce((R,$)=>{const Y=Ge($.id,!1);return rt($)?R.nodes.push(Y):R.edges.push(Y),R},{nodes:[],edges:[]});S.nodes.length&&o.hooks.nodesChange.trigger(S.nodes),S.edges.length&&o.hooks.edgesChange.trigger(S.edges)},H=b=>{var S;(S=o.d3Zoom)==null||S.scaleExtent([b,o.maxZoom]),o.minZoom=b},A=b=>{var S;(S=o.d3Zoom)==null||S.scaleExtent([o.minZoom,b]),o.maxZoom=b},q=b=>{var S;(S=o.d3Zoom)==null||S.translateExtent(b),o.translateExtent=b},Q=b=>{o.nodeExtent=b,u(a.value)},U=b=>{o.nodesDraggable=b,o.nodesConnectable=b,o.elementsSelectable=b},x=b=>{const S=b instanceof Function?b(o.nodes):b;!o.initialized&&!S.length||(o.nodes=ir(S,o.nodes,f,o.hooks.error.trigger))},M=b=>{const S=b instanceof Function?b(o.edges):b;if(!o.initialized&&!S.length)return;const R=o.isValidConnection?S.filter($=>o.isValidConnection($,{edges:o.edges,sourceNode:f($.source),targetNode:f($.target)})):S;o.edges=R.reduce(($,Y)=>{const V=f(Y.source),ne=f(Y.target),le=!V||typeof V>"u",ue=!ne||typeof ne>"u";if(le&&ue?o.hooks.error.trigger(new Ne(Se.EDGE_SOURCE_TARGET_MISSING,Y.id,Y.source,Y.target)):(le&&o.hooks.error.trigger(new Ne(Se.EDGE_SOURCE_MISSING,Y.id,Y.source)),ue&&o.hooks.error.trigger(new Ne(Se.EDGE_TARGET_MISSING,Y.id,Y.target))),le||ue)return $;const P=g(Y.id);return $.push(fe(B({},da(Y,Object.assign({},P,o.defaultEdgeOptions))),{sourceNode:V,targetNode:ne})),$},[])},N=b=>{const S=b instanceof Function?b([...o.nodes,...o.edges]):b;!o.initialized&&!S.length||(x(S.filter(rt)),M(S.filter(et)))},O=b=>{let S=b instanceof Function?b(o.nodes):b;S=Array.isArray(S)?S:[S];const R=ir(S,o.nodes,f,o.hooks.error.trigger).map(Jo);R.length&&o.hooks.nodesChange.trigger(R)},L=b=>{let S=b instanceof Function?b(o.edges):b;S=Array.isArray(S)?S:[S];const R=(o.isValidConnection?S.filter($=>o.isValidConnection($,{edges:o.edges,sourceNode:f($.source),targetNode:f($.target)})):S).reduce(($,Y)=>{const V=Oc(B(B({},Y),o.defaultEdgeOptions),o.edges,o.hooks.error.trigger);if(V){const ne=f(V.source),le=f(V.target),ue=!ne||typeof ne>"u",P=!le||typeof le>"u";if(ue&&P)return o.hooks.error.trigger(new Ne(Se.EDGE_SOURCE_TARGET_MISSING,V.id,V.source,V.target)),$;if(ue)return o.hooks.error.trigger(new Ne(Se.EDGE_SOURCE_MISSING,V.id,V.source)),$;if(P)return o.hooks.error.trigger(new Ne(Se.EDGE_TARGET_MISSING,V.id,V.target)),$;$.push(Jo(fe(B({},V),{sourceNode:ne,targetNode:le})))}return $},[]);R.length&&o.hooks.edgesChange.trigger(R)},z=(b,S=!0,R=!1)=>{let $=b instanceof Function?b(o.nodes):b;$=Array.isArray($)?$:[$];const Y=[],V=[];function ne(ue){const P=p(ue).filter(de=>me(de.deletable)?de.deletable:!0);V.push(...P.map(de=>er(de.id,de.source,de.target)))}function le(ue){const P=o.nodes.filter(de=>de.parentNode===ue);if(P.length){const de=P.map(Ce=>Ce.id);Y.push(...de.map(Ce=>Qo(Ce))),S&&ne(P),P.forEach(Ce=>{le(Ce.id)})}}$.forEach(ue=>{const P=typeof ue=="string"?f(ue):ue;P&&(me(P.deletable)&&!P.deletable||(Y.push(Qo(P.id)),S&&ne([P]),R&&le(P.id)))}),V.length&&o.hooks.edgesChange.trigger(V),Y.length&&o.hooks.nodesChange.trigger(Y)},I=b=>{let S=b instanceof Function?b(o.edges):b;S=Array.isArray(S)?S:[S];const R=[];S.forEach($=>{const Y=typeof $=="string"?g($):$;Y&&(me(Y.deletable)&&!Y.deletable||R.push(er(typeof $=="string"?$:$.id,Y.source,Y.target)))}),o.hooks.edgesChange.trigger(R)},Z=(b,S,R=!0)=>Pc(b,S,o.edges,g,R,o.hooks.error.trigger),te=b=>Ko(b,o.nodes),G=b=>Ko(b,o.edges),J=(b,S,R,$=!1)=>{$?o.connectionClickStartHandle=b:o.connectionStartHandle=b,o.connectionEndHandle=null,o.connectionStatus=null,S&&(o.connectionPosition=S)},C=(b,S=null,R=null)=>{o.connectionStartHandle&&(o.connectionPosition=b,o.connectionEndHandle=S,o.connectionStatus=R)},ee=(b,S)=>{o.connectionPosition={x:NaN,y:NaN},o.connectionEndHandle=null,o.connectionStatus=null,S?o.connectionClickStartHandle=null:o.connectionStartHandle=null},K=b=>{const S=fc(b),R=S?null:f(b.id);return!S&&!R?[null,null,S]:[S?b:jo(R),R,S]},re=(b,S=!0,R)=>{const[$,Y,V]=K(b);return $?(R||o.nodes).filter(ne=>{if(!V&&(ne.id===Y.id||!ne.computedPosition))return!1;const le=jo(ne),ue=Wn(le,$);return S&&ue>0||ue>=Number(b.width)*Number(b.height)}):[]},ae=(b,S,R=!0)=>{const[$]=K(b);if(!$)return!1;const Y=Wn($,S);return R&&Y>0||Y>=Number(b.width)*Number(b.height)},j=b=>{const{viewport:S,dimensions:R,d3Zoom:$,d3Selection:Y,translateExtent:V}=o;if(!$||!Y||!b.x&&!b.y)return!1;const ne=Ct.translate(S.x+b.x,S.y+b.y).scale(S.zoom),le=[[0,0],[R.width,R.height]],ue=$.constrain()(ne,le,V),P=o.viewport.x!==ue.x||o.viewport.y!==ue.y||o.viewport.zoom!==ue.k;return $.transform(Y,ue),P},ie=b=>{const S=b instanceof Function?b(o):b,R=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks","defaultEdgeOptions"],$=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];me(S.defaultEdgeOptions)&&(o.defaultEdgeOptions=S.defaultEdgeOptions);const Y=S.modelValue||S.nodes||S.edges?[]:void 0;Y&&(S.modelValue&&Y.push(...S.modelValue),S.nodes&&Y.push(...S.nodes),S.edges&&Y.push(...S.edges),N(Y));const V=()=>{me(S.maxZoom)&&A(S.maxZoom),me(S.minZoom)&&H(S.minZoom),me(S.translateExtent)&&q(S.translateExtent),me(S.nodeExtent)&&Q(S.nodeExtent)};Object.keys(S).forEach(ne=>{const le=ne,ue=S[le];![...R,...$].includes(le)&&me(ue)&&(o[le]=ue)}),o.d3Zoom?V():Je(()=>o.d3Zoom).not.toBeUndefined().then(V),o.initialized||(o.initialized=!0)},ve={updateNodePositions:_,updateNodeDimensions:d,setElements:N,setNodes:x,setEdges:M,addNodes:O,addEdges:L,removeNodes:z,removeEdges:I,findNode:f,findEdge:g,updateEdge:Z,applyEdgeChanges:G,applyNodeChanges:te,addSelectedElements:k,addSelectedNodes:E,addSelectedEdges:w,setMinZoom:H,setMaxZoom:A,setTranslateExtent:q,setNodeExtent:Q,removeSelectedElements:X,removeSelectedNodes:y,removeSelectedEdges:D,startConnection:J,updateConnection:C,endConnection:ee,setInteractive:U,setState:ie,getIntersectingNodes:re,getIncomers:s,getOutgoers:c,getConnectedEdges:p,isNodeIntersecting:ae,panBy:j,fitView:b=>i.value.fitView(b),zoomIn:b=>i.value.zoomIn(b),zoomOut:b=>i.value.zoomOut(b),zoomTo:(b,S)=>i.value.zoomTo(b,S),setViewport:(b,S)=>i.value.setViewport(b,S),setTransform:(b,S)=>i.value.setTransform(b,S),getViewport:()=>i.value.getViewport(),getTransform:()=>i.value.getTransform(),setCenter:(b,S,R)=>i.value.setCenter(b,S,R),fitBounds:(b,S)=>i.value.fitBounds(b,S),project:b=>i.value.project(b),toObject:()=>JSON.parse(JSON.stringify({nodes:o.nodes.map(b=>{const de=b,{computedPosition:S,handleBounds:R,selected:$,dimensions:Y,isParent:V,resizing:ne,dragging:le,initialized:ue}=de;return Pt(de,["computedPosition","handleBounds","selected","dimensions","isParent","resizing","dragging","initialized"])}),edges:o.edges.map(b=>{const V=b,{selected:S,sourceNode:R,targetNode:$}=V;return Pt(V,["selected","sourceNode","targetNode"])}),position:[o.viewport.x,o.viewport.y],zoom:o.viewport.zoom,viewport:o.viewport})),fromObject:b=>{const{nodes:S,edges:R,position:$,zoom:Y,viewport:V}=b;if(S&&x(S),R&&M(R),V!=null&&V.x&&V!=null&&V.y||$){const ne=(V==null?void 0:V.x)||$[0],le=(V==null?void 0:V.y)||$[1],ue=(V==null?void 0:V.zoom)||Y||o.viewport.zoom;Je(()=>i.value.initialized).toBe(!0).then(()=>{i.value.setViewport({x:ne,y:le,zoom:ue})})}},updateNodeInternals:u,$reset:()=>{var S,R,$;const b=Oa();if(o.edges=[],o.nodes=[],o.d3Zoom&&o.d3Selection){const Y=Ct.translate((S=b.defaultViewport.x)!=null?S:0,(R=b.defaultViewport.y)!=null?R:0).scale(dt(($=b.defaultViewport.zoom)!=null?$:1,b.minZoom,b.maxZoom)),V=o.viewportRef.getBoundingClientRect(),ne=[[0,0],[V.width,V.height]],le=o.d3Zoom.constrain()(Y,ne,b.translateExtent);o.d3Zoom.transform(o.d3Selection,le)}ie(b)},$destroy:()=>{}};return Je(()=>i.value.initialized).toBe(!0,{flush:"pre"}).then(()=>{o.fitViewOnInit&&i.value.fitView(),o.hooks.paneReady.trigger(B(B(B(B({id:e,emits:t,vueFlowVersion:"1.23.0"},n),o),r),ve))}),ve}function Td(e,t,n){const o=se(()=>m=>e.nodes&&!t.value.length?e.nodes.find(h=>h.id===m):e.nodes[t.value.indexOf(m)]),r=se(()=>m=>e.edges&&!n.value.length?e.edges.find(h=>h.id===m):e.edges[n.value.indexOf(m)]),a=se(()=>{var m;const h=B(B({},Cd),e.edgeTypes),v=Object.keys(h);return(m=e.edges)==null||m.forEach(E=>E.type&&!v.includes(E.type)&&(h[E.type]=E.type)),h}),l=se(()=>{var m;const h=B(B({},kd),e.nodeTypes),v=Object.keys(h);return(m=e.nodes)==null||m.forEach(E=>E.type&&!v.includes(E.type)&&(h[E.type]=E.type)),h}),i=se(()=>{const m=e.nodes.filter(h=>!h.hidden);return e.onlyRenderVisibleElements?m&&ma(m,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):m!=null?m:[]}),u=(m,h,v)=>{if(h=h!=null?h:o.value(m.source),v=v!=null?v:o.value(m.target),!h||!v){e.hooks.error.trigger(new Ne(Se.EDGE_ORPHANED,m.id));return}return!m.hidden&&!v.hidden&&!h.hidden},s=se(()=>e.onlyRenderVisibleElements?e.edges.filter(m=>{const h=o.value(m.source),v=o.value(m.target);return u(m,h,v)&&Nc({sourcePos:h.computedPosition||{x:0,y:0},targetPos:v.computedPosition||{x:0,y:0},sourceWidth:h.dimensions.width,sourceHeight:h.dimensions.height,targetWidth:v.dimensions.width,targetHeight:v.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(m=>u(m))),c=se(()=>[...i.value,...s.value]),p=se(()=>e.nodes.filter(m=>m.selected)),f=se(()=>e.edges.filter(m=>m.selected)),g=se(()=>{var m,h;return[...(m=p.value)!=null?m:[],...(h=f.value)!=null?h:[]]}),_=se(()=>i.value.filter(m=>m.initialized&&m.handleBounds!==void 0)),d=se(()=>i.value.length>0&&_.value.length===i.value.length);return{getNode:o,getEdge:r,getElements:c,getEdgeTypes:a,getNodeTypes:l,getEdges:s,getNodes:i,getSelectedElements:g,getSelectedNodes:p,getSelectedEdges:f,getNodesInitialized:_,areNodesInitialized:d}}class bt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return bt.instance||(bt.instance=new bt),bt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Oa(n),r=_r(o),a={};Object.entries(r.hooks).forEach(([f,g])=>{const _=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;a[_]=g.on});const l={};Object.entries(r.hooks).forEach(([f,g])=>{l[f]=g.trigger});const i=se(()=>r.nodes.map(f=>f.id)),u=se(()=>r.edges.map(f=>f.id)),s=Td(r,i,u),c=Id(t,l,a,r,s,i,u);c.setState(r);const p=fe(B(B(B(B({},a),s),c),hl(r)),{emits:l,id:t,vueFlowVersion:"1.23.0",$destroy:()=>{this.remove(t)}});return this.set(t,p),p}getId(){return`vue-flow-${this.currentId++}`}}function Ee(e){const t=bt.getInstance(),n=yr(),o=e==null?void 0:e.id,r=(n==null?void 0:n.vueFlowId)||o;let a;if(n){const l=Be(ur,null);typeof l<"u"&&l!==null&&(a=l)}if(a||r&&(a=t.get(r)),!a||a&&o&&o!==a.id){const l=o!=null?o:t.getId(),i=t.create(l,e);a=i,mr().run(()=>{ye(i.applyDefault,u=>{const s=p=>{i.applyNodeChanges(p)},c=p=>{i.applyEdgeChanges(p)};u?(i.onNodesChange(s),i.onEdgesChange(c)):(i.hooks.value.nodesChange.off(s),i.hooks.value.edgesChange.off(c))},{immediate:!0}),Ut(()=>{if(a){const u=t.get(a.id);u?u.$destroy():wa(`No store instance found for id ${a.id} in storage.`)}})})}else e&&a.setState(e);return n&&(je(ur,a),n.vueFlowId=a.id),a}function Od(){return{doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),updateStart:F(),update:F(),updateEnd:F()}}function Pd(e,t){const n=Od();return n.doubleClick.on(o=>{var r,a;t.edgeDoubleClick(o),(a=(r=e.events)==null?void 0:r.doubleClick)==null||a.call(r,o)}),n.click.on(o=>{var r,a;t.edgeClick(o),(a=(r=e.events)==null?void 0:r.click)==null||a.call(r,o)}),n.mouseEnter.on(o=>{var r,a;t.edgeMouseEnter(o),(a=(r=e.events)==null?void 0:r.mouseEnter)==null||a.call(r,o)}),n.mouseMove.on(o=>{var r,a;t.edgeMouseMove(o),(a=(r=e.events)==null?void 0:r.mouseMove)==null||a.call(r,o)}),n.mouseLeave.on(o=>{var r,a;t.edgeMouseLeave(o),(a=(r=e.events)==null?void 0:r.mouseLeave)==null||a.call(r,o)}),n.contextMenu.on(o=>{var r,a;t.edgeContextMenu(o),(a=(r=e.events)==null?void 0:r.contextMenu)==null||a.call(r,o)}),n.updateStart.on(o=>{var r,a;t.edgeUpdateStart(o),(a=(r=e.events)==null?void 0:r.updateStart)==null||a.call(r,o)}),n.update.on(o=>{var r,a;t.edgeUpdate(o),(a=(r=e.events)==null?void 0:r.update)==null||a.call(r,o)}),n.updateEnd.on(o=>{var r,a;t.edgeUpdateEnd(o),(a=(r=e.events)==null?void 0:r.updateEnd)==null||a.call(r,o)}),Object.entries(n).reduce((o,[r,a])=>(o.emit[r]=a.trigger,o.on[r]=a.on,o),{emit:{},on:{}})}function Dd(){const{viewport:e,snapGrid:t,snapToGrid:n}=Ee();return({sourceEvent:o})=>{const r=o.touches?o.touches[0].clientX:o.clientX,a=o.touches?o.touches[0].clientY:o.clientY,l={x:(r-e.value.x)/e.value.zoom,y:(a-e.value.y)/e.value.zoom};return B({xSnapped:n.value?t.value[0]*Math.round(l.x/t.value[0]):l.x,ySnapped:n.value?t.value[1]*Math.round(l.y/t.value[1]):l.y},l)}}function on(){return!0}function Pa({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:a,onEdgeUpdateEnd:l}){const{vueFlowRef:i,connectionMode:u,connectionRadius:s,connectOnClick:c,connectionClickStartHandle:p,nodesConnectable:f,autoPanOnConnect:g,findNode:_,panBy:d,getNodes:m,startConnection:h,updateConnection:v,endConnection:E,emits:w,viewport:k,edges:y,isValidConnection:D}=Ee();let X=null,H=!1,A=null;function q(U){var x;const M=he(n)==="target",N=ho(U),O=Zo(U.target);if(N&&U.button===0||!N){let L=function(S){j=at(S,re);const{handle:R,validHandleResult:$}=Cc(S,O,Kn(j,k.value,!1,[1,1]),s.value,ve,Y=>ar(S,Y,u.value,he(t),he(e),M?"target":"source",Z,O,y.value,_));if(te=R,ie||(b(),ie=!0),X=$.connection,H=$.isValid,A=$.handleDomNode,v(te&&H?pa({x:te.x,y:te.y},k.value):j,$.endHandle,Ic(!!te,H)),!te&&!H&&!A)return Rn(ae);X&&X.source!==X.target&&A&&(Rn(ae),ae=A,A.classList.add("connecting","vue-flow__handle-connecting"),A.classList.toggle("valid",H),A.classList.toggle("vue-flow__handle-valid",H))},z=function(S){(te||A)&&X&&H&&(a?a(S,X):w.connect(X)),w.connectEnd(S),r&&(l==null||l(S)),Rn(ae),cancelAnimationFrame(G),E(S),ie=!1,H=!1,X=null,A=null,O.removeEventListener("mousemove",L),O.removeEventListener("mouseup",z),O.removeEventListener("touchmove",L),O.removeEventListener("touchend",z)};const I=_(he(t));let Z=he(o)||D.value||on;!Z&&I&&(Z=(M?I.isValidSourcePos:I.isValidTargetPos)||on);let te,G=0;const{x:J,y:C}=at(U),ee=O==null?void 0:O.elementFromPoint(J,C),K=po(he(r),ee),re=(x=i.value)==null?void 0:x.getBoundingClientRect();if(!re||!K)return;let ae,j=at(U,re),ie=!1;const ve=Mc({nodes:m.value,nodeId:he(t),handleId:he(e),handleType:K}),b=()=>{if(!g)return;const[S,R]=ba(j,re);d({x:S,y:R}),G=requestAnimationFrame(b)};h({nodeId:he(t),handleId:he(e),type:K},{x:J-re.left,y:C-re.top},U),w.connectStart({event:U,nodeId:he(t),handleId:he(e),handleType:K}),O.addEventListener("mousemove",L),O.addEventListener("mouseup",z),O.addEventListener("touchmove",L),O.addEventListener("touchend",z)}}function Q(U){if(!c.value)return;const x=he(n)==="target";if(!p.value)w.clickConnectStart({event:U,nodeId:he(t),handleId:he(e)}),h({nodeId:he(t),type:he(n),handleId:he(e)},void 0,U,!0);else{let M=he(o)||D.value||on;const N=_(he(t));if(!M&&N&&(M=(x?N.isValidSourcePos:N.isValidTargetPos)||on),N&&(typeof N.connectable>"u"?f.value:N.connectable)===!1)return;const O=Zo(U.target),{connection:L,isValid:z}=ar(U,{nodeId:he(t),id:he(e),type:he(n)},u.value,p.value.nodeId,p.value.handleId||null,p.value.type,M,O,y.value,_),I=L.source===L.target;z&&!I&&w.connect(L),w.clickConnectEnd(U),E(U,!0)}}return{handlePointerDown:q,handleClick:Q}}function mo(){return typeof window<"u"?window:{chrome:!1}}function to(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,r=Mt(o.hasAttribute)?o.hasAttribute("contenteditable"):!1,a=Mt(o.closest)?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(o==null?void 0:o.nodeName)||r||!!a}function $d(e){return e.ctrlKey||e.metaKey||e.shiftKey}function pr(e,t,n,o){const r=t.split("+").map(a=>a.trim().toLowerCase());return r.length===1?e===t:(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),r.every((a,l)=>n.has(a)&&Array.from(n.values())[l]===r[l]))}function Ad(e,t){return n=>Array.isArray(e)?e.some(o=>pr(n.key,o,t,n.type==="keyup")):pr(n.key,e,t,n.type==="keyup")}function Vt(e,t){const n=mo(),o=pe(he(e)===!0);let r=!1;const a=new Set;return ye(o,()=>{t==null||t(o.value)}),ye(()=>he(e),(i,u)=>{if(n&&typeof n.addEventListener<"u"&&oo(n,"blur",()=>{o.value=!1}),zn(u)&&!zn(i)&&l(),i===null){l();return}if(zn(i)){o.value=i;return}(Array.isArray(i)||De(i)&&i.includes("+"))&&(i=Ad(i,a)),i&&(Co(i,s=>{r=$d(s),!(!r&&to(s))&&(s.preventDefault(),o.value=!0)},{eventName:"keydown"}),Co(i,s=>{if(o.value){if(!r&&to(s))return;l()}},{eventName:"keyup"}))},{immediate:!0}),o;function l(){r=!1,a.clear(),o.value=!1}}function Bd(e){const t=e!=null?e:Be(Na,""),n=Be(ka,pe(null)),{findNode:o,edges:r,emits:a}=Ee(),l=o(t);return l||a.error(new Ne(Se.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:l,parentNode:se(()=>o(l.parentNode)),connectedEdges:se(()=>Nn([l],r.value))}}function zd(){return{doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),dragStart:F(),drag:F(),dragStop:F()}}function Rd(e,t){const n=zd();return n.doubleClick.on(o=>{var r,a;t.nodeDoubleClick(o),(a=(r=e.events)==null?void 0:r.doubleClick)==null||a.call(r,o)}),n.click.on(o=>{var r,a;t.nodeClick(o),(a=(r=e.events)==null?void 0:r.click)==null||a.call(r,o)}),n.mouseEnter.on(o=>{var r,a;t.nodeMouseEnter(o),(a=(r=e.events)==null?void 0:r.mouseEnter)==null||a.call(r,o)}),n.mouseMove.on(o=>{var r,a;t.nodeMouseMove(o),(a=(r=e.events)==null?void 0:r.mouseMove)==null||a.call(r,o)}),n.mouseLeave.on(o=>{var r,a;t.nodeMouseLeave(o),(a=(r=e.events)==null?void 0:r.mouseLeave)==null||a.call(r,o)}),n.contextMenu.on(o=>{var r,a;t.nodeContextMenu(o),(a=(r=e.events)==null?void 0:r.contextMenu)==null||a.call(r,o)}),n.dragStart.on(o=>{var r,a;t.nodeDragStart(o),(a=(r=e.events)==null?void 0:r.dragStart)==null||a.call(r,o)}),n.drag.on(o=>{var r,a;t.nodeDrag(o),(a=(r=e.events)==null?void 0:r.drag)==null||a.call(r,o)}),n.dragStop.on(o=>{var r,a;t.nodeDragStop(o),(a=(r=e.events)==null?void 0:r.dragStop)==null||a.call(r,o)}),Object.entries(n).reduce((o,[r,a])=>(o.emit[r]=a.trigger,o.on[r]=a.on,o),{emit:{},on:{}})}function Da(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:r,snapToGrid:a,nodesDraggable:l,emits:i}=Ee();return(u,s=!1)=>{const c=a.value?r.value[0]:5,p=a.value?r.value[1]:5,f=s?4:1,g=u.x*c*f,_=u.y*p*f,d=e.value.filter(m=>m.draggable||l&&typeof m.draggable>"u").map(m=>{const h={x:m.computedPosition.x+g,y:m.computedPosition.y+_},{computedPosition:v}=fo(m,h,i.error,t.value,m.parentNode?o(m.parentNode):void 0);return{id:m.id,position:v,from:m.position,distance:{x:u.x,y:u.y},dimensions:m.dimensions}});n(d,!0,!1)}}const Vn=.1;function qe(){return Promise.resolve(!1)}const Vd={zoomIn:qe,zoomOut:qe,zoomTo:qe,fitView:qe,setCenter:qe,fitBounds:qe,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:qe,setTransform:qe,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),initialized:!1};function Yd(e,t){const n=e,o=_e(n,"vueFlowRef"),r=_e(n,"nodes"),a=_e(n,"d3Zoom"),l=_e(n,"d3Selection"),i=_e(n,"dimensions"),u=_e(n,"translateExtent"),s=_e(n,"minZoom"),c=_e(n,"maxZoom"),p=_e(n,"viewport"),f=_e(n,"snapToGrid"),g=_e(n,"snapGrid"),{getNodes:_}=t,d=pe(!1);Je(()=>!!a.value&&!!l.value&&!!i.value.width&&!!i.value.height).toBe(!0).then(()=>{d.value=!0});function m(v,E){return new Promise(w=>{l.value&&a.value?a.value.scaleBy(Yn(l.value,E,()=>{w(!0)}),v):w(!1)})}function h(v,E,w,k){return new Promise(y=>{const{x:D,y:X}=ca({x:-v,y:-E},u.value),H=Ct.translate(-D,-X).scale(w);l.value&&a.value?a.value.transform(Yn(l.value,k,()=>{y(!0)}),H):y(!1)})}return se(()=>d.value?{initialized:!0,zoomIn:v=>m(1.2,v==null?void 0:v.duration),zoomOut:v=>m(1/1.2,v==null?void 0:v.duration),zoomTo:(v,E)=>new Promise(w=>{l.value&&a.value?a.value.scaleTo(Yn(l.value,E==null?void 0:E.duration,()=>{w(!0)}),v):w(!1)}),setViewport:(v,E)=>h(v.x,v.y,v.zoom,E==null?void 0:E.duration),setTransform:(v,E)=>h(v.x,v.y,v.zoom,E==null?void 0:E.duration),getViewport:()=>({x:p.value.x,y:p.value.y,zoom:p.value.zoom}),getTransform:()=>({x:p.value.x,y:p.value.y,zoom:p.value.zoom}),fitView:(v={padding:Vn,includeHiddenNodes:!1,duration:0})=>{var X,H,A;const E=(v.includeHiddenNodes?r.value:_.value).filter(q=>{var Q;const U=q.initialized&&q.dimensions.width&&q.dimensions.height;let x=!0;return(Q=v.nodes)!=null&&Q.length&&(x=v.nodes.includes(q.id)),U&&x});if(!E.length)return Promise.resolve(!1);const w=va(E),{x:k,y,zoom:D}=qo(w,i.value.width,i.value.height,(X=v.minZoom)!=null?X:s.value,(H=v.maxZoom)!=null?H:c.value,(A=v.padding)!=null?A:Vn,v.offset);return h(k,y,D,v==null?void 0:v.duration)},setCenter:(v,E,w)=>{const k=typeof(w==null?void 0:w.zoom)<"u"?w.zoom:c.value,y=i.value.width/2-v*k,D=i.value.height/2-E*k;return h(y,D,k,w==null?void 0:w.duration)},fitBounds:(v,E={padding:Vn})=>{const{x:w,y:k,zoom:y}=qo(v,i.value.width,i.value.height,s.value,c.value,E.padding);return h(w,k,y,E==null?void 0:E.duration)},project:v=>Kn(v,p.value,f.value,g.value),screenToFlowCoordinate:v=>{if(o.value){const{x:E,y:w}=o.value.getBoundingClientRect(),k={x:v.x-E,y:v.y-w};return Kn(k,p.value,f.value,g.value)}return{x:0,y:0}},flowToScreenCoordinate:v=>{if(o.value){const{x:E,y:w}=o.value.getBoundingClientRect(),k={x:v.x+E,y:v.y+w};return pa(k,p.value)}return{x:0,y:0}}}:Vd)}function Yn(e,t=0,n){return e.transition().duration(t).on("end",n)}function Hd(e,t,n){const o=mr();return o.run(()=>{const r=()=>{o.run(()=>{let _,d,m=!!(n.nodes.value.length||n.edges.value.length);_=vt([e.modelValue,()=>{var h,v;return(v=(h=e.modelValue)==null?void 0:h.value)==null?void 0:v.length}],([h])=>{h&&Array.isArray(h)&&(d==null||d.pause(),n.setElements(h),!d&&!m&&h.length?m=!0:d==null||d.resume())}),d=vt([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([h,v])=>{var E;(E=e.modelValue)!=null&&E.value&&Array.isArray(e.modelValue.value)&&(_==null||_.pause(),e.modelValue.value=[...h,...v],Ke(()=>{_==null||_.resume()}))},{immediate:m}),rn(()=>{_==null||_.stop(),d==null||d.stop()})})},a=()=>{o.run(()=>{let _,d,m=!!n.nodes.value.length;_=vt([e.nodes,()=>{var h,v;return(v=(h=e.nodes)==null?void 0:h.value)==null?void 0:v.length}],([h])=>{h&&Array.isArray(h)&&(d==null||d.pause(),n.setNodes(h),!d&&!m&&h.length?m=!0:d==null||d.resume())}),d=vt([n.nodes,()=>n.nodes.value.length],([h])=>{var v;(v=e.nodes)!=null&&v.value&&Array.isArray(e.nodes.value)&&(_==null||_.pause(),e.nodes.value=[...h],Ke(()=>{_==null||_.resume()}))},{immediate:m}),rn(()=>{_==null||_.stop(),d==null||d.stop()})})},l=()=>{o.run(()=>{let _,d,m=!!n.edges.value.length;_=vt([e.edges,()=>{var h,v;return(v=(h=e.edges)==null?void 0:h.value)==null?void 0:v.length}],([h])=>{h&&Array.isArray(h)&&(d==null||d.pause(),n.setEdges(h),!d&&!m&&h.length?m=!0:d==null||d.resume())}),d=vt([n.edges,()=>n.edges.value.length],([h])=>{var v;(v=e.edges)!=null&&v.value&&Array.isArray(e.edges.value)&&(_==null||_.pause(),e.edges.value=[...h],Ke(()=>{_==null||_.resume()}))},{immediate:m}),rn(()=>{_==null||_.stop(),d==null||d.stop()})})},i=()=>{o.run(()=>{ye(()=>t.maxZoom,()=>{t.maxZoom&&me(t.maxZoom)&&n.setMaxZoom(t.maxZoom)})})},u=()=>{o.run(()=>{ye(()=>t.minZoom,()=>{t.minZoom&&me(t.minZoom)&&n.setMinZoom(t.minZoom)})})},s=()=>{o.run(()=>{ye(()=>t.translateExtent,()=>{t.translateExtent&&me(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)})})},c=()=>{o.run(()=>{ye(()=>t.nodeExtent,()=>{t.nodeExtent&&me(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)})})},p=()=>{o.run(()=>{ye(()=>t.applyDefault,()=>{me(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)})})},f=()=>{o.run(()=>{const _=d=>gt(this,null,function*(){let m=d;Mt(t.autoConnect)&&(m=yield t.autoConnect(d)),m!==!1&&n.addEdges([m])});ye(()=>t.autoConnect,()=>{me(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)}),ye(n.autoConnect,(d,m,h)=>{d?n.onConnect(_):n.hooks.value.connect.off(_),h(()=>{n.hooks.value.connect.off(_)})},{immediate:!0})})},g=()=>{const _=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach(d=>{if(!_.includes(d)){const m=cn(t,d),h=n[d];o.run(()=>{ye(m,v=>{me(v)&&(h.value=v)},{flush:"pre"})})}})};r(),a(),l(),u(),i(),s(),c(),p(),f(),g()}),()=>o.stop()}function gr(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Ld={name:"Pane",compatConfig:{MODE:3}},Fd=xe(fe(B({},Ld),{props:{isSelecting:{type:Boolean}},setup(e){const{id:t,vueFlowRef:n,getNodes:o,getEdges:r,viewport:a,emits:l,userSelectionActive:i,removeSelectedElements:u,panOnDrag:s,userSelectionRect:c,elementsSelectable:p,nodesSelectionActive:f,addSelectedElements:g,getSelectedEdges:_,getSelectedNodes:d,removeNodes:m,removeEdges:h,selectionMode:v,deleteKeyCode:E,multiSelectionKeyCode:w,multiSelectionActive:k}=Ee(),y=pe(null),D=pe(0),X=pe(0),H=pe(),A=se(()=>p.value&&(e.isSelecting||i.value));Vt(E,I=>{if(!I)return;const Z=o.value.reduce((te,G)=>((!G.selected&&G.parentNode&&te.find(J=>J.id===G.parentNode)||G.selected)&&te.push(G),te),[]);(Z||_.value)&&(_.value.length>0&&h(_.value),Z.length>0&&m(Z),f.value=!1,u())}),Vt(w,I=>{k.value=I});function q(){i.value=!1,c.value=null,D.value=0,X.value=0}function Q(I){I.target!==y.value||A.value||(l.paneClick(I),u(),f.value=!1)}function U(I){var Z;if(I.target===y.value){if(Array.isArray(s.value)&&(Z=s.value)!=null&&Z.includes(2)){I.preventDefault();return}l.paneContextMenu(I)}}function x(I){I.target===y.value&&l.paneScroll(I)}function M(I){if(H.value=n.value.getBoundingClientRect(),!A.value||!p||!e.isSelecting||I.button!==0||I.target!==y.value||!H.value)return;const{x:Z,y:te}=gr(I,H.value);u(),c.value={width:0,height:0,startX:Z,startY:te,x:Z,y:te},i.value=!0,l.selectionStart(I)}function N(I){var K,re;if(!A.value)return l.paneMouseMove(I);if(!e.isSelecting||!H.value||!c.value)return;i.value||(i.value=!0),f.value&&(f.value=!1);const Z=gr(I,H.value),te=(K=c.value.startX)!=null?K:0,G=(re=c.value.startY)!=null?re:0,J=fe(B({},c.value),{x:Z.x<te?Z.x:te,y:Z.y<G?Z.y:G,width:Math.abs(Z.x-te),height:Math.abs(Z.y-G)}),C=ma(o.value,c.value,a.value,v.value===co.Partial),ee=Nn(C,r.value);D.value=C.length,X.value=ee.length,c.value=J,g([...C,...ee])}function O(I){A.value&&I.button===0&&(!i.value&&c.value&&I.target===y.value&&Q(I),f.value=D.value>0,q(),l.selectionEnd(I))}function L(I){var Z;if(!A.value)return l.paneMouseLeave(I);i.value&&(f.value=D.value>0,(Z=l.selectionEnd)==null||Z.call(l,I)),q()}function z(I){A.value||l.paneMouseEnter(I)}return(I,Z)=>(oe(),ce("div",{ref_key:"container",ref:y,key:`pane-${T(t)}`,class:lt(["vue-flow__pane vue-flow__container",{selection:e.isSelecting}]),onClick:Q,onContextmenu:U,onWheelPassive:x,onMouseenter:z,onMousedown:M,onMousemove:N,onMouseup:O,onMouseleave:L},[Pe(I.$slots,"default"),T(i)&&T(c)?(oe(),Le(Nd,{key:0,"user-selection-rect":T(c)},null,8,["user-selection-rect"])):ke("",!0),T(f)&&T(d).length?(oe(),Le(Ed,{key:1})):ke("",!0)],34))}})),Xd={class:"vue-flow__nodes vue-flow__container"},Gd={name:"Nodes",compatConfig:{MODE:3}},Ud=xe(fe(B({},Gd),{setup(e){const t=Be(In),{nodesDraggable:n,nodesFocusable:o,elementsSelectable:r,nodesConnectable:a,getNodes:l,getNodesInitialized:i,areNodesInitialized:u,getNodeTypes:s,updateNodeDimensions:c,emits:p}=Ee(),f=pe(),g=bn();Je(()=>u.value).toBe(!0).then(()=>{Ke(()=>{p.nodesInitialized(i.value)})}),Qe(()=>{f.value=new ResizeObserver(E=>{const w=E.map(k=>({id:k.target.getAttribute("data-id"),nodeElement:k.target,forceUpdate:!0}));Ke(()=>c(w))})}),Nr(()=>{var E;return(E=f.value)==null?void 0:E.disconnect()});function _(E){return typeof E>"u"?n.value:E}function d(E){return typeof E>"u"?r.value:E}function m(E){return typeof E>"u"?a.value:E}function h(E){return typeof E>"u"?o.value:E}function v(E,w){const k=E||"default",y=t==null?void 0:t[`node-${k}`];if(y)return y;let D=w!=null?w:s.value[k];if(typeof D=="string"&&g){const X=Object.keys(g.appContext.components);X&&X.includes(k)&&(D=St(k,!1))}return D&&typeof D!="string"?D:(p.error(new Ne(Se.NODE_TYPE_MISSING,D)),!1)}return(E,w)=>(oe(),ce("div",Xd,[f.value?(oe(!0),ce(Me,{key:0},it(T(l),k=>(oe(),Le(T(Fc),{id:k.id,key:k.id,"resize-observer":f.value,type:v(k.type,k.template),name:k.type||"default",draggable:_(k.draggable),selectable:d(k.selectable),connectable:m(k.connectable),focusable:h(k.focusable),node:k},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","focusable","node"]))),128)):ke("",!0)]))}})),jd=["id","markerWidth","markerHeight","markerUnits","orient"],Zd={name:"MarkerType",compatConfig:{MODE:3}},qd=xe(fe(B({},Zd),{props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(oe(),ce("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===T(Gt).ArrowClosed?(oe(),ce("polyline",{key:0,style:ze({stroke:e.color,fill:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):ke("",!0),e.type===T(Gt).Arrow?(oe(),ce("polyline",{key:1,style:ze({stroke:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):ke("",!0)],8,jd))}})),Wd={name:"MarkerDefinitions",compatConfig:{MODE:3}},Kd=xe(fe(B({},Wd),{setup(e){const t=Ee(),n=_e(t,"id"),o=_e(t,"edges"),r=_e(t,"connectionLineOptions"),a=_e(t,"defaultMarkerColor"),l=se(()=>{const i=[],u=[],s=c=>{if(c){const p=nt(c,n.value);i.includes(p)||(typeof c=="object"?u.push(fe(B({},c),{id:p,color:c.color||a.value})):u.push({id:p,color:a.value,type:c}),i.push(p))}};return[r.value.markerEnd,r.value.markerStart].forEach(s),o.value.reduce((c,p)=>([p.markerStart,p.markerEnd].forEach(s),c.sort((f,g)=>f.id.localeCompare(g.id))),u),u});return(i,u)=>(oe(),ce("defs",null,[(oe(!0),ce(Me,null,it(T(l),s=>(oe(),Le(qd,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,"stroke-width":s.strokeWidth,orient:s.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}})),Jd={class:"vue-flow__edges vue-flow__container"},Qd={name:"Edges",compatConfig:{MODE:3}},ef=xe(fe(B({},Qd),{setup(e){const t=Be(In),{edgesUpdatable:n,edgesFocusable:o,elementsSelectable:r,findNode:a,getEdges:l,getEdgeTypes:i,elevateEdgesOnSelect:u,dimensions:s,emits:c}=Ee(),p=bn();function f(m){return typeof m>"u"?r.value:m}function g(m){return typeof m>"u"?n.value:m}function _(m){return typeof m>"u"?o.value:m}function d(m,h){const v=m||"default",E=t==null?void 0:t[`edge-${v}`];if(E)return E;let w=h!=null?h:i.value[v];if(typeof w=="string"&&p){const k=Object.keys(p.appContext.components);k&&k.includes(v)&&(w=St(v,!1))}return w&&typeof w!="string"?w:(c.error(new Ne(Se.EDGE_TYPE_MISSING,w)),!1)}return(m,h)=>T(s).width&&T(s).height?(oe(),ce(Me,{key:0},[(oe(),ce("svg",Jd,[we(Kd)])),(oe(!0),ce(Me,null,it(T(l),v=>(oe(),ce("svg",{key:v.id,class:"vue-flow__edges vue-flow__container",style:ze({zIndex:T(kc)(v,T(a),T(u))})},[we(T(pd),{id:v.id,edge:v,type:d(v.type,v.template),name:v.type||"default",selectable:f(v.selectable),updatable:g(v.updatable),focusable:_(v.focusable)},null,8,["id","edge","type","name","selectable","updatable","focusable"])],4))),128)),we(T(xd))],64)):ke("",!0)}})),tf=be("div",{class:"vue-flow__edge-labels"},null,-1),nf={name:"Transform",compatConfig:{MODE:3}},of=xe(fe(B({},nf),{setup(e){const{id:t,viewport:n,d3Zoom:o,d3Selection:r,dimensions:a}=Ee(),l=pe(!Mr);return Je(()=>o.value&&r.value&&a.value.width>0&&a.value.height>0).toBe(!0).then(()=>{setTimeout(()=>{l.value=!0},1)}),(i,u)=>(oe(),ce("div",{key:`transform-${T(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:ze({transform:`translate(${T(n).x}px,${T(n).y}px) scale(${T(n).zoom})`,opacity:l.value?void 0:0})},[we(ef),tf,we(Ud),Pe(i.$slots,"default")],4))}})),rf={name:"Viewport",compatConfig:{MODE:3}},af=xe(fe(B({},rf),{setup(e){const{id:t,minZoom:n,maxZoom:o,defaultViewport:r,translateExtent:a,dimensions:l,zoomActivationKeyCode:i,selectionKeyCode:u,panActivationKeyCode:s,panOnScroll:c,panOnScrollMode:p,panOnScrollSpeed:f,panOnDrag:g,zoomOnDoubleClick:_,zoomOnPinch:d,zoomOnScroll:m,preventScrolling:h,noWheelClassName:v,noPanClassName:E,emits:w,connectionStartHandle:k,userSelectionActive:y,paneDragging:D,d3Zoom:X,d3Selection:H,d3ZoomHandler:A,viewport:q,viewportRef:Q}=Ee(),U=pe(),x=pe(!1),M=pe(!1),N=pe(!1),O=pe();let L=!1,z=0,I={x:0,y:0,zoom:0};const Z=Vt(s),te=se(()=>!x.value&&g.value&&Z.value),G=se(()=>u.value!==!0&&x.value||u.value===!0&&!te.value);Qe(()=>{Ol(U,re);const j=mo();oo(j,"resize",re)}),Qe(()=>{var ne,le,ue;const j=U.value,ie=j.getBoundingClientRect(),ve=sc().scaleExtent([n.value,o.value]).translateExtent(a.value),b=$e(j).call(ve),S=b.on("wheel.zoom"),R=Ct.translate((ne=r.value.x)!=null?ne:0,(le=r.value.y)!=null?le:0).scale(dt((ue=r.value.zoom)!=null?ue:1,n.value,o.value)),$=[[0,0],[ie.width,ie.height]],Y=ve.constrain()(R,$,a.value);ve.transform(b,Y),ve.wheelDelta(C),X.value=ve,H.value=b,A.value=S,q.value={x:Y.x,y:Y.y,zoom:Y.k},Q.value=j,Vt(u,P=>{x.value=P});const V=Vt(i);_o(()=>{x.value&&y.value&&!M.value?ve.on("zoom",null):!x.value&&!y.value&&ve.on("zoom",P=>{q.value={x:P.transform.x,y:P.transform.y,zoom:P.transform.k};const de=K(P.transform);L=J(g.value,z!=null?z:0),w.viewportChange(de),w.move({event:P,flowTransform:de})})}),ve.on("start",P=>{var de;if(!P.sourceEvent)return null;z=P.sourceEvent.button,M.value=!0;const Ce=K(P.transform);((de=P.sourceEvent)==null?void 0:de.type)==="mousedown"&&(D.value=!0),I=Ce,w.viewportChangeStart(Ce),w.moveStart({event:P,flowTransform:Ce})}),ve.on("end",P=>{if(!P.sourceEvent)return null;if(M.value=!1,D.value=!1,J(g.value,z!=null?z:0)&&!L&&w.paneContextMenu(P.sourceEvent),L=!1,ee(I,P.transform)){const de=K(P.transform);I=de,w.viewportChangeEnd(de),w.moveEnd({event:P,flowTransform:de})}}),_o(()=>{c.value&&!V.value&&!y.value?b.on("wheel.zoom",P=>{if(ae(P,v.value))return!1;P.preventDefault(),P.stopImmediatePropagation();const de=b.property("__zoom").k||1,Ce=yn();if(P.ctrlKey&&d&&Ce){const $a=Ve(P),Aa=C(P),Ba=de*pt(2,Aa);ve.scaleTo(b,Ba,$a,P);return}const Tt=P.deltaMode===1?20:1;let Ot=p.value===Rt.Vertical?0:P.deltaX*Tt,ft=p.value===Rt.Horizontal?0:P.deltaY*Tt;!Ce&&P.shiftKey&&p.value!==Rt.Vertical&&!Ot&&ft&&(Ot=ft,ft=0),ve.translateBy(b,-(Ot/de)*f.value,-(ft/de)*f.value);const ht=K(b.property("__zoom"));clearTimeout(O.value),N.value||(N.value=!0,w.moveStart({event:P,flowTransform:ht}),w.viewportChangeStart(ht)),N.value&&(w.move({event:P,flowTransform:ht}),w.viewportChange(ht),O.value=setTimeout(()=>{w.moveEnd({event:P,flowTransform:ht}),w.viewportChangeEnd(ht),N.value=!1},150))},{passive:!1}):typeof S<"u"&&b.on("wheel.zoom",function(P,de){if(!h.value||ae(P,v.value))return null;P.preventDefault(),S.call(this,P,de)},{passive:!1})}),ve.filter(P=>{var de,Ce;const Tt=V.value||m.value,Ot=d.value&&P.ctrlKey;if((g.value===!0||Array.isArray(g.value)&&g.value.includes(1))&&P.button===1&&P.type==="mousedown"&&((de=P.target)!=null&&de.closest(".vue-flow__node")||(Ce=P.target)!=null&&Ce.closest(".vue-flow__edge")))return!0;if(!g.value&&!Tt&&!c.value&&!_.value&&!d.value||y.value||!_.value&&P.type==="dblclick"||ae(P,v.value)&&P.type==="wheel"||ae(P,E.value)&&(!c.value&&P.type!=="wheel"||c.value&&P.type==="wheel")||!d.value&&P.ctrlKey&&P.type==="wheel"||!Tt&&!c.value&&!Ot&&P.type==="wheel"||!g.value&&(P.type==="mousedown"||P.type==="touchstart")||Array.isArray(g.value)&&!g.value.includes(P.button)&&(P.type==="mousedown"||P.type==="touchstart"))return!1;const ft=Array.isArray(g.value)&&g.value.includes(P.button)||!P.button||P.button<=1;return(!P.ctrlKey||P.type==="wheel")&&ft})});function J(j,ie){return ie===2&&Array.isArray(j)&&j.includes(2)}function C(j){const ie=j.ctrlKey&&yn()?10:1;return-j.deltaY*(j.deltaMode===1?.05:j.deltaMode?1:.002)*ie}function ee(j,ie){return j.x!==ie.x&&!isNaN(ie.x)||j.y!==ie.y&&!isNaN(ie.y)||j.zoom!==ie.k&&!isNaN(ie.k)}function K(j){return{x:j.x,y:j.y,zoom:j.k}}function re(){if(!U.value)return;const{width:j,height:ie}=Sn(U.value);(j===0||ie===0)&&w.error(new Ne(Se.MISSING_VIEWPORT_DIMENSIONS)),l.value.width=j||500,l.value.height=ie||500}function ae(j,ie){return j.target.closest(`.${ie}`)}return(j,ie)=>(oe(),ce(Me,null,[(oe(),ce("div",{ref_key:"viewportEl",ref:U,key:`viewport-${T(t)}`,class:"vue-flow__viewport vue-flow__container"},[we(Fd,{"is-selecting":T(G),class:lt({connecting:!!T(k),dragging:T(D),draggable:!!T(g)})},{default:Ie(()=>[we(of,null,{default:Ie(()=>[Pe(j.$slots,"zoom-pane")]),_:3})]),_:3},8,["is-selecting","class"])])),Pe(j.$slots,"default")],64))}})),lf=["id"],uf=["id"],sf=["id"],cf={name:"A11yDescriptions",compatConfig:{MODE:3}},df=xe(fe(B({},cf),{setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Ee(),r={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"};return(a,l)=>(oe(),ce(Me,null,[be("div",{id:`${T(ia)}-${T(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+ut(T(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,lf),be("div",{id:`${T(ua)}-${T(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,uf),T(n)?ke("",!0):(oe(),ce("div",{key:0,id:`${T(cc)}-${T(t)}`,"aria-live":"assertive","aria-atomic":"true",style:r},ut(T(o)),9,sf))],64))}})),ff={name:"VueFlow",compatConfig:{MODE:3}},hf=xe(fe(B({},ff),{props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:null,isValidConnection:{type:Function,default:void 0},deleteKeyCode:{type:[Boolean,String,Function],default:void 0},selectionKeyCode:{type:[Boolean,String,Function],default:void 0},multiSelectionKeyCode:{type:[Boolean,String,Function],default:void 0},zoomActivationKeyCode:{type:[Boolean,String,Function],default:void 0},panActivationKeyCode:{type:[Boolean,String,Function],default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:null,elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:Boolean,default:void 0},minZoom:null,maxZoom:null,defaultViewport:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:null,edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null,elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},__experimentalFeatures:null},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","error","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,r=zt(o,"modelValue",n),a=zt(o,"nodes",n),l=zt(o,"edges",n),_=Ee(o),{vueFlowRef:i,hooks:u,getNodeTypes:s,getEdgeTypes:c}=_,p=Pt(_,["vueFlowRef","hooks","getNodeTypes","getEdgeTypes"]),f=Hd({modelValue:r,nodes:a,edges:l},o,B({vueFlowRef:i,hooks:u,getNodeTypes:s,getEdgeTypes:c},p));$c(n,u);const g=pe();return je(In,Ga()),vr(()=>{f()}),Qe(()=>{i.value=g.value}),t(B({vueFlowRef:i,hooks:u,getNodeTypes:s,getEdgeTypes:c},p)),(d,m)=>(oe(),ce("div",{ref_key:"el",ref:g,class:"vue-flow"},[we(af,null,{nodes:Ie(()=>[(oe(!0),ce(Me,null,it(Object.keys(T(s)),h=>Pe(d.$slots,`node-${h}`)),256))]),edges:Ie(()=>[(oe(!0),ce(Me,null,it(Object.keys(T(c)),h=>Pe(d.$slots,`edge-${h}`)),256))]),"connection-name":Ie(()=>[Pe(d.$slots,"connection-line")]),"zoom-pane":Ie(()=>[Pe(d.$slots,"zoom-pane")]),default:Ie(()=>[Pe(d.$slots,"default")]),_:3}),we(df)],512))}})),pf={class:"truncate font-mono"},gf={inheritAttrs:!1},vf=Object.assign(gf,{__name:"TableEdge",props:{id:{type:String,required:!0},sourceX:{type:Number,required:!0},sourceY:{type:Number,required:!0},targetX:{type:Number,required:!0},targetY:{type:Number,required:!0},sourcePosition:{type:String,required:!0},targetPosition:{type:String,required:!0},data:{type:Object,required:!1},markerEnd:{type:String,required:!1},style:{type:Object,required:!1}},setup(e){const t=e,n=Be("state"),o=se(()=>go(t)),r=[{group:"Cardinality",items:[{label:"One to One",onClick:()=>n.setCardinality(t.id,"1:1")},{label:"One to Many",onClick:()=>n.setCardinality(t.id,"1:N")},{label:"Many to One",onClick:()=>n.setCardinality(t.id,"N:1")},{label:"Many to Many",onClick:()=>n.setCardinality(t.id,"N:N")}]},{group:"Actions",items:[{label:"Delete",icon:"trash",onClick:()=>n.deleteRelationship(t.id)}]}];return(a,l)=>{const i=St("Button"),u=St("Dropdown");return oe(),ce(Me,null,[we(T(qt),{id:e.id,style:ze(e.style),path:o.value[0],"marker-end":e.markerEnd},null,8,["id","style","path","marker-end"]),we(T(md),null,{default:Ie(()=>[be("div",{style:ze({pointerEvents:"all",position:"absolute",transform:`translate(-50%, -50%) translate(${o.value[1]}px,${o.value[2]}px)`}),class:"nodrag nopan"},[we(u,{options:r},{default:Ie(()=>[we(i,{variant:"outline"},{default:Ie(()=>[be("span",pf,ut(e.data.cardinality||"1:1"),1)]),_:1})]),_:1})],4)]),_:1})],64)}}}),mf={class:"w-56 overflow-hidden rounded bg-white shadow"},yf={class:"flex items-center border-b bg-gray-50 px-4 py-2"},bf={class:"truncate font-medium"},xf={class:"nowheel flex max-h-72 flex-col overflow-y-scroll"},_f=["onDragstart","onDrop","onDragenter"],wf={class:"truncate"},Ef={__name:"TableNode",props:{tablename:{type:String,required:!0}},setup(e){return gt(this,null,function*(){let t,n;const o=e,r=Be("state"),a=Be("edges"),l=([t,n]=kr(()=>Cr({name:o.tablename})),t=yield t,n(),t),i=pe([...l.doc.columns]);ye(a,()=>{var _;if(!((_=a.value)!=null&&_.length))return;const f=a.value.filter(d=>d.data.primary_table===l.doc.table||d.data.foreign_table===l.doc.table).map(d=>d.data.primary_table===l.doc.table?d.data.primary_column:d.data.foreign_column),g=[...l.doc.columns];g.sort((d,m)=>f.includes(d.column)&&!f.includes(m.column)?-1:!f.includes(d.column)&&f.includes(m.column)?1:0),i.value=g},{immediate:!0});function u(f,g){f.dataTransfer&&(f.dataTransfer.setData("dragging-column",JSON.stringify({table:l.doc.table,column:g.column,label:g.label,type:g.type})),f.dataTransfer.effectAllowed="move")}function s(f){f.preventDefault(),f.dataTransfer&&(f.dataTransfer.dropEffect="move")}function c(f,g){var h;r.highlightColumn(null),f.preventDefault(),f.stopPropagation();const _=(h=f.dataTransfer)==null?void 0:h.getData("dragging-column");if(!_)return;const d=JSON.parse(_);if(d.table===l.doc.table)return;const m={table:l.doc.table,column:g.column,label:g.label,type:g.type};r.createRelationship(d,m)}function p(f){return r.highlightedColumn?r.highlightedColumn.table===f.table&&r.highlightedColumn.column===f.column:!1}return(f,g)=>(oe(),ce("div",mf,[be("div",yf,[be("span",bf,ut(T(l).doc.label),1)]),be("div",xf,[(oe(!0),ce(Me,null,it(i.value,(_,d)=>(oe(),ce("div",{key:_.column,class:lt(["nodrag group relative flex cursor-pointer items-center border-b px-3 py-2 text-sm hover:bg-gray-50",p(_)?"bg-gray-100":""]),draggable:!0,onDragover:s,onDragstart:m=>u(m,_),onDrop:m=>c(m,_),onDragenter:m=>T(r).highlightColumn(_)},[(oe(),Le(Sr(T(La)[_.type]),{class:"mr-2 h-4 w-4 text-gray-500"})),be("span",wf,ut(_.label),1),we(T(It),{class:"invisible",id:_.column,type:"source",position:T(W).Right,style:{right:"0px",top:"15px"}},null,8,["id","position"]),we(T(It),{class:"invisible",id:_.column,type:"target",position:T(W).Left,style:{left:"0px",top:"15px"}},null,8,["id","position"])],42,_f))),128))])]))})}},Sf={class:"flex w-56 items-center justify-center overflow-hidden rounded bg-white py-8 shadow"},Nf={key:0,class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 transform text-center text-gray-700"},kf={class:"flex w-[21rem] flex-shrink-0 flex-col gap-3 overflow-hidden bg-white p-4 shadow"},Cf=be("div",{class:"flex items-center justify-between"},[be("div",{class:"text-xl font-medium"},"Tables")],-1),Mf={class:"flex-1 overflow-hidden"},If={key:0,class:"flex h-full flex-col gap-2 overflow-x-hidden overflow-y-scroll"},Tf=["onDragstart"],Of={class:"flex items-center space-x-2 py-1"},Pf={key:1,class:"flex h-full items-center justify-center"},Df=be("div",{class:"text-center text-gray-600"},[Er(" No tables. "),be("div",{class:"mt-1 text-base text-gray-700"},"No tables to display.")],-1),$f=[Df],Af={__name:"TableRelationshipEditor",setup(e){return gt(this,null,function*(){let t,n;const o=Be("dataSource"),r=pe(""),a=se(()=>r.value?o.tableList.filter(h=>!h.is_query_based&&h.label.toLowerCase().includes(r.value.toLowerCase())).slice(0,100):o.tableList.filter(h=>!h.is_query_based).slice(0,100)),l=_r({highlightedColumn:null,highlightColumn(h){l.highlightedColumn=h},createRelationship(h,v){if(!h.table||!h.column||!v.table||!v.column){console.warn("Invalid relationship");return}const E={id:`${h.table}.${h.column} -> ${v.table}.${v.column}`,source:h.table,target:v.table,sourceHandle:h.column,targetHandle:v.column,type:"custom",data:{primary_table:h.table,primary_column:h.column,foreign_table:v.table,foreign_column:v.column,cardinality:"1:1"},markerEnd:Gt.ArrowClosed};i.addEdges([E]),o.updateTableRelationship(E.data)},setCardinality(h,v){const E=i.findEdge(h);E&&(E.data.cardinality=v,o.updateTableRelationship(E.data))},deleteRelationship(h){const v=i.findEdge(h);o.deleteTableRelationship(v.data),i.removeEdges([h])}});je("state",l);const i=Ee({nodes:[]}),u=el(`insights:${o.doc.name}:${o.doc.creation}:nodes`,[]),s=se(()=>i.nodes.value),c=se(()=>i.edges.value);if(je("edges",c),u.value.length){i.addNodes(u.value);const h=u.value.map(v=>v.type=="table"?d(v.data.tablename):Promise.resolve());[t,n]=kr(()=>Promise.all(h)),yield t,n()}Fa(s,h=>{JSON.stringify(h)!=JSON.stringify(u.value)&&(u.value=h)},{deep:!0,debounce:1e3});function p(h,v){h.dataTransfer&&(h.dataTransfer.setData("dragging-table",JSON.stringify(v)),h.dataTransfer.effectAllowed="move")}function f(h){h.preventDefault(),h.dataTransfer&&(h.dataTransfer.dropEffect="move")}const g=Be("$notify");function _(h){return gt(this,null,function*(){var y;h.preventDefault();const v=JSON.parse((y=h.dataTransfer)==null?void 0:y.getData("dragging-table"));if(!v)return;if(i.findNode(v.table)){g({title:"Table already added",variant:"warning"});return}const{left:E,top:w}=i.vueFlowRef.value.getBoundingClientRect(),k={id:v.table,type:"table",data:{tablename:v.name},position:i.project({x:h.clientX-E,y:h.clientY-w})};i.addNodes([k]),d(v.name),Ke(()=>{const D=i.findNode(k.id),X=ye(()=>D.dimensions,H=>{H.width>0&&H.height>0&&(D.position={x:D.position.x-D.dimensions.width/2,y:D.position.y-D.dimensions.height/2},X())},{deep:!0,flush:"post"})})})}function d(h){return gt(this,null,function*(){const v=yield Cr({name:h});yield Xa(()=>v.doc.name),v.doc.table_links&&v.doc.table_links.forEach(E=>{if(!i.findNode(E.foreign_table))return;const k={primary_table:v.doc.table,primary_column:E.primary_key,foreign_table:E.foreign_table,foreign_column:E.foreign_key,cardinality:E.cardinality},y={id:`${v.doc.table}.${E.primary_key} -> ${E.foreign_table}.${E.foreign_key}`,source:v.doc.table,target:E.foreign_table,sourceHandle:E.primary_key,targetHandle:E.foreign_key,type:"custom",data:k,markerEnd:Gt.ArrowClosed};i.findEdge(y.id)||i.addEdges([y])})})}function m(h){if(h!=null&&h[0]&&h[0].type=="remove"){const[v,E]=h[0].id.split(" -> "),[w,k]=v.split("."),[y,D]=E.split(".");o.deleteTableRelationship({primary_table:w,primary_column:k,foreign_table:y,foreign_column:D})}}return(h,v)=>{const E=St("LoadingIndicator"),w=St("Input");return oe(),ce(Me,null,[be("div",{class:"relative flex flex-1 items-center justify-center bg-gray-50",onDrop:_},[we(T(hf),{onDragover:f,onEdgesChange:m},{"node-table":Ie(({data:k})=>[(oe(),Le(Ka,null,{fallback:Ie(()=>[be("div",Sf,[we(E,{class:"h-6 w-6 text-gray-400"})])]),default:Ie(()=>[we(Ef,{tablename:k.tablename},null,8,["tablename"])]),_:2},1024))]),"edge-custom":Ie(k=>[we(vf,Ja(Qa(k)),null,16)]),_:1}),s.value.length?ke("",!0):(oe(),ce("div",Nf," Drag and drop tables from the left panel to create relationships. "))],32),be("div",kf,[Cf,we(w,{placeholder:"Search","icon-left":"search",modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=k=>r.value=k)},null,8,["modelValue"]),be("div",Mf,[a.value.length?(oe(),ce("div",If,[(oe(!0),ce(Me,null,it(a.value,k=>(oe(),ce("div",{key:k.name,class:"group -mx-1 flex cursor-pointer items-center justify-between rounded-md px-2 py-1 hover:bg-gray-100",draggable:!0,onDragstart:y=>p(y,k)},[be("div",Of,[we(T(nl),{class:"h-4 w-4 rotate-90 text-gray-600"}),be("span",null,ut(k.label),1)])],40,Tf))),128))])):ke("",!0),a.value.length?ke("",!0):(oe(),ce("div",Pf,$f))])])],64)}})}},Bf={class:"sticky top-0 z-10 flex items-center justify-between bg-white px-5 py-2.5 shadow"},zf={key:0,class:"flex h-full w-full overflow-hidden"},Uf={__name:"DataSourceRelationships",props:{name:{type:String,required:!0}},setup(e){const n=tl(e.name);return je("dataSource",n),n.fetchTables(),(o,r)=>{var a,l,i;return oe(),ce(Me,null,[be("header",Bf,[we(Ya,{class:"h-7",items:[{label:"Data Sources",route:{path:"/data-source"}},{label:((a=T(n).doc)==null?void 0:a.title)||((l=T(n).doc)==null?void 0:l.name),route:{path:`/data-source/${(i=T(n).doc)==null?void 0:i.name}`}},{label:"Relationships"}]},null,8,["items"])]),T(n).doc?(oe(),ce("div",zf,[T(n).doc.name?(oe(),Le(Af,{key:0})):ke("",!0)])):ke("",!0)],64)}}};export{Uf as default};
