var w=(u,r,e)=>new Promise((o,l)=>{var d=s=>{try{a(e.next(s))}catch(c){l(c)}},p=s=>{try{a(e.throw(s))}catch(c){l(c)}},a=s=>s.done?o(s.value):Promise.resolve(s.value).then(d,p);a((e=e.apply(u,r)).next())});import{_ as B,v as g,x as M,N as t,O as q,y as C,L as _,r as m,Y as H,aB as L,q as $,M as f,G as k,H as V,z as i,b as y,a5 as R,aC as S}from"./frappe-ui-24524c82.js";import{_ as E,s as N}from"./index-61e7aa99.js";const j={},z={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 102 30"},F=t("path",{fill:"currentColor",d:"M17.33 5.666h4.764v3.085h.187c.643-2.188 2.275-3.34 4.253-3.34.498 0 1.106.069 1.549.172v4.348c-.463-.152-1.397-.262-2.075-.262-2.171 0-3.762 1.497-3.762 3.671v10H17.33V5.666ZM28.636 18.413c0-3.948 3.146-5.121 6.652-5.445 3.078-.297 4.288-.449 4.288-1.588v-.069c0-1.449-.955-2.291-2.628-2.291-1.763 0-2.815.863-3.146 2.036l-4.544-.366c.678-3.223 3.472-5.252 7.718-5.252 3.941 0 7.517 1.774 7.517 5.984v11.925h-4.661v-2.45h-.139c-.864 1.65-2.558 2.788-5.18 2.788-3.374-.007-5.877-1.773-5.877-5.272Zm10.974-1.387v-1.878c-.587.394-2.344.642-3.416.794-1.729.242-2.87.918-2.87 2.305 0 1.346 1.086 2.05 2.594 2.05 2.164 0 3.692-1.415 3.692-3.271ZM47.093 5.694h4.84V8.66h.222c.657-1.435 2.075-3.202 5.041-3.202 3.887 0 7.171 3.016 7.171 9.096 0 5.914-3.146 9.103-7.185 9.103-2.863 0-4.35-1.65-5.027-3.12h-.152V30h-4.91V5.694Zm8.533 14.065c2.414 0 3.728-2.14 3.728-5.225 0-3.064-1.293-5.169-3.727-5.169-2.386 0-3.728 2.015-3.728 5.17 0 3.153 1.362 5.224 3.727 5.224ZM66.151 5.694H71V8.66h.221c.657-1.435 2.075-3.202 5.041-3.202 3.887 0 7.171 3.016 7.171 9.096 0 5.914-3.146 9.103-7.185 9.103-2.863 0-4.35-1.65-5.027-3.12h-.152V30H66.15V5.694Zm8.534 14.065c2.413 0 3.727-2.14 3.727-5.225 0-3.064-1.293-5.169-3.728-5.169-2.385 0-3.727 2.015-3.727 5.17 0 3.153 1.37 5.224 3.728 5.224ZM85.078 14.617c0-5.459 3.382-9.151 8.596-9.151 4.682 0 8.326 2.967 8.326 8.978v1.346H89.933v.014c0 2.636 1.556 4.258 4.01 4.258 1.64 0 2.905-.704 3.403-2.05l4.543.297c-.691 3.278-3.644 5.41-8.028 5.41-5.45 0-8.783-3.498-8.783-9.102Zm12.296-1.863c-.014-2.105-1.487-3.624-3.624-3.624-2.178 0-3.713 1.615-3.817 3.624h7.44ZM0 0v4.106h15.642V0H0ZM0 10.476v12.871h4.993V14.59h9.612v-4.113H0Z"},null,-1),U=[F];function A(u,r){return g(),M("svg",z,U)}const D=B(j,[["render",A]]),G={class:"h-full w-full pt-4 sm:pt-16"},I={class:"relative z-10"},O=t("div",{class:"flex"},[t("img",{src:E,class:"mx-auto h-12"})],-1),P={class:"mx-auto bg-white px-4 py-8 sm:mt-6 sm:w-96 sm:rounded-lg sm:px-8 sm:shadow-xl"},T={class:"mb-6 text-center"},Y={class:"text-base text-gray-900"},J={class:"fixed bottom-4 z-[1] flex w-full justify-center"},K={__name:"LoginBox",props:["title"],setup(u){const r=u;return(e,o)=>(g(),M("div",G,[t("div",I,[O,t("div",P,[t("div",T,[t("span",Y,q(r.title),1)]),C(e.$slots,"default")])]),t("div",J,[_(D,{class:"h-4"})])]))}},Q=["onSubmit"],se={__name:"Login",setup(u){const r=N(),e=m(null),o=m(null),l=m(null),d=m(null),p=m(null),a=H(),s=L();$(()=>{var n;(n=a==null?void 0:a.query)!=null&&n.route&&(p.value=a.query.route,s.replace({query:null}))});const c=()=>w(this,null,function*(){if(!(!o.value||!l.value))try{d.value=null,e.value=!0,(yield r.login(o.value,l.value))&&s.push(p.value||"/")}catch(n){console.error(n),d.value=n.messages.join(`
`)}finally{e.value=!1}});return(n,h)=>{const x=f("FormControl"),b=f("ErrorMessage"),Z=f("Button");return g(),k(K,{class:"bg-gray-50",title:"Log in to your account"},{default:V(()=>[t("form",{class:"flex flex-col",onSubmit:S(c,["prevent"])},[_(x,{label:"Email",placeholder:"johndoe@mail.com",modelValue:i(o),"onUpdate:modelValue":h[0]||(h[0]=v=>y(o)?o.value=v:null),name:"email",autocomplete:"email",type:i(o)!=="Administrator"?"email":"text",required:""},null,8,["modelValue","type"]),_(x,{class:"mt-4",label:"Password",type:"password",placeholder:"•••••",modelValue:i(l),"onUpdate:modelValue":h[1]||(h[1]=v=>y(l)?l.value=v:null),name:"password",autocomplete:"current-password",required:""},null,8,["modelValue"]),_(b,{error:i(d),class:"!mt-2"},null,8,["error"]),_(Z,{class:"mt-4",variant:"solid",disabled:i(e),loading:i(e),onClick:c},{default:V(()=>[R(" Log in with email ")]),_:1},8,["disabled","loading"])],40,Q)]),_:1})}}};export{se as default};
