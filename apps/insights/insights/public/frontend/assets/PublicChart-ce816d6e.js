var p=(a,e,t)=>new Promise((r,n)=>{var l=o=>{try{i(t.next(o))}catch(c){n(c)}},d=o=>{try{i(t.throw(o))}catch(c){n(c)}},i=o=>o.done?r(o.value):Promise.resolve(o.value).then(l,d);i((t=t.apply(a,e)).next())});import{w as f}from"./widgets-f5903e20.js";import m from"./InvalidWidget-3dda2fff.js";import{d as u}from"./index-61e7aa99.js";import{g as h}from"./results-60b5fd7f.js";import{a as g,Q as _,z as s,G as y,H as b,Z as C,B as k,v as w,L as P}from"./frappe-ui-24524c82.js";function x(a){const e=N(a),t=g({query:null,data:[],loading:!1,error:null,doc:{doctype:"Insights Chart",name:void 0,chart_type:void 0,options:{},is_public:!1}});function r(){return p(this,null,function*(){t.loading=!0,t.doc=yield e.fetch(),t.data=h(t.doc.data),t.loading=!1})}return r(),Object.assign(t,{load:r})}function N(a){return _({url:"insights.api.public.get_public_chart",params:{public_key:a},transform(e){return e.options=u(e.options),e.data=u(e.data),e}})}const R={__name:"PublicChart",props:{public_key:String},setup(a){const t=x(a.public_key);return(r,n)=>s(t).doc.chart_type?(w(),y(C(s(f).getComponent(s(t).doc.chart_type)),{ref:"widget",data:s(t).data,options:s(t).doc.options,key:JSON.stringify(s(t).doc.options)},{placeholder:b(()=>[P(m,{class:"absolute",title:"Insufficient options",message:"Please check the options for this chart",icon:"settings","icon-class":"text-gray-500"})]),_:1},8,["data","options"])):k("",!0)}};export{R as default};
