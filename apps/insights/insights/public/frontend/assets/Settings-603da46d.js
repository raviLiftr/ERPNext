import{C as v,D as g}from"./DatePicker-f885a1f8.js";import{P as h}from"./PageBreadcrumbs-e38fbd0a.js";import{v as y,x as b,N as t,O as _,y as q,r as w,s as V,f as k,M as p,L as s,H as i,z as f,F as S}from"./frappe-ui-24524c82.js";import{a as T}from"./index-61e7aa99.js";import"./index-45270e13.js";const C={class:"flex"},E={class:"flex-1"},B={class:"font-medium leading-6 text-gray-900"},$={class:"text-gray-600"},D={class:"flex flex-1 items-center pl-20"},u={__name:"Setting",props:{label:{type:String,required:!0},description:{type:String,required:!0}},setup(m){return(d,e)=>(y(),b("div",C,[t("div",E,[t("p",B,_(m.label),1),t("span",$,_(m.description),1)]),t("div",D,[q(d.$slots,"default")])]))}},U={class:"sticky top-0 z-10 flex items-center justify-between bg-white px-5 py-2.5"},N={class:"space-x-2.5"},A={class:"flex flex-1 space-y-4 overflow-hidden bg-white px-6 py-2"},F={class:"-m-1 flex flex-1 flex-col space-y-6 overflow-scroll p-1"},M={class:"rounded bg-white p-6 shadow"},Q=t("div",{class:"flex items-baseline"},[t("div",{class:"text-xl font-medium text-gray-700"},"General")],-1),R={class:"mt-4 flex flex-col space-y-8"},j=t("div",{class:"ml-2 text-gray-600"},"Rows",-1),I=t("div",{class:"ml-2 text-gray-600"},"Minutes",-1),O={class:"rounded bg-white p-6 shadow"},P=t("div",{class:"flex items-baseline"},[t("div",{class:"text-xl font-medium text-gray-700"},"Notifications")],-1),z={class:"mt-4 flex flex-col space-y-8"},K={__name:"Settings",setup(m){const d={query_result_limit:1e3,query_result_expiry:60,auto_execute_query:!0,allow_subquery:!0,fiscal_year_start:null,telegram_api_token:""},e=w(d),n=T();V(()=>{n.settings?Object.keys(e.value).forEach(o=>{e.value[o]=n.settings[o]}):e.value=d});const x=k(()=>{const o=e.value,l=n.settings;return!o||!l?!0:Object.keys(o).find(c=>o[c]!==l[c])===void 0||n.settings.loading});return document.title="Settings - Insights",(o,l)=>{const c=p("Button"),r=p("Input");return y(),b(S,null,[t("header",U,[s(h,{class:"h-7",items:[{label:"Settings"}]}),t("div",N,[s(c,{label:"Update",disabled:x.value,variant:"solid",onClick:l[0]||(l[0]=a=>f(n).update(e.value))},{prefix:i(()=>[s(f(v),{class:"w-4"})]),_:1},8,["disabled"])])]),t("div",A,[t("div",F,[t("div",M,[Q,t("div",R,[s(u,{label:"Max Query Result Limit",description:"Maximum number of rows to be returned by a query. This is to prevent long running queries and memory issues."},{default:i(()=>[s(r,{type:"number",min:"0",modelValue:e.value.query_result_limit,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.query_result_limit=a)},null,8,["modelValue"]),j]),_:1}),s(u,{label:"Cache Query Results For",description:"Number of minutes to cache query results. This is to prevent accidental running of the same query multiple times."},{default:i(()=>[s(r,{type:"number",min:"0",modelValue:e.value.query_result_expiry,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.query_result_expiry=a)},null,8,["modelValue"]),I]),_:1}),s(u,{label:"Fiscal Year Start",description:"Start of the fiscal year. This is used to calculate fiscal year for date columns."},{default:i(()=>[s(g,{placeholder:"Select Date",value:e.value.fiscal_year_start,onChange:l[3]||(l[3]=a=>e.value.fiscal_year_start=a)},null,8,["value"])]),_:1}),s(u,{label:"Auto Execute Query",description:"Automatically execute when tables, columns, or filters are changed."},{default:i(()=>[s(r,{type:"checkbox",modelValue:e.value.auto_execute_query,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.auto_execute_query=a),label:e.value.auto_execute_query?"Enabled":"Disabled"},null,8,["modelValue","label"])]),_:1}),s(u,{label:"Enable Query Reusability",description:"Allow selecting query as a table in another query. Any query selected as a table will be appended as a sub query using CTE (Common Table Expression)."},{default:i(()=>[s(r,{type:"checkbox",modelValue:e.value.allow_subquery,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.allow_subquery=a),label:e.value.allow_subquery?"Enabled":"Disabled"},null,8,["modelValue","label"])]),_:1})])]),t("div",O,[P,t("div",z,[s(u,{label:"Telegram Bot Token",description:"Telegram bot token to send notifications to Telegram."},{default:i(()=>[s(r,{type:"password",modelValue:e.value.telegram_api_token,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.telegram_api_token=a),placeholder:"Telegram Bot Token"},null,8,["modelValue"])]),_:1})])])])])],64)}}};export{K as default};
