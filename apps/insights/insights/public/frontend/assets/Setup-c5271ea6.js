var k=(b,c,e)=>new Promise((g,d)=>{var l=o=>{try{t(e.next(o))}catch(r){d(r)}},p=o=>{try{t(e.throw(o))}catch(r){d(r)}},t=o=>o.done?g(o.value):Promise.resolve(o.value).then(l,p);t((e=e.apply(b,c)).next())});import{a as Q,i as S,r as x,M as A,v as s,x as a,F as w,E as L,N as i,O as y,G as E,L as f,H as I,a5 as C,P as R,A as P,B as m,z as B,D as O,f as N,m as D,aB as M,V as Y,Z as j}from"./frappe-ui-24524c82.js";import{s as z,a as V}from"./index-61e7aa99.js";import{_ as G,a as U,b as X}from"./PostgreSQLForm-adfbeb34.js";import"./dataSourceStore-3ba6c3b5.js";import"./vuedraggable.umd-a5e26eb5.js";import"./Form-5f5c15e9.js";const H={class:"mt-6 space-y-4"},W={class:"font-bold text-gray-900"},K={class:"flex items-center space-x-2"},F=["id","checked","onChange"],Z=["for"],q={class:"mt-6 flex justify-end space-x-3"},J={__name:"SetupQuestions",emits:["next","prev"],setup(b,{emit:c}){const e=Q([{question:"What type of data/database system(s) are you planning to connect with Insights?",answerOptions:["I plan to connect to ERPNext","I plan to use a SQL database (e.g., MySQL, PostgreSQL).","I plan to use spreadsheets (e.g., Excel, Google Sheets).","I plan to use a mix of different databases.","I'm not sure yet."],multipleAnswers:!0,selectedAnswerIndexes:[]},{question:"What is your level of familiarity with SQL and data analytics?",answerOptions:["I'm a complete beginner with no experience in SQL or data analytics.","I have some familiarity with data analytics, but I'm new to SQL.","I've used SQL before but am not an expert.","I'm quite comfortable with SQL and have done some data analysis.","I'm an expert in SQL and have significant experience in data analytics."],multipleAnswers:!1,selectedAnswerIndexes:[]},{question:"Which of the following best describes your role or use-case for Insights?",answerOptions:["I'm a business owner/manager looking to monitor and understand key metrics.","I'm a data analyst/scientist performing in-depth data exploration.","I'm part of a team that needs to share data and reports with stakeholders.","I'm in a tech role, exploring tools for our organization's data visualization needs.","I'm just exploring and learning about data visualization and business intelligence tools."],multipleAnswers:!1,selectedAnswerIndexes:[]}]);function g(o,r){o.multipleAnswers?o.selectedAnswerIndexes.includes(r)?o.selectedAnswerIndexes=o.selectedAnswerIndexes.filter(n=>n!==r):o.selectedAnswerIndexes.push(r):o.selectedAnswerIndexes=[r]}const d=S("$notify"),l=x(!1);function p(){return k(this,null,function*(){if(e.some(o=>o.selectedAnswerIndexes.length===0))d({title:"Please answer all questions",message:"You must select at least one answer for each question.",variant:"error"});else{l.value=!0;const o=e.reduce((r,n)=>(r[n.question]=n.selectedAnswerIndexes.map(v=>n.answerOptions[v]),r),{});yield R("insights.api.setup.submit_survey_responses",{responses:o}),l.value=!1,c("next")}})}function t(){c("next")}return(o,r)=>{const n=A("Input"),v=A("Button");return s(),a("div",H,[(s(!0),a(w,null,L(e,u=>(s(),a("div",{key:u.question,class:"space-y-3"},[i("div",W,y(u.question),1),i("div",null,[u.multipleAnswers?(s(!0),a(w,{key:0},L(u.answerOptions,(h,_)=>(s(),a("div",K,[i("input",{type:"checkbox",id:`${u.question}-${_}`,checked:u.selectedAnswerIndexes.includes(_),onChange:T=>g(u,_),class:"h-4 w-4 rounded border-gray-300"},null,40,F),i("label",{class:"text-gray-700",for:`${u.question}-${_}`},y(h),9,Z)]))),256)):(s(),E(n,{key:1,type:"select",value:u.selectedAnswerIndexes[0],onChange:h=>g(u,h),options:u.answerOptions.map((h,_)=>({label:h,value:_}))},null,8,["value","onChange","options"]))])]))),128)),i("div",q,[f(v,{variant:"outline",onClick:t},{default:I(()=>[C(" Skip ")]),_:1}),f(v,{variant:"solid",onClick:p,loading:l.value,disabled:l.value||e.some(u=>u.selectedAnswerIndexes.length===0)},{default:I(()=>[C(" Continue ")]),_:1},8,["loading","disabled"])])])}}},ee={class:"grid grid-cols-1 gap-4"},te=["onClick"],se={key:0,class:"mr-3 p-2 text-gray-600"},ne={class:"font-bold text-gray-900"},oe={class:"text-base text-gray-700"},ae={class:"mt-6 flex flex-shrink-0 justify-end space-x-3"},ie={__name:"SampleDatasetList",emits:["submit"],setup(b,{emit:c}){const e=x(null),g=[{name:"ecommerce",title:"eCommerce",description:"An eCommerce dataset with orders, products, customers, and suppliers data.",icon:"shopping-cart"}],d=S("$notify"),l=x(!1);function p(){return k(this,null,function*(){if(e.value===null){d({title:"Please select a dataset",message:"Please select a dataset to continue",type:"error"});return}l.value=!0,yield R("insights.api.setup.setup_sample_data",{dataset:g[e.value].name}),l.value=!1,c("submit")})}const t=z(),o=S("$socket"),r=x("Continue");return o.on("insights_demo_setup_progress",n=>{n.user==t.user.user_id&&(r.value=`${n.progress.toFixed(0)}% complete...`,n.progress==100&&(r.value="Continue"))}),(n,v)=>{const u=A("FeatherIcon"),h=A("Button");return s(),a(w,null,[i("div",ee,[(s(),a(w,null,L(g,(_,T)=>i("div",{class:P(["col-span-1 flex cursor-pointer items-center rounded border border-gray-300 px-4 py-3 transition-all",e.value===T?"border-gray-600":"hover:border-gray-300"]),onClick:$=>e.value=T},[_.icon?(s(),a("div",se,[f(u,{name:_.icon,class:"h-8 w-8"},null,8,["name"])])):m("",!0),i("div",null,[i("div",ne,y(_.title),1),i("div",oe,y(_.description),1)])],10,te)),64))]),i("div",ae,[f(h,{variant:"solid",onClick:p,loading:l.value,disabled:l.value||e.value===null},{default:I(()=>[C(y(r.value),1)]),_:1},8,["loading","disabled"])])],64)}}},re={class:"mt-4 flex flex-col overflow-hidden"},le={class:"flex flex-1 flex-col overflow-y-scroll"},ce={key:0},ue={class:"mt-6 flex flex-shrink-0 justify-end space-x-3"},de={key:1},pe={key:2},me={key:3},ge={key:4},_e={__name:"SourceConnectionStep",emits:["next","prev"],setup(b,{emit:c}){const e=S("setupState"),g=window.location.hostname,d=x(g);function l(){return k(this,null,function*(){if(d.value===""){$notify({title:"Please enter a title",message:"Please enter a title to continue",type:"error"});return}yield R("insights.api.setup.update_erpnext_source_title",{title:d.value}),c("next")})}return(p,t)=>{const o=A("Input"),r=A("Button");return s(),a("div",re,[i("div",le,[B(e).sourceType=="erpnext"?(s(),a("div",ce,[f(o,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=n=>d.value=n),label:"Title"},null,8,["modelValue"]),i("div",ue,[f(r,{variant:"solid",onClick:l},{default:I(()=>[C(" Continue ")]),_:1})])])):m("",!0),B(e).sourceType=="mariadb"?(s(),a("div",de,[f(G,{onSubmit:t[1]||(t[1]=n=>c("next")),submitLabel:"Continue"})])):m("",!0),B(e).sourceType=="postgresql"?(s(),a("div",pe,[f(U,{onSubmit:t[2]||(t[2]=n=>c("next")),submitLabel:"Continue"})])):m("",!0),B(e).sourceType=="file"?(s(),a("div",me,[f(X,{onSubmit:t[3]||(t[3]=n=>c("next"))})])):m("",!0),B(e).sourceType=="sample"?(s(),a("div",ge,[f(ie,{onSubmit:t[4]||(t[4]=n=>c("next"))})])):m("",!0)])])}}},fe="/assets/insights/frontend/assets/SheetIcon-0379e887.png",ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHmSURBVHgB7Zu9LkRBFIC/mUiUVOpVqHmEtQ/g5w3EC0g0KGmIQngBotPxBJZGRaJR28QLrI7GOLP3SvwkxGbOkj3n29zNzN5m55ubc3Zm9gQ+s52aRFakNSNXg2Eg0CVxIa0z1sLxx1tvbKeGDPxIWk2GmzYvLLMROrlTCagG32ZYZvxn7kVCK0uIvW418w3sMCljPsyNILO/VAuwRspPQZTBz2OTIK+VKG9NrBKYjvIgjGOXRsQ4LgDjuACM4wIwzggK7LdgbJSiJLlWz6H7TFFUBMxPyS+MMYqSBWxdlRfgMQDjuACMoxIEZ09QofNIcVQEaHxRLTwGYBwXgHE8DaLAzASMF14MXTyggoqA08Wyi6G8EIq7qOAxAOO4AIyjEgS/4+D697s6KaHGwAXs3/yvxZLHAIzjAjCOp0EGTOD9nxN/h0Y2HLiAPTk26z7RF5tX5VPowAUsTNEXefaP78oL8CCIcTwLoECifMTWWhCpCGgpHY31mz2+w4/GMI4LwDguAOO4AIyTBXSwSqKbBdxil8vICwfYJMnW1Gm1O7WTzqUziyUSbdZDK9adZXI5qR3u6zHXWSAXEuda2tSrH1Y8iftzUm+Mdd1w/uDrBm1VSjvXK6gcnprCDjnY53i3ES7f33gFTkZvwiy7+ssAAAAASUVORK5CYII=",ye="/assets/insights/frontend/assets/MariaDBIcon-58822707.png",he="/assets/insights/frontend/assets/PostgreSQLIcon-03c6d437.png",xe="/assets/insights/frontend/assets/SampleDataIcon-3a1c8407.png",Ae={class:"mt-6"},we={class:"grid grid-cols-2 gap-4 px-1"},Ie=["onClick"],be={key:0,class:"mr-2 flex w-10 items-center justify-center"},Se={key:0,src:fe},Ce={key:1,src:ve},$e={key:2,src:ye},ke={key:3,src:he},Be={key:4,src:xe},Le={class:"font-bold leading-6 text-gray-900"},Te={class:"text-sm text-gray-700"},Pe={class:"mt-6 flex justify-end space-x-3"},De={__name:"SourceTypeStep",emits:["next"],setup(b,{emit:c}){const e=x(null),g=Q([{title:"ERPNext",description:"Connect to your ERPNext site",img:"ERPNextIcon.png"},{title:"MariaDB",description:"Connect to MariaDB database",img:"MariaDBIcon.png"},{title:"PostgreSQL",description:"Connect to PostgreSQL database",img:"PostgreSQLIcon.png"},{title:"Spreadsheet",description:"Connect or Upload a spreadsheet",img:"SheetIcon.png"},{title:"Sample Dataset",description:"Explore Insights with sample data",img:"SampleDataIcon.png"}]),d=S("$notify"),l=S("setupState");function p(){if(e.value===null){d({title:"Please select an option",message:"Please select an option to continue",type:"error"});return}e.value===0?l.sourceType="erpnext":e.value===1?l.sourceType="mariadb":e.value===2?l.sourceType="postgresql":e.value===3?l.sourceType="file":e.value===4&&(l.sourceType="sample"),c("next")}return(t,o)=>{const r=A("Button");return s(),a("div",Ae,[i("div",we,[(s(!0),a(w,null,L(g,(n,v)=>(s(),a("div",{class:P(["col-span-1 flex cursor-pointer items-center rounded border border-gray-300 px-4 py-3 transition-all",e.value===v?" border-gray-500 ring-2 ring-gray-400":"hover:border-gray-500"]),onClick:u=>e.value=v},[n.img?(s(),a("div",be,[n.img==="SheetIcon.png"?(s(),a("img",Se)):m("",!0),n.img==="ERPNextIcon.png"?(s(),a("img",Ce)):m("",!0),n.img==="MariaDBIcon.png"?(s(),a("img",$e)):m("",!0),n.img==="PostgreSQLIcon.png"?(s(),a("img",ke)):m("",!0),n.img==="SampleDataIcon.png"?(s(),a("img",Be)):m("",!0)])):m("",!0),i("div",null,[i("div",Le,y(n.title),1),i("div",Te,y(n.description),1)])],10,Ie))),256))]),i("div",Pe,[f(r,{variant:"solid",disabled:e.value===null,onClick:p},{default:I(()=>[C(" Continue ")]),_:1},8,["disabled"])])])}}},Ee={class:"flex h-full w-full bg-white pt-[7rem] text-lg"},Qe={class:"mx-auto flex w-[40rem] flex-col overflow-hidden"},Re={class:"mx-auto w-fit"},Ne={class:"flex items-center space-x-2 py-1"},Oe={class:"mt-8"},Me={class:"text-3xl font-bold leading-9 text-gray-900"},Ye={class:"text-base leading-4 text-gray-700"},je={class:"relative flex flex-col overflow-hidden"},ze={class:"absolute bottom-0 left-0"},Fe={__name:"Setup",setup(b){const c=Q({sourceType:null});O("setupState",c);const e={erpnext:"Setup ERPNext",mariadb:"Setup MariaDB",postgresql:"Setup PostgreSQL",file:"Setup Spreadsheet",sample:"Select Sample Dataset"},g={erpnext:"Insights is already connected to your ERPNext site. You can optionally give a title to your site to help you identify it as a data source.",mariadb:"You need to enter your MariaDB database details to connect to your database. If you are not sure about your database details, please contact your database administrator.",postgresql:"You need to enter your PostgreSQL database details to connect to your database. If you are not sure about your database details, please contact your database administrator.",file:"You need to upload a spreadsheet to connect to your data. Insights supports only .csv files.",sample:"You can choose from one of the sample datasets to connect to Insights."},d=N(()=>e[c.sourceType]||"Connect to Data"),l=N(()=>g[c.sourceType]),p=x([{title:"Welcome to Insights",description:`
			To get started, you need to connect some data. You can connect to ERPNext, a SQL database, a spreadsheet, or you can explore our sample datasets to get a feel for how Insights works.
		`,component:D(De)},{title:d,description:l,component:D(_e)},{title:"Help Us Improve",description:`
			Insights is under active development so	weâ€™d like to ask you a few questions that will help us improve your experience in the future.
		`,component:D(J)}]),t=x(0),o=V(),r=M();function n(){return k(this,null,function*(){if(t.value===p.value.length-1){o.settings.setup_complete=1,yield o.update({setup_complete:1},!1),r.replace({path:"/"});return}t.value+=1})}function v(){t.value!==0&&(t.value-=1)}return(u,h)=>{const _=A("Button");return s(),a("div",Ee,[i("div",Qe,[i("div",Re,[i("div",Ne,[(s(!0),a(w,null,L(p.value,(T,$)=>(s(),a(w,null,[i("div",{class:P(["flex h-3 w-3 cursor-default items-center justify-center rounded-full transition-all",[t.value<$?"bg-gray-200":"bg-gray-800",t.value===$?"ring-4 ring-gray-400":""]])},null,2),$!==p.value.length-1?(s(),a("div",{key:0,class:P(["w-7 border-b transition-all",t.value-1<$?"border-gray-400":"border-gray-800"])},null,2)):m("",!0)],64))),256))])]),i("div",Oe,[i("div",Me,y(p.value[t.value].title),1),i("div",Ye,y(p.value[t.value].description),1)]),i("div",je,[f(Y,{name:"fade",mode:"out-in"},{default:I(()=>[(s(),E(j(p.value[t.value].component),{onNext:n,onPrev:v},null,32))]),_:1}),i("div",ze,[t.value>0?(s(),E(_,{key:0,variant:"outline",onClick:v},{default:I(()=>[C(" Back ")]),_:1})):m("",!0)])])])])}}};export{Fe as default};
