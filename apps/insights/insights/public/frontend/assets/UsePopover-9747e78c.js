import{r as v,f as C,q as h,aj as P,u as L,v as T,G as k,N as m,L as B,H as x,J as _,y as R,a8 as f,a9 as g,K as b,V as z,W as A}from"./frappe-ui-24524c82.js";import{w as F}from"./index-61e7aa99.js";const O={enterActiveClass:"transition duration-200 ease-out",leaveActiveClass:"transition duration-150 ease-in",enterFromClass:"translate-y-1 opacity-0",enterToClass:"translate-y-0 opacity-100",leaveFromClass:"translate-y-0 opacity-100",leaveToClass:"translate-y-1 opacity-0"},D={enterActiveClass:"transition duration-200 ease-out",leaveActiveClass:"transition duration-150 ease-in",enterFromClass:"translate-x-1 opacity-0",enterToClass:"translate-x-0 opacity-100",leaveFromClass:"translate-x-0 opacity-100",leaveToClass:"translate-x-1 opacity-0"},I={__name:"UsePopover",props:{show:{type:Boolean,default:void 0},placement:{type:String,default:"bottom-start"},targetElement:{type:Object,required:!0},transition:{type:Object,default:O},autoClose:{type:Boolean,default:!0}},emits:["update:show"],setup(l,{expose:w,emit:y}){const e=l,c=e.show!==void 0,d=v(!1),o=C({get:()=>c?e.show:d.value,set:t=>c?y("update:show",t):d.value=t});if(!document.getElementById("frappeui-popper-root")){const t=document.createElement("div");t.id="frappeui-popper-root",document.body.appendChild(t)}let a=null;const r=v(null),i=()=>o.value=!o.value,n=()=>o.value=!0,p=()=>o.value=!1;h(()=>{if(!e.targetElement){console.warn("Popover: targetElement is required");return}a=P(e.targetElement,r.value,{placement:e.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]}),s(),window.addEventListener("resize",s),window.addEventListener("scroll",s),e.targetElement.addEventListener("click",n),e.targetElement.addEventListener("focus",n),e.autoClose&&document.addEventListener("click",u)});const u=t=>{r.value.contains(t.target)||e.targetElement.contains(t.target)||document.getElementById("frappeui-popper-root").contains(t.target)||p()},s=()=>o.value&&(a==null?void 0:a.update());return F(o,s),L(()=>{a==null||a.destroy(),window.removeEventListener("resize",s),window.removeEventListener("scroll",s),e.targetElement.removeEventListener("click",i),e.targetElement.removeEventListener("focus",n),e.autoClose&&document.removeEventListener("click",u)}),w({toggle:i,open:n,close:p,isOpen:o}),(t,E)=>(T(),k(A,{to:"#frappeui-popper-root"},[m("div",{ref_key:"popover",ref:r,class:"z-[100]"},[B(z,f(g(l.transition)),{default:x(()=>[_(m("div",null,[R(t.$slots,"default",f(g({toggle:i})))],512),[[b,o.value]])]),_:3},16)],512)]))}};export{I as _,D as s};
