import{u as E,a as B,_ as $}from"./useTeams-edba4ab4.js";import{_ as j}from"./Form-5f5c15e9.js";import{f as b,a as N,M as u,v as i,G as U,H as n,L as a,a5 as v,r as V,i as L,x as h,B as w,F as C,N as e,z as T,E as D,O as f}from"./frappe-ui-24524c82.js";const F={__name:"AddUserDialog",emits:["close"],setup(A,{emit:d}){const c=b({get:()=>!0,set:s=>{s||d("close")}}),o=N({first_name:"",last_name:"",email:"",team:"",role:"User"}),y=E(),g=b(()=>[{label:"Select Team",value:""}].concat(y.list.map(s=>({label:s.team_name,value:s.name})))),m=B();function k(){m.add(o).then(()=>{d("close")})}return(s,t)=>{const p=u("Button"),_=u("Dialog");return i(),U(_,{options:{title:"Add User"},modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=r=>c.value=r)},{"body-content":n(()=>[a(j,{modelValue:o,"onUpdate:modelValue":t[0]||(t[0]=r=>o=r),meta:{fields:[{name:"first_name",label:"First Name",type:"text",placeholder:"Enter first name"},{name:"last_name",label:"Last Name",type:"text",placeholder:"Enter last name"},{name:"email",label:"Email",type:"email",placeholder:"Enter email"},{name:"role",label:"Role",type:"select",placeholder:"Select role",options:["Admin","User"]},{name:"team",label:"Team",type:"select",placeholder:"Select team",options:g.value}]}},null,8,["modelValue","meta"])]),actions:n(()=>[a(p,{variant:"solid",disabled:!o.first_name||!o.last_name||!o.email,onClick:k},{default:n(()=>[v(" Add ")]),_:1},8,["disabled"]),a(p,{onClick:t[1]||(t[1]=r=>c.value=!1)},{default:n(()=>[v("Cancel")]),_:1})]),_:1},8,["modelValue"])}}},S={class:"flex flex-1 justify-between"},I=e("h1",{class:"text-3xl font-medium text-gray-900"},"Users",-1),O={class:"space-x-4"},z={class:"flex flex-1 flex-col overflow-hidden"},G={class:"mb-4 flex flex-shrink-0 space-x-4"},H={class:"flex flex-1 flex-col overflow-hidden rounded border"},M={class:"flex flex-shrink-0 items-center justify-between border-b px-4 py-3 text-sm text-gray-600"},R={class:"mr-4"},q=e("p",{class:"flex-1 flex-shrink-0"},"Full Name",-1),J=e("p",{class:"flex-1 flex-shrink-0"},"Email",-1),K=e("p",{class:"flex-1 flex-shrink-0"},"Teams",-1),P=e("p",{class:"flex-1 flex-shrink-0"},"Last Active",-1),Q={key:0,role:"list",class:"flex flex-1 flex-col divide-y divide-gray-200 overflow-y-scroll"},W=["onClick"],X={class:"group flex h-11 cursor-pointer items-center rounded px-4 hover:bg-gray-50"},Y={class:"mr-4"},Z={class:"flex flex-1 flex-shrink-0 items-center justify-between"},ee={class:"overflow-hidden text-ellipsis whitespace-nowrap text-sm font-medium text-gray-900"},te={class:"flex-1 flex-shrink-0 overflow-hidden text-ellipsis whitespace-nowrap text-sm text-gray-600"},se={class:"hidden flex-1 flex-shrink-0 overflow-hidden whitespace-nowrap text-sm text-gray-600 lg:inline-block"},le={class:"hidden flex-1 flex-shrink-0 overflow-hidden whitespace-nowrap text-sm text-gray-600 lg:inline-block"},re={__name:"Users",setup(A){const d=B(),c=V(null),o=V(!1),y=L("$dayjs"),g=s=>s&&y(s).fromNow(),m=N({full_name:""}),k=b(()=>d.list.filter(s=>s.full_name.toLowerCase().includes(m.full_name.toLowerCase())));return(s,t)=>{const p=u("Button"),_=u("Input"),r=u("Badge");return i(),h(C,null,[a($,null,{header:n(()=>[e("div",S,[I,e("div",O,[a(p,{variant:"outline",iconLeft:"plus",onClick:t[0]||(t[0]=x=>o.value=!0)},{default:n(()=>[v(" Add User ")]),_:1})])])]),main:n(()=>{var x;return[e("div",z,[e("div",G,[a(_,{type:"text",placeholder:"Full Name",modelValue:m.full_name,"onUpdate:modelValue":t[1]||(t[1]=l=>m.full_name=l)},null,8,["modelValue"])]),e("div",H,[e("div",M,[e("p",R,[a(_,{type:"checkbox",class:"rounded border-gray-300"})]),q,J,K,P]),((x=T(d).list)==null?void 0:x.length)>0?(i(),h("ul",Q,[(i(!0),h(C,null,D(k.value,l=>(i(),h("li",{key:l.name,onClick:oe=>c.value=l.name},[e("div",X,[e("p",Y,[a(_,{type:"checkbox",class:"rounded border-gray-300"})]),e("p",Z,[e("span",ee,f(l.full_name),1),l.type=="Admin"?(i(),U(r,{key:0,theme:"green",class:"mr-6"},{default:n(()=>[v(f(l.type),1)]),_:2},1024)):w("",!0)]),e("p",te,f(l.email),1),e("p",se,f(l.teams.length>0?l.teams.join(", "):"-"),1),e("p",le,f(g(l.last_active)||"-"),1)])],8,W))),128))])):w("",!0)])])]}),_:1}),o.value?(i(),U(F,{key:0,onClose:t[2]||(t[2]=x=>o.value=!1)})):w("",!0)],64)}}};export{re as default};
