import{v as f,I as p,x as r,K as a,L as l}from"./index-61e7aa99.js";import{f as d}from"./frappe-ui-24524c82.js";const g=f("insights:data_sources",()=>{const o=p({doctype:"Insights Data Source",cache:"dataSourceList",filters:{},fields:["name","title","status","creation","modified","is_site_db","database_type","allow_imports"],orderBy:"creation desc",auto:!0}),i=d(()=>{var t;return((t=o.list.data)==null?void 0:t.map(e=>(e.created_from_now=r(e.creation).fromNow(),e.modified_from_now=r(e.modified).fromNow(),e.title=e.is_site_db&&e.title=="Site DB"?window.location.hostname:e.title,e)))||[]}),c=d(()=>i.value.map(s));function s(t){return{label:t.title,value:t.name,description:t.database_type}}return{list:i,dropdownOptions:c,loading:o.list.loading,testing:a.loading,creating:l.loading,deleting:o.delete.loading,create:t=>l.submit(t).then(()=>o.list.reload()),delete:t=>o.delete.submit(t).then(()=>o.list.reload()),testConnection:t=>a.submit(t),getDropdownOptions:t=>i.value.filter(m=>{for(const u in t){const n=u;if(m[n]!=t[n])return!1}return!0}).map(s)}}),D=g;export{D as u};
