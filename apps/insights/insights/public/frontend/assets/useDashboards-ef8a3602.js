var t=(s,e,r)=>new Promise((h,d)=>{var l=a=>{try{n(r.next(a))}catch(o){d(o)}},u=a=>{try{n(r.throw(a))}catch(o){d(o)}},n=a=>a.done?h(a.value):Promise.resolve(a.value).then(l,u);n((r=r.apply(s,e)).next())});import{v as c,x as g}from"./index-61e7aa99.js";import{Q as f,P as i}from"./frappe-ui-24524c82.js";const y=c("dashboards",{state:()=>({list:[],loading:!1,creating:!1,deleting:!1,currentDashboard:void 0}),actions:{reload(){return t(this,null,function*(){return this.loading=!0,this.list=yield m.fetch(),this.loading=!1,this})},create(s){return t(this,null,function*(){if(!s)return;this.creating=!0;const{name:e}=yield i("insights.api.dashboards.create_dashboard",{title:s});return this.creating=!1,this.reload(),e})},toggleLike(s){return t(this,null,function*(){yield i("frappe.desk.like.toggle_like",{doctype:"Insights Dashboard",name:s.name,add:s.is_favourite?"No":"Yes"}),this.reload()})},delete(s){return t(this,null,function*(){this.deleting=!0,yield i("frappe.client.delete",{doctype:"Insights Dashboard",name:s.name}),this.deleting=!1,this.reload()})},setCurrentDashboard(s){this.currentDashboard=s},resetCurrentDashboard(){this.currentDashboard=void 0}}}),m=f({url:"insights.api.dashboards.get_dashboard_list",initialData:[],cache:"dashboardsList",transform(s){return s.map(e=>(e.modified_from_now=g(e.modified).fromNow(),e))}});function D(s){return i("insights.insights.doctype.insights_dashboard.insights_dashboard.get_queries_column",{query_names:s})}function w(s){return i("insights.insights.doctype.insights_dashboard.insights_dashboard.get_query_columns",{query:s})}export{w as a,D as g,y as u};
